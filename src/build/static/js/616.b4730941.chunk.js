"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[616],{80226:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(1413),a=n(42982),o=n(74165),s=n(15861),i=n(70885),l=n(72791),c=n(60057),d=n(46844),u=(n(78431),{container:"orders_container__EtOtu"}),p=[{id:1,productName:"Praveen",uom:"Kg",date:"10/02/2023",dims:"Stores",internalPartNo:"INPN123",description:"Description For Request",shotWeight:"Hardware",status:"Requested",type:"Service",Item:"Materaila1",Qty:"1",Rdate:"14/02/2023"},{id:2,productName:"Dinesh",uom:"Liter",dims:"Quality",internalPartNo:"EPN123",description:"Description For Request",shotWeight:"Developement",date:"10/02/2023",status:"Approved",Item:"mat12",type:"Material",Qty:"6",Rdate:"21/02/2023"},{id:3,productName:"Kumar",uom:"Meter",dims:"Production",internalPartNo:"RTH123",description:"Description For Request",shotWeight:"Testing",date:"10/02/2023",status:"PO Generated",Item:"Laptop Baterry",type:"Service",Qty:"1",Rdate:"26/02/2023"},{id:4,productName:"Harish",uom:"Qty",dims:"Administration",internalPartNo:"ERT123",description:"Description For Request",shotWeight:"Hardware",date:"10/02/2023",status:"Rejected",Item:"materials41",type:"Material",Qty:"2",Rdate:"31/02/2023"},{id:5,productName:"Kalyan",uom:"Sq-meter",dims:"Production",internalPartNo:"DFTR123",description:"Description For Request",shotWeight:"Testing",date:"10/02/2023",status:"Approved",Item:"matert321",type:"Material",Qty:"4",Rdate:"28/02/2023"}],m=n(79747),h=n(89743),f=n(2677),v=n(80184),g=function(e,t){return[{title:"Requested Item",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.Item})}},{title:"Request No",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.internalPartNo})}},{title:"Request Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.date})}},{title:"User Name",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.productName})}},{title:"Approved Qty",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.Qty})}},{title:"Department",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.dims})}},{title:"Description",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.description})}}]},y=n(99355),x=n(21229),Z=n(64277);var P=function(e){var t=(0,x.ZP)({data:[]}),n=t.get,d=(t.post,t.response),u=(t.loading,t.error,(0,l.useState)(e.selectedItem.deliveries?e.selectedItem.deliveries:[])),p=(0,i.Z)(u,2),m=p[0],h=p[1],f=(0,l.useState)(e.selectedItem?e.selectedItem.quantity:1),g=(0,i.Z)(f,2),P=g[0],S=g[1],N=(0,l.useState)([{value:"",label:"Select"}]),w=(0,i.Z)(N,2),I=w[0],b=w[1],F=(0,l.useCallback)((0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(y.ZP+"/product/loadOptions");case 2:t=e.sent,b([].concat((0,a.Z)(I),(0,a.Z)(t)));case 4:case"end":return e.stop()}}),e)}))),[n,d]);return(0,l.useEffect)((function(){F()}),[]),(0,v.jsx)(c.Z,{template:{heading:"Purchase Request Entry",fields:[{title:"Req Number",type:"text",name:"orderNo",contains:"text",inpprops:{}},{title:"Req Date",type:"date",name:"OrderDate",contains:"date",validationProps:"Internal Part No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Depatment",type:"select",name:"Department",validationProps:"Please select Shift",contains:"Select",options:[{value:"",label:"Select"},{value:"Shift_A",label:"Administration"},{value:"Shift_B",label:"Production"},{value:"Shift_C",label:"Quality"},{value:"Shift_C",label:"Stores"}]},{title:"Purpose",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:4}}]},rowwise:3,watchFields:["quantity"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0&&(console.log(e[0]),S(e[0]))},onSubmit:function(t){t.deliveries=m,e.saveFunction(t),console.log(t)},onCancel:e.onCancel,buttonName:"Submit",defaultValues:e.selectedItem,btButtons:(0,v.jsx)(Z.Z,{data:m,onDeliveryUpdate:function(e,t){"add"===t?h((function(t){return[].concat((0,a.Z)(t),[e])})):(console.log((0,r.Z)({},e)),h(m.filter((function(t){return t.lineNo!==e.lineNo}))))},maxQty:P})})},S=n(23118),N=n(59434),w=n(34476),I=n(4349),b=n(43360),F={fields:[{title:"Product Name",type:"text",name:"tensile",contains:"text",inpprops:{minlength:0,maxlength:30}},{title:"Customer Name",type:"text",name:"tensile",contains:"text",inpprops:{minlength:0,maxlength:30}},{title:"Internal Part No",type:"text",name:"tensile",contains:"text",inpprops:{minlength:0,maxlength:30}},{title:"Product Category",type:"select",name:"outsouredTo",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Category 1"},{value:2,label:"Category 2"}]}]};var R=function(e){var t=(0,l.useState)(),n=(0,i.Z)(t,2),Z=n[0],R=n[1],C=(0,x.ZP)({data:[]}),M=C.get,q=C.post,k=C.response,H=(C.loading,C.error,(0,l.useState)(Math.random())),Q=(0,i.Z)(H,2),A=Q[0],E=(Q[1],(0,l.useState)(0)),T=(0,i.Z)(E,2),_=(T[0],T[1],(0,N.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),W=(0,i.Z)(_,3),O=W[0],B=(W[1],W[2],(0,N.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),K=(0,i.Z)(B,3),U=(K[0],K[1],K[2]),V=(0,N.I0)(),L=function(e,t){V(I.I.showAlertHandler({showAlert:!O,alertMessage:e,alertVariant:t}))},G=(0,l.useCallback)((0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(y.ZP+"/product/products");case 2:t=e.sent,k.ok&&R(t);case 4:case"end":return e.stop()}}),e)}))),[M,k,A]);(0,l.useEffect)((function(){G()}),[G]);var Y=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(y.ZP+"/product/create",t);case 2:n=e.sent,k.ok?t.productId?(R(Z.map((function(e){return e.productId===t.productId?t:e}))),V(w.n.hideModalHandler()),L("Product Updated Successfully","success")):(R([].concat((0,a.Z)(Z),[n])),V(w.n.hideModalHandler()),L("Product Created Succesfully","success")):(V(w.n.hideModalHandler()),L("Product Details Failed To Save","danger"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e,t){return function(){"productForm"==t?V(w.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,v.jsx)(P,{onCancel:function(){return V(w.n.hideModalHandler())},selectedItem:U,saveFunction:Y}),showModal:!0})):"edit"===t?(console.log((0,r.Z)({},e)),V(w.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,v.jsx)(P,{onCancel:function(){return V(w.n.hideModalHandler())},selectedItem:e,saveFunction:Y}),showModal:!0}))):("approvalForm"==t||"generatePo"==t)&&V(w.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,v.jsx)(v.Fragment,{}),showModal:!0}))}};return(0,v.jsxs)("div",{className:u.container,children:[(0,v.jsx)(d.Z,{title:"Items Request Search",onHeaderClick:z({},"productForm"),bottonShow:!0,children:(0,v.jsx)(c.Z,{template:F,rowwise:4,validate:D,onSubmit:j,onCancel:e.onCancel,buttonName:"Search"})}),(0,v.jsxs)(m.Z,{md:12,children:[(0,v.jsx)(h.Z,{children:(0,v.jsx)(f.Z,{md:3,children:(0,v.jsx)(b.Z,{className:u.btn,onClick:z({},"generatePo"),children:"Transfer Stock"})})}),(0,v.jsx)(S.Z,{cols:g(z,["edit","productForm","approvalForm","materialForm"]),data:p,includeCheck:1,striped:!0})]})]})};function j(e){console.log(e)}function D(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}}}]);
//# sourceMappingURL=616.b4730941.chunk.js.map