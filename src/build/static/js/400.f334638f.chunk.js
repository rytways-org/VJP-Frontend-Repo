"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[400],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(1413),a=r(70885),s=r(4942),o=r(72791),l={tableBody:"table_tableBody__NaJhZ"},i=r(89743),c=r(2677),d=r(89983),u=(r(77632),r(79836)),m=r(53382),p=r(68745),Z=r(90618),x=r(39281),f=r(65136),h=r(35855),g=r(35527),y=r(56890),j=r(40724),v=r(80184),b=function(e){var t=e.value,r=e.onChange;return(0,v.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return r(e.target.value)}})},N=(0,j.ZP)(p.Z)((function(e){var t,r=e.theme;return t={},(0,s.Z)(t,"&.".concat(Z.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:r.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(Z.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),C=(0,j.ZP)(h.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),P=function(e){var t=e.cols,r=e.data,s=e.rows,p=(e.loadDataonPageChange,e.counts,e.className),Z=e.includeCheck,j=e.checkBoxEvent,P=e.value,S=e.onChange,F=e.styles,D=o.useState(0),q=(0,a.Z)(D,2),A=q[0],I=q[1],w=o.useState(s||10),G=(0,a.Z)(w,2),R=G[0],k=G[1],B=o.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),_=(0,a.Z)(B,2),E=_[0],Q=(_[1],A>0&&Math.max(0,(1+A)*R-r.length),"undefined"===typeof F?{}:F),O="center";return(0,v.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,v.jsx)(i.Z,{className:"".concat(l.tableContainer," ").concat(p),style:(0,n.Z)((0,n.Z)({},null===Q||void 0===Q?void 0:Q.tablehead),null!==Q&&void 0!==Q&&Q.tablehead?{}:{background:"transparent"}),children:(0,v.jsx)(g.Z,{className:l.tableContainer,children:(0,v.jsxs)(x.Z,{className:l.tableStyles,children:[(0,v.jsxs)(i.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==P&&S&&(0,v.jsx)(c.Z,{children:(0,v.jsx)(b,{value:P,onChange:S})}),(0,v.jsx)(c.Z,{children:s&&(0,v.jsx)(f.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:E,component:"div",count:r.length,rowsPerPage:R,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:A,onPageChange:function(e,t){I(t)},onRowsPerPageChange:function(e){k(+e.target.value),I(0)},className:l.pagination})})]}),(0,v.jsxs)("div",{style:(0,n.Z)((0,n.Z)({},null===Q||void 0===Q?void 0:Q.table),null!==Q&&void 0!==Q&&Q.table?{}:{background:"transparent"}),className:l.tableBody,children:[(0,v.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(l.table),children:[(0,v.jsxs)(y.Z,{children:["                ",(0,v.jsxs)(h.Z,{children:[Z&&(0,v.jsx)(N,{align:O,children:(0,v.jsx)("input",{type:"checkbox"})}),(0,v.jsx)(N,{align:O,children:"S.No"}),t.map((function(e,t){return(0,v.jsx)(N,{align:O,children:e.title},t)}))]})]}),r&&(0,v.jsx)(m.Z,{children:r.slice(A*R,A*R+R).map((function(e,r){return(0,v.jsxs)(C,{children:[Z&&(0,v.jsx)(N,{align:O,children:(0,v.jsx)("input",{type:"checkbox",onClick:function(t){j(e,t.target.checked)}})}),(0,v.jsx)(N,{children:A*R+r+1}),t.map((function(t,r){return(0,v.jsx)(N,{align:t.align,className:t.hover&&l.hoverclass,children:t.render(e)},r)}))]},r++)}))})]})," "]})]})})})})};P.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var S=P},46844:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(1413),a=(r(72791),r(38595),r(2144)),s=r(89743),o=r(2677),l=r(43360),i="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",m=r(80184);var p=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,m.jsxs)(a.Z,{className:i,style:(0,n.Z)((0,n.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,m.jsx)(a.Z.Header,{className:c,children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,m.jsx)("h4",{children:e.title})}),(0,m.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,m.jsx)(l.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,m.jsx)(a.Z.Body,{className:d,children:e.children})]})}},22496:function(e,t,r){r.d(t,{Z:function(){return B}});var n=r(1413),a=r(74165),s=r(42982),o=r(15861),l=r(70885),i=r(72791),c=r(60057),d=(r(38595),r(30717)),u=r(89743),m=r(2677),p=r(61134),Z=r(97829),x=r(73728),f=(r(4349),r(59434)),h=r(21216),g=r(80184);var y=function(e){(0,f.I0)();var t=(0,i.useState)({}),r=(0,l.Z)(t,2),a=(r[0],r[1],(0,f.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),s=(0,l.Z)(a,3),o=(s[0],s[1],s[2],(0,i.useState)()),c=(0,l.Z)(o,2),y=c[0],j=(c[1],(0,p.cI)({defaultValues:(0,n.Z)({},y)})),v=j.register,b=j.handleSubmit,N=j.formState.errors,C=(j.watch,j.setError,j.clearErrors,j.setValue,j.reset);return(0,i.useEffect)((function(){C(e.defaultValues)}),[e.defaultValues]),(0,g.jsx)(d.Z,{className:Z.Z.formcon,children:(0,g.jsxs)(u.Z,{style:{backgroundColor:h.Z.colors.dgc,borderRadius:"1em",padding:".5rem 1rem"},children:[(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Unit Price"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"text",id:"unitPrice",name:"unitPrice"},v("unitPrice")),{},{className:Z.Z.formBorder})),N.unitPrice&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:N.unitPrice.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Cost Center"}),(0,g.jsxs)(d.Z.Select,(0,n.Z)((0,n.Z)({type:"text",id:"costCenter",name:"costCenter"},v("costCenter",{required:"Line No is Required"})),{},{className:Z.Z.formBorder,children:[(0,g.jsx)("option",{value:"0",children:"Select"}),(0,g.jsx)("option",{value:"1",children:"Cost Center 1"}),(0,g.jsx)("option",{value:"2",children:"Cost Center 2"}),(0,g.jsx)("option",{value:"3",children:"Cost Center 3"})]})),N.costCenter&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:N.costCenter.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"number",id:"quantity",name:"quantity"},v("quantity",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty,className:Z.Z.formBorder})),N.quantity&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:N.quantity.message})]},"quantity")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"quantity",children:"Due Date"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"date",id:"dueDate",name:"dueDate"},v("dueDate")),{},{min:1,step:1,max:e.maxQty,className:Z.Z.formBorder})),N.dueDate&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:N.dueDate.message})]},"quantity")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Service Description"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({as:"textarea",id:"itemName",name:"itemName",defaultValue:""},v("itemName")),{},{className:Z.Z.formBorder})),N.itemName&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:N.itemName.message})]},"lineNo")}),(0,g.jsxs)(m.Z,{md:1,children:[" ",(0,g.jsx)("a",{children:(0,g.jsx)(x.qVg,{size:38,className:Z.Z.btnextra,onClick:b((function(t){t.gst=18,t.materialRequestId=(1e4*Math.random()).toFixed(0),t.material={materialName:t.itemName},t.requests=1,t.isRequest="No",t.requestItems=[],t.poQty=t.quantity,t.uom="Nos",t.specs="",t.amount=t.unitPrice*t.quantity,t.gstAmt=(t.unitPrice*t.poQty*.01*t.gst).toFixed(2),e.savePo(t,"add"),console.log(t),C()})),hover:!0})})]})]})})},j=r(23118),v=r(23853),b=function(e,t,r){return[{title:"Item Name",align:"center",render:function(e){return(0,g.jsx)(g.Fragment,{children:""===e.specs?(0,g.jsx)("span",{children:e.itemName}):(0,g.jsxs)("span",{children:[e.itemName,"(",e.specs,")"]})})}},{title:"Specs",align:"center",render:function(t){return(0,g.jsx)(v.vPQ,{style:{cursor:"pointer"},onClick:e(t,"EditEntry")})}},{title:"Due Date",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.dueDate})}},{title:"Unit Price",align:"center",render:function(e){var r="unitPrice".concat(e.purchaseRequestId);return(0,g.jsx)(d.Z.Group,{children:(0,g.jsx)(d.Z.Control,{type:"text",id:r,name:r,defaultValue:e.unitPrice,onBlur:function(r){return t("unitPrice",r.target.value,e)}})},"producedQty")}},{title:"Quantity",align:"center",render:function(r){var n="qty".concat(r.purchaseRequestId);return(0,g.jsx)("span",{children:1==r.requests?(0,g.jsx)(d.Z.Group,{children:(0,g.jsx)(d.Z.Control,{type:"text",id:n,name:n,defaultValue:r.poQty,onBlur:function(e){return t("qty",e.target.value,r)}})},"producedQty"):(0,g.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,"FurnanceForm"),children:r.poQty})})}},{title:"Uom",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.uom})}},{title:"Gst Perc",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.gst})}},{title:"Gst",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.gstAmt})}},{title:"Amount",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.amount})}},{title:"Remove",align:"center",render:function(t){return(0,g.jsx)(v.Ybf,{style:{cursor:"pointer"},onClick:e(t,"delete")})}}]};var N=function(e){var t=(0,i.useState)(),r=(0,l.Z)(t,2),a=r[0],o=(r[1],(0,p.cI)({defaultValues:(0,n.Z)({},a)})),c=o.register,x=(o.handleSubmit,o.formState.errors),f=o.watch,y=(o.setError,o.clearErrors,o.setValue,o.reset),j=f(["roundOff","notes"]),v=(0,i.useState)({roundOff:"0",notes:""}),b=(0,l.Z)(v,2);return b[0],b[1],(0,i.useEffect)((function(){e.saveValues(j)}),(0,s.Z)(j)),(0,i.useEffect)((function(){y(e.defaultValues)}),[e.defaultValues]),(0,g.jsx)(d.Z,{className:Z.Z.formcon,children:(0,g.jsxs)(u.Z,{style:{backgroundColor:h.Z.colors.dg,borderRadius:"1em",padding:".5rem 1rem"},children:[(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"CGst Amount"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"cGst",name:"cGst",defaultValue:(e.gstAmt/2).toFixed(2)},c("cGst")),{},{className:Z.Z.formBorder})),x.cGst&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.cGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"SGst Amount"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"sGst",name:"sGst",defaultValue:(e.gstAmt/2).toFixed(2)},c("sGst")),{},{className:Z.Z.formBorder})),x.sGst&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.sGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"IGst Amount"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"iGst",name:"iGst",defaultValue:e.igstAmt.toFixed(2)},c("iGst")),{},{className:Z.Z.formBorder})),x.iGst&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.iGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Total Gst"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"totalGst",name:"totalGst",defaultValue:Number(e.gstAmt+e.igstAmt).toFixed(2)},c("totalGst")),{},{className:Z.Z.formBorder})),x.totalGst&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.totalGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Gross Amount"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"grossAmt",name:"grossAmt",defaultValue:e.gross},c("grossAmt")),{},{className:Z.Z.formBorder})),x.grossAmt&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.grossAmt.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Net Amount"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"netAmt",name:"netAmt",defaultValue:(e.gstAmt+e.gross).toFixed(2)},c("netAmt")),{},{className:Z.Z.formBorder})),x.netAmt&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.netAmt.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Round-OFF Amt"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({type:"textarea",id:"roundOff",name:"roundOff",defaultValue:0},c("roundOff")),{},{className:Z.Z.formBorder})),x.roundOff&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.roundOff.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(d.Z.Group,{children:[(0,g.jsx)(d.Z.Label,{htmlFor:"lineNo",children:"Notes"}),(0,g.jsx)(d.Z.Control,(0,n.Z)((0,n.Z)({as:"textarea",id:"notes",name:"notes",defaultValue:""},c("notes")),{},{className:Z.Z.formBorder})),x.notes&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:x.notes.message})]},"lineNo")})]})})},C=r(99355),P=r(21229);var S=function(e){e.data&&e.data;var t=(0,i.useState)({}),r=(0,l.Z)(t,2),c=r[0],d=(r[1],(0,i.useState)(e.data?e.data:[])),u=(0,l.Z)(d,2),m=(u[0],u[1],(0,i.useState)()),p=(0,l.Z)(m,2),Z=(p[0],p[1],(0,i.useState)(e.materials)),x=(0,l.Z)(Z,2),f=x[0],h=x[1],v=(0,i.useState)({materialName:"",uom:""}),S=(0,l.Z)(v,2),F=S[0],D=S[1],q=(0,P.ZP)({data:[]}),A=(q.get,q.post),I=q.response,w=(q.loading,q.error,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,A(C.ZP+"/material/getById",{materialId:t});case 3:r=e.sent,I.ok?D((function(e){return(0,n.Z)({},r)})):D("Not Available"),console.log(F);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(C.ZP+"/material/loadOptionsByCategory",{category:t});case 2:r=e.sent,I.ok&&h([{value:"",label:"Select"}].concat((0,s.Z)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{style:{padding:"0 1.5rem"},children:[(0,g.jsx)(y,{loadMaterials:w,loadCatMaterials:G,loadedMaterial:F,materials:f,defaultValues:c,savePo:e.savePo,data:e.data}),(0,g.jsx)(j.Z,{data:e.data,cols:b((function(t,r){return function(){"delete"===r?e.handleEdit(r,"",t):e.showFormHandler(t,r)}}),e.handleEdit)}),(0,g.jsx)(N,{gstAmt:e.gstAmt,gross:e.gross,net:e.net,igstAmt:e.igstAmt,terms:e.terms,saveValues:e.finalSubmit})]})},F=r(95316),D=r(79747),q=function(e,t){return[{title:"Item Name",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.material.materialName})}},{title:"Request No",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.requestNo})}},{title:"Department",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.department})}},{title:"Request Person",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.user.userName})}},{title:"Quantity",align:"center",render:function(t){var r="qty".concat(t.materialQty);return(0,g.jsx)("span",{children:(0,g.jsx)(d.Z.Group,{children:(0,g.jsx)(d.Z.Control,{type:"text",id:r,name:r,defaultValue:t.poQty,onBlur:function(r){return e(r.target.value,t)}})},"producedQty")})}},{title:"Uom",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.material.uom})}},{title:"Gst Perc",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.material.gst})}}]},A=function(e){console.log(e.matReqs);var t=(0,i.useState)(),r=(0,l.Z)(t,2);r[0],r[1];return(0,g.jsx)(D.Z,{children:(0,g.jsx)(j.Z,{data:e.matReqs,cols:q((function(t,r){e.handleEditRequests("QuantityEdit",t,r,e.rowData)}),e.isDefault)})})},I=r(2144);function w(e,t){t.errors,t.setError,t.clearErrors;e[0]>0&&console.log(e[0])}var G=function(e){return(0,g.jsx)(I.Z,{children:(0,g.jsx)(c.Z,{template:{heading:"Edit Specifications",fields:[{title:"Edit Specs",type:"text",name:"specs",contains:"text",inpprops:{}}]},rowwise:2,validate:w,onSubmit:function(t){e.handleEditRequests("SpecsEdit",t.specs,"",e.rowData)},onCancel:e.onCancel,defaultValues:e.rowData,buttonName:"Save"})})},R=r(50654),k={upper:{padding:"0"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0 1rem 0 1rem",backgroundColor:h.Z.colors.dg,borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:h.Z.colors.ttle}};var B=function(e){var t=(0,P.ZP)({data:[]}),r=t.get,d=t.post,u=t.response,m=(t.loading,t.error,(0,i.useState)(e.reqNo)),p=(0,l.Z)(m,2),Z=p[0],x=(p[1],(0,i.useState)(0)),f=(0,l.Z)(x,2),h=f[0],y=f[1],j=(0,i.useState)(e.selectedItems?e.selectedItems:[]),v=(0,l.Z)(j,2),b=v[0],N=v[1],D=(0,i.useState)([]),q=(0,l.Z)(D,2),I=q[0],w=q[1],B=(0,i.useState)(e.selected?e.selected:{poNo:Z}),_=(0,l.Z)(B,2),E=_[0],Q=_[1],O=(0,i.useState)([{value:"",label:"Select"}]),V=(0,l.Z)(O,2),T=(V[0],V[1],(0,i.useState)([{value:"",label:"Select"}])),L=(0,l.Z)(T,2),M=L[0],H=L[1],U=(0,i.useState)(!1),z=(0,l.Z)(U,2),Y=z[0],J=z[1],K=(0,i.useState)(0),W=(0,l.Z)(K,2),X=W[0],$=W[1],ee=(0,i.useState)({roundOff:0,notes:""}),te=(0,l.Z)(ee,2),re=te[0],ne=te[1],ae=(0,i.useState)([{value:"",label:"Select"}]),se=(0,l.Z)(ae,2),oe=se[0],le=se[1],ie=(0,i.useState)({showForm:!1,selectedForm:(0,g.jsx)(g.Fragment,{}),selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),ce=(0,l.Z)(ie,2),de=ce[0],ue=ce[1],me=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(C.ZP+"/matrialPrItems/multipleRequests",{ids:t});case 2:if(n=e.sent,u.ok){for(o=0;o<n.length;o++)n[o].poQty=r.requestQty[o];w((function(e){return(0,s.Z)(n)})),w((function(e){return console.log(e),e})),console.log(I)}case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),pe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"QuantityEdit"===t?(n.poQty=r,console.log(I),w((function(e){return e.map((function(e){return e.materialRequestId===n.materialRequestId?n:e}))})),console.log(I),s.requestQty[s.requestItems.findIndex((function(e){return e===n.materialRequestId}))]=r,s.poQty=s.requestQty.map((function(e){return e})).reduce((function(e,t){return Number(e)+Number(t)})),s.amount=s.unitPrice*s.poQty,s.gstAmt=(s.unitPrice*s.poQty*.01*s.gst).toFixed(2),Ae("update",s)):"SpecsEdit"===t&&(s.specs=r,Ae("SpecsEdit",s));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),Ze=function(){ue((0,n.Z)((0,n.Z)({},de),{},{showForm:!1,selectedForm:"",selectedItem:(0,n.Z)((0,n.Z)({},de.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))},xe=(0,i.useState)(b.length>0?b.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)})):0),fe=(0,l.Z)(xe,2),he=fe[0],ge=fe[1],ye=(0,i.useState)(b.length>0?b.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)})):0),je=(0,l.Z)(ye,2),ve=je[0],be=je[1],Ne=(0,i.useState)(he+ve),Ce=(0,l.Z)(Ne,2),Pe=Ce[0],Se=Ce[1],Fe=(0,i.useContext)(R.Z).userId,De=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(C.ZP+"/material/loadOptions");case 2:return t=e.sent,e.next=5,r(C.ZP+"/terms/loadOptions");case 5:n=e.sent,le([].concat((0,s.Z)(oe),(0,s.Z)(t))),H([].concat((0,s.Z)(M),(0,s.Z)(n)));case 8:case"end":return e.stop()}}),e)}))),[r,u]);(0,i.useEffect)((function(){De()}),[]);var qe={heading:"PO Entry",fields:[{title:"PO Date",type:"date",name:"poDate",contains:"date",validationProps:"Po Date is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Company",type:"select",name:"companyId",contains:"Select",options:e.company},{title:"PO Number",type:"disabled",name:"poNo",contains:"text",validationProps:"Po No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Supplier",type:"select",name:"supplierId",contains:"Select",options:e.suppliers},{title:"Delivery Address",type:"textarea",name:"deliveryAddress",contains:"textarea",validationProps:"Delivery Address is required",inpprops:{md:4}},{title:"Payment Terms",type:"select",name:"paymentTerms",validationProps:"Please select Payment Terms",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Advance_Payment",label:"Advance Payment"},{value:"LC",label:"LC"},{value:"CAD",label:"CAD"},{value:"Immediate_After_Delivery",label:"Immediate After Delivery"},{value:"Seven_Days_Credit_From_Dod",label:"7 Days Credit From DOD"},{value:"Fifteen_Days_Credit_From_Dod",label:"15 Days Credit From DOD"},{value:"Thirty_Days_Credit_From_Dod",label:"30 Days Credit From DOD"},{value:"FourtyFive_Days_Credit_From_Dod",label:"45 Days Credit From DOD"},{value:"Ninety_Days_Credit_From_Dod",label:"90 Days Credit From DOD"}]},{title:"Payment Remarks",type:"textarea",name:"paymentRemarks",contains:"textarea",validationProps:"Delivery Address is required",inpprops:{md:4}},{title:"Delivery Terms",type:"select",name:"deliveryTerms",validationProps:"Please select Delivery Terms",contains:"Select",options:[{value:"Select",label:"Select"},{value:"DAP",label:"DAP"},{value:"Ex_works",label:"Ex Works"},{value:"CIF",label:"CIF"},{value:"C_And_F",label:"C&F"},{value:"FOB",label:"FOB"},{value:"DDP",label:"DDP"},{value:"DDU",label:"DDU"}]},{type:"hidden",name:"userId",contains:"hidden",value:Fe},{type:"hidden",name:"poType",contains:"hidden",value:"Service_Purchase_Order"},{type:"hidden",name:"termsAndConId",contains:"hidden",value:"1"}]},Ae=function(e,t){"update"===e?(N((function(e){return e.map((function(e){return e.materialRequestId===t.materialRequestId?t:e}))})),0==X?ge(b.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)}))):$(b.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)}))),be(b.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}))),Se((he+ve+X).toFixed(2))):"SpecsEdit"===e?N((function(e){return e.map((function(e){return e.materialRequestId===t.materialRequestId?t:e}))})):"delete"===e&&(console.log("delete"),console.log(t),N((function(e){return e.filter((function(e){return e.materialRequestId!==t.materialRequestId}))})),console.log(b))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(F.Z,{size:"xl",show:de.showForm,onHide:Ze,children:[(0,g.jsx)(F.Z.Header,{closeButton:!0,children:(0,g.jsx)(F.Z.Title,{style:{textAlign:"center"},children:"Enter Po Details"})}),(0,g.jsx)(F.Z.Body,{children:de.selectedForm})]}),(0,g.jsx)(c.Z,{template:qe,rowwise:3,watchFields:["supplierId","companyId"],validate:function(e,t){var r;t.errors,t.setError,t.clearErrors,console.log("logged"),""!=e[0]&&e[0]?(console.log(e[0]),(r=e[0],(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading Products"),e.next=3,d(C.ZP+"/supplier/getById",{supplierId:r,random:Math.random()});case 3:t=e.sent,console.log(t),33!=(null===t||void 0===t?void 0:t.stateId)?(0==X&&1==Y&&($(he),ge(0)),J(!0)):X>0&&(ge(X),$(0));case 6:case"end":return e.stop()}}),e)}))))()):void 0!=e[1]&&Number(e[1])!=h&&(console.log(e[1]),y(Number(e[1])),function(e){return(0,o.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading Products"),t.next=3,d(C.ZP+"/company/getById",{companyId:e,random:Math.random()});case 3:r=t.sent,console.log(r),Q((function(e){return(0,n.Z)((0,n.Z)({},E),{},{deliveryAddress:r.companyAddress,poNo:"SPO-".concat(r.prefixName).concat(Z)})}));case 6:case"end":return t.stop()}}),t)})))}(e[1])())},onSubmit:function(t){t.poItems=b,t.termsAndConId=re.termsAndConId,t.roundOff=re.roundOff,t.notes=re.notes,t.grossAmt=ve,t.netAmt=ve+he,t.gstAmt=he,t.iGst=X,t.cGst=he/2,t.sGst=he/2,t.totalGst=he+X,console.log(t),e.saveFunction(t)},onCancel:e.onCancel,defaultValues:E,buttonName:"Submit",styles:k,btButtons:(0,g.jsx)(S,{finalSubmit:function(e){ne((0,n.Z)((0,n.Z)({},re),{},{roundOff:e[0],notes:e[2]})),console.log(re)},gstAmt:he,gross:ve,net:Pe,igstAmt:X,showFormHandler:function(e,t){if("FurnanceForm"==t){me(e.requestItems,e);var r={showForm:!0,selectedForm:(0,g.jsx)(A,{handleEditRequests:pe,matReqs:(0,s.Z)(I),rowData:e,onCancel:Ze}),selectedItem:(0,n.Z)({},e)};ue((0,n.Z)((0,n.Z)({},de),r))}else if("EditEntry"==t){var a={showForm:!0,selectedForm:(0,g.jsx)(G,{handleEditRequests:pe,rowData:e,onCancel:Ze}),selectedItem:(0,n.Z)({},e)};ue((0,n.Z)((0,n.Z)({},de),a))}},hideFormHandler:Ze,handleEdit:function(e,t,r){"unitPrice"===e?(console.log(r),r.unitPrice=t,r.amount=t*r.poQty,r.gstAmt=(t*r.poQty*.01*r.gst).toFixed(2),Ae("update",r)):"qty"===e?(r.poQty=t,r.amount=r.unitPrice*r.poQty,r.gstAmt=(r.unitPrice*r.poQty*.01*r.gst).toFixed(2),Ae("update",r)):Ae(e,r)},materials:oe,terms:M,data:b,savePo:function(e,t){"add"===t?(e.isRequest="No",N((function(t){return[].concat((0,s.Z)(t),[e])})),be(ve+e.amount),Y?($(Number(X)+Number(e.gstAmt)),Se(X+ve)):(ge(Number(he)+Number(e.gstAmt)),Se(he+ve))):(console.log((0,n.Z)({},e)),N(b.filter((function(t){return t.materialRequestId!==e.materialRequestId}))))},updateItems:Ae})})]})}}}]);
//# sourceMappingURL=400.f334638f.chunk.js.map