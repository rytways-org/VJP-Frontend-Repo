"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[378],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(1413),a=n(70885),s=n(4942),o=n(72791),i={tableBody:"table_tableBody__NaJhZ"},l=n(89743),c=n(2677),d=n(89983),u=(n(77632),n(79836)),p=n(53382),m=n(68745),f=n(90618),h=n(39281),y=n(65136),g=n(35855),x=n(35527),Z=n(56890),v=n(40724),j=n(80184),b=function(e){var t=e.value,n=e.onChange;return(0,j.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return n(e.target.value)}})},S=(0,v.ZP)(m.Z)((function(e){var t,n=e.theme;return t={},(0,s.Z)(t,"&.".concat(f.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:n.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(f.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),k=(0,v.ZP)(g.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),w=function(e){var t=e.cols,n=e.data,s=e.rows,m=(e.loadDataonPageChange,e.counts,e.className),f=e.includeCheck,v=e.checkBoxEvent,w=e.value,C=e.onChange,V=e.styles,Q=o.useState(0),E=(0,a.Z)(Q,2),N=E[0],P=E[1],I=o.useState(s||10),D=(0,a.Z)(I,2),R=D[0],M=D[1],A=o.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),F=(0,a.Z)(A,2),_=F[0],T=(F[1],N>0&&Math.max(0,(1+N)*R-n.length),"undefined"===typeof V?{}:V),q="center";return(0,j.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,j.jsx)(l.Z,{className:"".concat(i.tableContainer," ").concat(m),style:(0,r.Z)((0,r.Z)({},null===T||void 0===T?void 0:T.tablehead),null!==T&&void 0!==T&&T.tablehead?{}:{background:"transparent"}),children:(0,j.jsx)(x.Z,{className:i.tableContainer,children:(0,j.jsxs)(h.Z,{className:i.tableStyles,children:[(0,j.jsxs)(l.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==w&&C&&(0,j.jsx)(c.Z,{children:(0,j.jsx)(b,{value:w,onChange:C})}),(0,j.jsx)(c.Z,{children:s&&(0,j.jsx)(y.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:_,component:"div",count:n.length,rowsPerPage:R,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:N,onPageChange:function(e,t){P(t)},onRowsPerPageChange:function(e){M(+e.target.value),P(0)},className:i.pagination})})]}),(0,j.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},null===T||void 0===T?void 0:T.table),null!==T&&void 0!==T&&T.table?{}:{background:"transparent"}),className:i.tableBody,children:[(0,j.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(i.table),children:[(0,j.jsxs)(Z.Z,{children:["                ",(0,j.jsxs)(g.Z,{children:[f&&(0,j.jsx)(S,{align:q,children:(0,j.jsx)("input",{type:"checkbox"})}),(0,j.jsx)(S,{align:q,children:"S.No"}),t.map((function(e,t){return(0,j.jsx)(S,{align:q,children:e.title},t)}))]})]}),n&&(0,j.jsx)(p.Z,{children:n.slice(N*R,N*R+R).map((function(e,n){return(0,j.jsxs)(k,{children:[f&&(0,j.jsx)(S,{align:q,children:(0,j.jsx)("input",{type:"checkbox",onClick:function(t){v(e,t.target.checked)}})}),(0,j.jsx)(S,{children:N*R+n+1}),t.map((function(t,n){return(0,j.jsx)(S,{align:t.align,className:t.hover&&i.hoverclass,children:t.render(e)},n)}))]},n++)}))})]})," "]})]})})})})};w.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var C=w},46844:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(1413),a=(n(72791),n(38595),n(2144)),s=n(89743),o=n(2677),i=n(43360),l="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",p=n(80184);var m=function(e,t){var n="undefined"===typeof e.styles?{}:e.styles;return(0,p.jsxs)(a.Z,{className:l,style:(0,r.Z)((0,r.Z)({},n.search),n.search?{}:{background:"transparent"}),children:[(0,p.jsx)(a.Z.Header,{className:c,children:(0,p.jsxs)(s.Z,{children:[(0,p.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,p.jsx)("h4",{children:e.title})}),(0,p.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,p.jsx)(i.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,p.jsx)(a.Z.Body,{className:d,children:e.children})]})}},41378:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(1413),a=n(74165),s=n(42982),o=n(15861),i=n(70885),l=n(72791),c=n(60057),d=n(46844),u=(n(78431),{container:"productionentry_container__6kvO6",btn:"productionentry_btn__c0qWj"}),p=[{id:1,productName:"R1234567",cusName:"ISRO",quantity:"98",status:"Approved",rQty:"0",reQty:"0",vName:"Heights Casts"},{id:5,productName:"DF34567QE",cusName:"DRDO",quantity:"12",status:"Approved",rQty:"0",reQty:"0",vName:"Vinayaga Welding"},{id:2,productName:"RQ234567",cusName:"BHEL",quantity:"121",status:"Approved",rQty:"80",reQty:"12",vName:"Sri Krishna Casters"},{id:6,productName:"DRT32435543",cusName:"DRDO",quantity:"400",status:"Approved",rQty:"0",reQty:"230",vName:"Brothers Welding"},{id:6,productName:"DRT5543",cusName:"DRD",quantity:"400",status:"Po Generated",rQty:"0",reQty:"230",vName:"Bro Welding"}],m=n(23118),f=n(79747),h=n(80184),y=function(e,t){return[{title:"Product Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.productName})}},{title:"Customer Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.cusName})}},{title:"Vendor Name",align:"left",render:function(e){return(0,h.jsx)("span",{children:e.vName})}},{title:"Req Qty",align:"left",render:function(e){return(0,h.jsx)("span",{children:e.quantity})}},{title:"Approved Qty",align:"left",render:function(e){return(0,h.jsx)("span",{children:e.rQty})}},{title:"Status",align:"left",render:function(n){return(0,h.jsxs)(h.Fragment,{children:[" ",["Approved","Awaiting_Approval"].includes("".concat(n.status))?(0,h.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(n,t[0]),children:n.status}):(0,h.jsx)("span",{children:n.status})]})}}]};function g(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var x=function(e){return(0,h.jsx)(c.Z,{template:{heading:"Update Approval Status",fields:[{title:"Date",type:"date",name:"approvalDate",contains:"date",validation:"Date is Required",inpprops:{format:"mm/yy"}},{title:"Quantity",type:"number",name:"approvedQty",contains:"number",validation:"Quantity is Required",inpprops:{min:1,step:1}},{title:"JO Status",type:"select",name:"joStatus",contains:"Select",validationProps:"Please Select Job Order status",options:[{value:"",label:"Select"},{value:"Approved",label:"Approve"},{value:"Rejected",label:"Reject"}]}]},rowwise:4,validate:g,onSubmit:function(t){console.log(t),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Save",defaultValues:e.selected})},Z={upper:{margin:"0rem",padding:"0rem"},upperRow:{margin:"0rem",padding:"0.5rem 1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:n(21216).Z.colors.ttle}};function v(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var j=function(e){return(0,h.jsx)(c.Z,{template:{heading:"Enter Job Order PO Details",fields:[{title:"Date",type:"date",name:"poDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yyyy"}},{title:"Po Number",type:"text",name:"poEntry",contains:"text",inpprops:{minlength:0,maxlength:30}}]},rowwise:4,validate:v,onSubmit:function(t){console.log(t),t.joStatus="PO_Genereted",e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Save",defaultValues:e.selected,styles:Z})},b=n(99355),S=n(59434),k=n(21229),w=n(4349),C=n(23853),V=function(e,t){return[{title:"Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.entryDate})}},{title:"Dc No",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.dcNo})}},{title:"Vechicle Details",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.vechicleDetails})}},{title:"Quantity",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.quantity})}},{title:"Remarks",align:"left",render:function(e){return(0,h.jsx)("span",{children:e.remarks})}},{title:"Edit",align:"center",render:function(t){return(0,h.jsx)(C.vPQ,{style:{cursor:"pointer"},onClick:e(t)})}}]},Q=n(2144),E=n(89743),N=n(2677);function P(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var I=function(e){var t=(0,S.I0)(),n=(0,S.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),d=(0,i.Z)(n,3),p=d[0],y=(d[1],d[2],(0,l.useState)(e.selected.approvedQty-e.selected.sentQty)),g=(0,i.Z)(y,2),x=g[0],Z=g[1],v=(0,l.useState)({stock:0,produced:0}),j=(0,i.Z)(v,2),C=j[0],I=j[1],D=(0,k.ZP)({data:[]}),R=(D.get,D.post),M=D.response,A=(D.loading,D.error,(0,l.useState)([])),F=(0,i.Z)(A,2),_=F[0],T=F[1],q=(0,l.useState)(Math.random()),B=(0,i.Z)(q,2),H=B[0],O=B[1],J=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var r,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.joTransId?"/joTrans/update":"/joTrans/create",console.log(r),t.next=4,R(b.ZP+r,n);case 4:1==(o=t.sent).retValues.status?n.joTransId?(T(_.map((function(e){return e.joTransId===o.retValues.order.joTransId?o.retValues.order:e}))),W(o.retValues.message,"success"),O(Math.random()),e.changeLoadState(),console.log(H)):o.retValues.order.joTransId>0&&(T([o.retValues.order].concat((0,s.Z)(_))),T([].concat((0,s.Z)(o.retValues.order),(0,s.Z)(_))),W(o.retValues.message,"success"),O(Math.random()),e.changeLoadState(),console.log(H)):W(o.retValues.message,"danger");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(b.ZP+"/joTrans/listJoTrans",{jOrder:e.selected,loadStateid:Date().toString()});case 2:n=t.sent,console.log((0,r.Z)({},n)),M.ok&&(T(n.retValues.latestEntries),I((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:n.retValues.prodStock.stockQuantity})})),n.retValues.prodStock.stockQuantity<x&&Z(n.retValues.prodStock.stockQuantity));case 5:case"end":return t.stop()}}),t)}))),[R,M,H]);(0,l.useEffect)((function(){L()}),[L]);var Y=(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Q.Z,{body:!0,className:u.title,children:(0,h.jsxs)(E.Z,{children:[(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"left",borderRadius:"5%"},md:2,children:["Available Qty ",(0,h.jsx)("br",{})," ",C.stock]}),(0,h.jsxs)(N.Z,{md:{span:6,offset:1},children:[" ",(0,h.jsx)("h4",{})," "]}),(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"right",borderRadius:"5%"},md:{span:2,offset:1},children:["Received Qty",(0,h.jsx)("br",{})," ",e.selected.sentQty]})]})})}),W=function(e,n){t(w.I.showAlertHandler({showAlert:!p,alertMessage:e,alertVariant:n}))},z=(0,l.useState)(),G=(0,i.Z)(z,2),K=G[0],U=G[1],X={heading:"Enter Outward Details",fields:[{title:"Date",type:"date",name:"entryDate",contains:"date",validation:"Date is Required",inpprops:{format:"mm/yy"}},{title:"Dc No",type:"text",name:"dcNo",contains:"text",validationProps:"Vechicle No is required",inpprops:{minlength:8,maxlength:80}},{title:"Vechicle Details",type:"text",name:"vechicleDetails",contains:"text",validationProps:"Vechicle No is required",inpprops:{minlength:8,maxlength:80}},{title:"Quantity",type:"number",name:"quantity",contains:"number",validationProps:"Target Days is required",inpprops:{min:1,max:x}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}},{type:"hidden",name:"joId",value:e.selected.joId,inpprops:{maxlength:128,md:6}},{type:"hidden",name:"isOutwardEntry",value:"Yes",inpprops:{maxlength:128,md:6}}]};return(0,h.jsxs)(h.Fragment,{children:[Y,(0,h.jsx)(c.Z,{template:X,rowwise:2,validate:P,onSubmit:function(e){console.log(e),J(e)},onCancel:e.onCancel,buttonName:"Save",defaultValues:K}),(0,h.jsx)(f.Z,{md:12,children:(0,h.jsx)(m.Z,{cols:V((function(e,t){return function(){"edit"===t&&U((0,r.Z)({},e))}})),data:_,striped:!0})})]})},D=function(e,t){return[{title:"Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.entryDate})}},{title:"Dc No",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.dcNo})}},{title:"Vechicle Details",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.vechicleDetails})}},{title:"Quantity",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.quantity})}},{title:"Remarks",align:"left",render:function(e){return(0,h.jsx)("span",{children:e.remarks})}},{title:"Edit",align:"center",render:function(t){return(0,h.jsx)(C.vPQ,{style:{cursor:"pointer"},onClick:e(t,"edit")})}}]};function R(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var M=function(e){var t=(0,l.useState)(),n=(0,i.Z)(t,2),d=n[0],p=n[1],y=(0,S.I0)(),g=(0,S.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),x=(0,i.Z)(g,3),Z=x[0],v=(x[1],x[2],(0,l.useState)({stock:0,produced:0})),j=(0,i.Z)(v,2),C=(j[0],j[1]),V=(0,l.useState)(e.selected.sentQty-e.selected.receivedQty),P=(0,i.Z)(V,2),I=P[0],M=(P[1],(0,k.ZP)({data:[]})),A=(M.get,M.post),F=M.response,_=(M.loading,M.error,(0,l.useState)([])),T=(0,i.Z)(_,2),q=T[0],B=T[1],H=(0,l.useState)(Math.random()),O=(0,i.Z)(H,2),J=O[0],L=O[1],Y=function(e,t){y(w.I.showAlertHandler({showAlert:!Z,alertMessage:e,alertVariant:t}))},W=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.joTransId?"/joTrans/update":"/joTrans/create",e.next=3,A(b.ZP+n,t);case 3:r=e.sent,console.log(r),1==r.retValues.status?t.joTransId?(B(q.map((function(e){return e.joTransId===r.retValues.order.joTransId?r.retValues.order:e}))),Y(r.retValues.message,"success"),L(Math.random()),console.log(J)):r.retValues.order.joTransId>0&&(B([r.retValues.order].concat((0,s.Z)(q))),Y(r.retValues.message,"success"),L(Math.random()),console.log(J)):Y(r.retValues.message,"danger");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.selected.joId),t.next=3,A(b.ZP+"/joTrans/listJoTransInwards",{jOrder:e.selected,loadStateid:Date().toString()});case 3:n=t.sent,console.log((0,r.Z)({},n)),F.ok&&(B(n.retValues.latestEntries),C((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:n.retValues.prodStock.joStockQuantity})})));case 6:case"end":return t.stop()}}),t)}))),[A,F,J]);(0,l.useEffect)((function(){z()}),[z]);var G=(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Q.Z,{body:!0,className:u.title,children:(0,h.jsxs)(E.Z,{children:[(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"left",borderRadius:"5%"},md:2,children:["Received Qty ",(0,h.jsx)("br",{})," ",e.selected.receivedQty]}),(0,h.jsxs)(N.Z,{md:{span:6,offset:1},children:[" ",(0,h.jsx)("h4",{})," "]}),(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"right",borderRadius:"5%"},md:{span:2,offset:1},children:["Sent Qty",(0,h.jsx)("br",{})," ",e.selected.sentQty]})]})})}),K={heading:"Enter Return Details",fields:[{title:"Date",type:"date",name:"entryDate",contains:"date",inpprops:{format:"dd/mm/yyyy"}},{title:"Vechicle Details",type:"text",name:"vechicleDetails",contains:"text",validationProps:"Vechicle No is required",inpprops:{minlength:8,maxlength:80}},{title:"Received Qty",type:"number",name:"quantity",contains:"number",inpprops:{min:1,step:1,max:I}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}},{type:"hidden",name:"joId",value:e.selected.joId,inpprops:{maxlength:128,md:6}},{type:"hidden",name:"isOutwardEntry",value:"No",inpprops:{maxlength:128,md:6}}]};return(0,h.jsxs)("div",{children:[(0,h.jsxs)(Q.Z,{children:[G,(0,h.jsx)(c.Z,{template:K,rowwise:2,validate:R,onSubmit:function(e){console.log(e),W(e)},onCancel:e.onCancel,buttonName:"Add",defaultValues:d})]}),(0,h.jsx)(f.Z,{md:12,children:(0,h.jsx)(m.Z,{cols:D((function(e,t){return function(){"edit"===t&&p((0,r.Z)({},e))}})),data:q,striped:!0})})]})},A=function(e){return[{title:"Entry Date",align:"Center",render:function(e){return(0,h.jsx)("span",{children:e.entryDate})}},{title:"Shift",align:"Center",render:function(e){return(0,h.jsx)("span",{children:e.shift})}},{title:"Quantity Inspected",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.insQuantity})}},{title:"Rejected",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.rejectedQuantity})}},{title:"Rework",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.reworkQuantity})}},{title:"Remarks",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.remarks})}},{title:"Edit",align:"center",render:function(t){return(0,h.jsx)(C.vPQ,{style:{cursor:"pointer"},onClick:e(t,"edit")})}}]};function F(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var _=function(e){var t=(0,l.useState)(),n=(0,i.Z)(t,2),d=n[0],p=n[1],y=(0,S.I0)(),g=(0,S.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),x=(0,i.Z)(g,3),Z=x[0],v=(x[1],x[2],(0,l.useState)([{value:"",label:"Select"}])),j=(0,i.Z)(v,2),C=j[0],V=j[1],P=(0,l.useState)({stock:0,produced:0}),I=(0,i.Z)(P,2),D=I[0],R=I[1],M=(0,l.useState)(e.selected.receivedQty),_=(0,i.Z)(M,2),T=_[0],q=_[1],B=(0,k.ZP)({data:[]}),H=B.get,O=B.post,J=B.response,L=(B.loading,B.error,(0,l.useState)([])),Y=(0,i.Z)(L,2),W=Y[0],z=Y[1],G=(0,l.useState)(Math.random()),K=(0,i.Z)(G,2),U=K[0],X=K[1],$=function(e,t){y(w.I.showAlertHandler({showAlert:!Z,alertMessage:e,alertVariant:t}))},ee=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(b.ZP+"/defect/loadOptions");case 2:n=t.sent,V([].concat((0,s.Z)(C),(0,s.Z)(n))),console.log((0,r.Z)({},e.selectedItem));case 5:case"end":return t.stop()}}),t)}))),[H,J]);(0,l.useEffect)((function(){ee()}),[]);var te=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var o,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.insEntryId?"/inspectionEntry/updateJoInsEntry":"/inspectionEntry/createJoInsEntry",t.next=3,O(b.ZP+o,{entry:n,jOrder:e.selected});case 3:i=t.sent,console.log(i),1==i.retValues.status?n.insEntryId?(z(W.map((function(e){return e.insEntryId===i.retValues.insEntry.insEntryId?i.retValues.insEntry:e}))),R((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:T})})),$(i.retValues.message,"success"),X(Math.random()),console.log(U)):i.retValues.insEntry.insEntryId>0&&(z([i.retValues.insEntry].concat((0,s.Z)(W))),$(i.retValues.message,"success"),R((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:T})})),X(Math.random()),console.log(U)):$(i.retValues.message,"danger");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ne=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.selected.joId),t.next=3,O(b.ZP+"/inspectionEntry/listJoInsEntries",{jOrder:e.selected,loadStateid:Date().toString()});case 3:n=t.sent,console.log((0,r.Z)({},n)),J.ok&&(z(n.retValues.latestEntries),R((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:n.retValues.prodStock.joStockQuantity})})),n.retValues.prodStock.joStockQuantity<T&&q(n.retValues.prodStock.joStockQuantity));case 6:case"end":return t.stop()}}),t)}))),[O,J]);(0,l.useEffect)((function(){ne()}),[U]);var re=(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Q.Z,{body:!0,className:u.title,children:(0,h.jsxs)(E.Z,{children:[(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"left",borderRadius:"5%"},md:2,children:["Available Qty ",(0,h.jsx)("br",{})," ",D.stock]}),(0,h.jsxs)(N.Z,{md:{span:6,offset:1},children:[" ",(0,h.jsx)("h4",{})," "]}),(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"right",borderRadius:"5%"},md:{span:2,offset:1},children:["Received Qty",(0,h.jsx)("br",{})," ",e.selected.receivedQty]})]})})}),ae={heading:"Enter Inspection  Details",fields:[{title:"Date",type:"date",name:"entryDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"}},{title:"Shift",type:"select",name:"shift",validationProps:"Please select Shift",contains:"Select",options:[{value:"",label:"Select"},{value:"Shift_A",label:"Shift A"},{value:"Shift_B",label:"Shift B"},{value:"Shift_C",label:"Shift C"}]},{title:"Inspected Qty",type:"number",name:"insQuantity",contains:"number",inpprops:{min:1,step:1,max:T}},{title:"Rejected Qty",type:"number",name:"rejectedQuantity",contains:"number",inpprops:{min:0,step:1}},{title:"Rework Qty",type:"number",name:"reworkQuantity",contains:"number",inpprops:{min:0,step:1}},{title:"Defect Type",type:"select",name:"defectId",contains:"Select",options:C},{title:"Rejected Serial No",type:"textarea",name:"rejectedSerialNo",contains:"textarea",inpprops:{maxlength:128,md:6}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}},{type:"hidden",name:"joId",contains:"number",value:e.selected.joId},{type:"hidden",name:"orderId",contains:"number",value:e.selected.orderId},{type:"hidden",name:"prodProcMapId",contains:"number",value:e.selected.comingAfter}]};return(0,h.jsxs)("div",{children:[re,(0,h.jsx)(c.Z,{template:ae,rowwise:2,validate:F,onSubmit:function(e){console.log(e),te(e)},onCancel:e.onCancel,buttonName:"Add",defaultValues:d}),(0,h.jsx)(f.Z,{md:12,children:(0,h.jsx)(m.Z,{cols:A((function(e,t){return function(){"edit"===t&&p((0,r.Z)({},e))}}),[]),data:W,striped:!0})})]})},T={container:"productionentry_container__qXdoE",btn:"productionentry_btn__GhkWu"};var q=function(e){var t=(0,S.I0)(),n=(0,l.useState)({}),d=(0,i.Z)(n,2),u=(d[0],d[1],(0,S.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),p=(0,i.Z)(u,3),y=p[0],g=(p[1],p[2],(0,l.useState)([{value:"",label:"Select"}])),x=(0,i.Z)(g,2),Z=x[0],v=x[1],j=(0,k.ZP)({data:[]}),C=j.get,V=j.post,P=j.response,I=(j.loading,j.error,(0,l.useState)()),D=(0,i.Z)(I,2),R=D[0],M=D[1],F=(0,l.useState)(Math.random()),_=(0,i.Z)(F,2),q=_[0],B=_[1],H=(0,l.useState)({stock:0,produced:0}),O=(0,i.Z)(H,2),J=O[0],L=O[1],Y=(0,l.useState)(e.selected.reworkQty),W=(0,i.Z)(Y,2),z=W[0],G=W[1],K=function(e,n){t(w.I.showAlertHandler({showAlert:!y,alertMessage:e,alertVariant:n}))},U=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(b.ZP+"/inspectionEntry/listJoRwInsEntries",{jOrder:e.selected,loadid:q});case 2:n=t.sent,console.log(n),P.ok&&n.retValues.latestEntries&&M(n.retValues.latestEntries),L((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:n.retValues.prodStock.rwExtQuantity,produced:n.retValues.prodStock._producedQuantity})})),G(n.retValues.prodStock.rwExtQuantity);case 7:case"end":return t.stop()}}),t)}))),[V,P,q]),X=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(b.ZP+"/defect/loadOptions");case 2:n=t.sent,v([].concat((0,s.Z)(Z),(0,s.Z)(n))),console.log((0,r.Z)({},e.selectedItem));case 5:case"end":return t.stop()}}),t)}))),[C,P]);(0,l.useEffect)((function(){X()}),[]),(0,l.useEffect)((function(){U()}),[U]);var $=(0,l.useState)(),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],re=(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Q.Z,{body:!0,className:T.title,children:(0,h.jsxs)(E.Z,{children:[(0,h.jsxs)(N.Z,{style:{backgroundColor:"grey",justifyContent:"left",borderRadius:"5%"},md:2,children:["Available Rework Stock ",(0,h.jsx)("br",{})," ",J.stock]}),(0,h.jsxs)(N.Z,{md:{span:6,offset:1},children:[" ",(0,h.jsx)("h4",{})," "]})]})})}),ae=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var o,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.insEntryId?"/inpspectionEntry/updateJoReworkInsEntry":"/inspectionEntry/createJoReworkInsEntry",console.log(o),t.next=4,V(b.ZP+o,{entry:n,jOrder:e.selected});case 4:i=t.sent,console.log(i),1==i.retValues.status?n.insEntryId?(M(R.map((function(e){return e.insEntryId===i.retValues.insEntry.insEntryId?i.retValues.insEntry:e}))),G(z-n.insQuantity),L((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:z})})),K(i.retValues.message,"success"),B(Math.random())):i.retValues.insEntry.insEntryId>0&&(M([i.retValues.insEntry].concat((0,s.Z)(R))),K(i.retValues.message,"success"),G(z-n.insQuantity),L((function(e){return(0,r.Z)((0,r.Z)({},e),{},{stock:z})})),B(Math.random()),console.log(q)):K(i.retValues.message,"danger");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se={heading:"Jo Rework Entry",fields:[{title:"Date",type:"date",name:"entryDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"}},{title:"Shift",type:"select",name:"shift",validationProps:"Please select Shift",contains:"Select",options:[{value:"",label:"Select"},{value:"Shift_A",label:"Shift A"},{value:"Shift_B",label:"Shift B"},{value:"Shift_C",label:"Shift C"}]},{title:"Accepted Qty",type:"number",name:"acceptedQuantity",contains:"number",inpprops:{min:1,step:1}},{title:"Defect Type",type:"select",name:"defectId",contains:"Select",options:Z},{title:"Rejected Qty",type:"number",name:"rejectedQuantity",contains:"number",inpprops:{min:0,step:1}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}},{title:"Rejected Serial No Eg(2,3,5)",type:"textarea",name:"rejectedSerialNo",contains:"textarea",inpprops:{maxlength:128,md:12}},{type:"hidden",name:"orderId",contains:"number",value:e.selected.orderId},{type:"hidden",name:"prodProcMapId",contains:"number",value:e.selected.comingAfter},{type:"hidden",name:"joId",contains:"number",value:e.selected.joId},{type:"hidden",name:"lineInspection",contains:"number",value:"No"},{type:"hidden",name:"isReworkEntry",contains:"number",value:"Yes"},{type:"hidden",name:"insQuantity",contains:"number",value:0},{type:"hidden",name:"reworkQuantity",contains:"number",value:0}]};return(0,h.jsxs)(h.Fragment,{children:[re,(0,h.jsx)(c.Z,{template:se,watchFields:["acceptedQuantity","rejectedQuantity"],rowwise:2,validate:function(e,t){t.errors,t.setError,t.clearErrors,""!=e[0]&""!=e[1]&&Number(e[0])+Number(e[1])>z&&K("Sum of Accepted qty and Rejected Qty cannot exceed "+z,"danger")},onSubmit:function(e){console.log(e),e.insQuantity=Number(e.acceptedQuantity)+Number(e.rejectedQuantity),console.log(e),e.insQuantity>z?K("Sum of Accepted qty and Rejected Qty cannot exceed "+z+" cannot submit form","danger"):ae(e)},onCancel:e.onCancel,buttonName:"Save",defaultValues:te}),(0,h.jsx)(f.Z,{children:(0,h.jsx)(m.Z,{cols:A((function(e,t){return function(){"edit"===t&&(e.acceptedQuantity=e.insQuantity-e.rejectedQuantity,ne(e))}})),data:R})})]})},B=n(34476),H={fields:[{title:"Date",type:"date",name:"tensile",contains:"date",inpprops:{format:"dd/mm/yyyy"}},{title:"Name of Customer",type:"text",name:"MechanicalProperties",contains:"text",validationProps:"Customer Name is required",inpprops:{minlength:0,maxlength:30}},{title:"Product Name",type:"select",name:"InwardType",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Nozzles-123"},{value:0,label:"Propellor-123"}]},{title:"Vendor Name",type:"select",name:"InwardType",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Vinayaga Welding"},{value:0,label:"Sri Krishna Cutting"}]}]};function O(e){console.log(e)}function J(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var L=function(e){var t=(0,S.I0)(),n=(0,S.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),g=(0,i.Z)(n,3),Z=g[0],v=(g[1],g[2],(0,k.ZP)({data:[]})),C=(v.get,v.post),V=v.response,Q=(v.loading,v.error,(0,l.useState)([])),E=(0,i.Z)(Q,2),N=E[0],P=E[1],D=(0,l.useState)(Math.random()),R=(0,i.Z)(D,2),A=R[0],F=R[1],T=function(e){F(Math.random())},L=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r){var o,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.joId?"/jorder/update":"/jorder/create",console.log(o),n.next=4,C(b.ZP+o,r);case 4:i=n.sent,console.log(i),1==i.retValues.status?r.joId?(P(N.map((function(e){return e.joId===i.retValues.order.joId?i.retValues.order:e}))),t(B.n.hideModalHandler()),W(i.retValues.message,"success"),F(Math.random()),e.loadStateController()):i.retValues.order.joId>0&&(P([].concat((0,s.Z)(i.retValues.order),(0,s.Z)(N))),W(i.retValues.message,"success"),F(Math.random()),e.loadStateController()):(W(i.retValues.message,"danger"),Y());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Y=(0,l.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(b.ZP+"/jorder/listJorders",{loadStateid:Date().toString()});case 2:t=e.sent,V.ok&&P(t);case 4:case"end":return e.stop()}}),e)}))),[C,V,A]);(0,l.useEffect)((function(){Y()}),[Y]);var W=function(e,n){t(w.I.showAlertHandler({showAlert:!Z,alertMessage:e,alertVariant:n}))},z=(0,l.useState)((0,h.jsx)(h.Fragment,{})),G=(0,i.Z)(z,2),K=(G[0],G[1],function(e,n){return function(){"approvalForm"==n?t(B.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,h.jsx)(h.Fragment,{children:"Awaiting_Approval"=="".concat(e.joStatus)?(0,h.jsx)(x,{selected:e,saveFunction:L,changeLoadState:T,onCancel:function(){return t(B.n.hideModalHandler())},loadState:A,loadStateContoller:T}):(0,h.jsx)(j,{selected:e,saveFunction:L,changeLoadState:T,onCancel:function(){return t(B.n.hideModalHandler())},loadState:A,loadStateContoller:T})}),showModal:!0})):"outwardForm"==n?t(B.n.showModalHandler({selectedData:(0,r.Z)({},e),showModal:!0,selectedForm:(0,h.jsx)(I,{onCancel:function(){return t(B.n.hideModalHandler())},selected:e,saveFunction:L,changeLoadState:T,loadState:A,loadStateContoller:T})})):"returnForm"==n?t(B.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,h.jsx)(M,{onCancel:function(){return t(B.n.hideModalHandler())},selected:e,saveFunction:L,changeLoadState:T,loadState:A,loadStateContoller:T}),showModal:!0})):"inspectionForm"==n?t(B.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,h.jsx)(_,{onCancel:function(){return t(B.n.hideModalHandler())},selected:e,saveFunction:L,changeLoadState:T,loadState:A,loadStateContoller:T}),showModal:!0})):"reworkForm"==n&&t(B.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,h.jsx)(q,{onCancel:function(){return t(B.n.hideModalHandler())},selected:e,saveFunction:L,changeLoadState:T,loadState:A,loadStateContoller:T}),showModal:!0}))}});return(0,h.jsxs)("div",{className:u.container,children:[(0,h.jsx)(d.Z,{title:"Job Order Search",buttonName:"",onHeaderClick:K({},"orderForm"),bottonShow:!0,children:(0,h.jsx)(c.Z,{template:H,rowwise:4,validate:J,onSubmit:O,onCancel:e.onCancel,buttonName:"Search"})}),(0,h.jsx)(f.Z,{md:12,children:(0,h.jsx)(m.Z,{cols:y(K,["approvalForm","outwardForm","returnForm","inspectionForm","reworkForm"]),data:p,rows:10})})]})}}}]);
//# sourceMappingURL=378.e2441e78.chunk.js.map