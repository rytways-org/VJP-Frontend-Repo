"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[2496],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,n){n.d(t,{Z:function(){return F}});var r=n(1413),a=n(70885),s=n(4942),o=n(72791),l={tableBody:"table_tableBody__NaJhZ"},i=n(89743),c=n(2677),u=n(89983),d=(n(77632),n(79836)),m=n(53382),p=n(68745),Z=n(90618),x=n(39281),f=n(65136),h=n(35855),g=n(35527),y=n(56890),j=n(40724),v=n(80184),b=function(e){var t=e.value,n=e.onChange;return(0,v.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return n(e.target.value)}})},N=(0,j.ZP)(p.Z)((function(e){var t,n=e.theme;return t={},(0,s.Z)(t,"&.".concat(Z.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:n.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(Z.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),C=(0,j.ZP)(h.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),P=function(e){var t=e.cols,n=e.data,s=e.rows,p=(e.loadDataonPageChange,e.counts,e.className),Z=e.includeCheck,j=e.checkBoxEvent,P=e.value,F=e.onChange,S=e.styles,D=o.useState(0),q=(0,a.Z)(D,2),A=q[0],I=q[1],w=o.useState(s||10),G=(0,a.Z)(w,2),R=G[0],k=G[1],B=o.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),E=(0,a.Z)(B,2),Q=E[0],_=(E[1],A>0&&Math.max(0,(1+A)*R-n.length),"undefined"===typeof S?{}:S),O="center";return(0,v.jsx)(u.Pd.Provider,{value:{color:"#6495ED"},children:(0,v.jsx)(i.Z,{className:"".concat(l.tableContainer," ").concat(p),style:(0,r.Z)((0,r.Z)({},null===_||void 0===_?void 0:_.tablehead),null!==_&&void 0!==_&&_.tablehead?{}:{background:"transparent"}),children:(0,v.jsx)(g.Z,{className:l.tableContainer,children:(0,v.jsxs)(x.Z,{className:l.tableStyles,children:[(0,v.jsxs)(i.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==P&&F&&(0,v.jsx)(c.Z,{children:(0,v.jsx)(b,{value:P,onChange:F})}),(0,v.jsx)(c.Z,{children:s&&(0,v.jsx)(f.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:Q,component:"div",count:n.length,rowsPerPage:R,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:A,onPageChange:function(e,t){I(t)},onRowsPerPageChange:function(e){k(+e.target.value),I(0)},className:l.pagination})})]}),(0,v.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},null===_||void 0===_?void 0:_.table),null!==_&&void 0!==_&&_.table?{}:{background:"transparent"}),className:l.tableBody,children:[(0,v.jsxs)(d.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(l.table),children:[(0,v.jsxs)(y.Z,{children:["                ",(0,v.jsxs)(h.Z,{children:[Z&&(0,v.jsx)(N,{align:O,children:(0,v.jsx)("input",{type:"checkbox"})}),(0,v.jsx)(N,{align:O,children:"S.No"}),t.map((function(e,t){return(0,v.jsx)(N,{align:O,children:e.title},t)}))]})]}),n&&(0,v.jsx)(m.Z,{children:n.slice(A*R,A*R+R).map((function(e,n){return(0,v.jsxs)(C,{children:[Z&&(0,v.jsx)(N,{align:O,children:(0,v.jsx)("input",{type:"checkbox",onClick:function(t){j(e,t.target.checked)}})}),(0,v.jsx)(N,{children:A*R+n+1}),t.map((function(t,n){return(0,v.jsx)(N,{align:t.align,className:t.hover&&l.hoverclass,children:t.render(e)},n)}))]},n++)}))})]})," "]})]})})})})};P.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var F=P},22496:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var r=n(1413),a=n(74165),s=n(42982),o=n(15861),l=n(70885),i=n(72791),c=n(60057),u=(n(38595),n(30717)),d=n(89743),m=n(2677),p=n(61134),Z=n(97829),x=n(73728),f=(n(4349),n(59434)),h=n(21216),g=n(80184);var y=function(e){(0,f.I0)();var t=(0,i.useState)({}),n=(0,l.Z)(t,2),a=(n[0],n[1],(0,f.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),s=(0,l.Z)(a,3),o=(s[0],s[1],s[2],(0,i.useState)()),c=(0,l.Z)(o,2),y=c[0],j=(c[1],(0,p.cI)({defaultValues:(0,r.Z)({},y)})),v=j.register,b=j.handleSubmit,N=j.formState.errors,C=(j.watch,j.setError,j.clearErrors,j.setValue,j.reset);return(0,i.useEffect)((function(){C(e.defaultValues)}),[e.defaultValues]),(0,g.jsx)(u.Z,{className:Z.Z.formcon,children:(0,g.jsxs)(d.Z,{style:{backgroundColor:h.Z.colors.dgc,borderRadius:"1em",padding:".5rem 1rem"},children:[(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Unit Price"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"text",id:"unitPrice",name:"unitPrice"},v("unitPrice")),{},{className:Z.Z.formBorder})),N.unitPrice&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:N.unitPrice.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Cost Center"}),(0,g.jsxs)(u.Z.Select,(0,r.Z)((0,r.Z)({type:"text",id:"costCenter",name:"costCenter"},v("costCenter",{required:"Line No is Required"})),{},{className:Z.Z.formBorder,children:[(0,g.jsx)("option",{value:"0",children:"Select"}),(0,g.jsx)("option",{value:"1",children:"Cost Center 1"}),(0,g.jsx)("option",{value:"2",children:"Cost Center 2"}),(0,g.jsx)("option",{value:"3",children:"Cost Center 3"})]})),N.costCenter&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:N.costCenter.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"number",id:"quantity",name:"quantity"},v("quantity",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty,className:Z.Z.formBorder})),N.quantity&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:N.quantity.message})]},"quantity")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"quantity",children:"Due Date"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"date",id:"dueDate",name:"dueDate"},v("dueDate")),{},{min:1,step:1,max:e.maxQty,className:Z.Z.formBorder})),N.dueDate&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:N.dueDate.message})]},"quantity")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Service Description"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({as:"textarea",id:"itemName",name:"itemName",defaultValue:""},v("itemName")),{},{className:Z.Z.formBorder})),N.itemName&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:N.itemName.message})]},"lineNo")}),(0,g.jsxs)(m.Z,{md:1,children:[" ",(0,g.jsx)("a",{children:(0,g.jsx)(x.qVg,{size:38,className:Z.Z.btnextra,onClick:b((function(t){t.gst=18,t.materialRequestId=(1e4*Math.random()).toFixed(0),t.material={materialName:t.itemName},t.requests=1,t.isRequest="No",t.requestItems=[],t.poQty=t.quantity,t.uom="Nos",t.specs="",t.amount=t.unitPrice*t.quantity,t.gstAmt=(t.unitPrice*t.poQty*.01*t.gst).toFixed(2),e.savePo(t,"add"),console.log(t),C()})),hover:!0})})]})]})})},j=n(23118),v=n(23853),b=function(e,t,n){return[{title:"Item Name",align:"center",render:function(e){return(0,g.jsx)(g.Fragment,{children:""===e.specs?(0,g.jsx)("span",{children:e.itemName}):(0,g.jsxs)("span",{children:[e.itemName,"(",e.specs,")"]})})}},{title:"Specs",align:"center",render:function(t){return(0,g.jsx)(v.vPQ,{style:{cursor:"pointer"},onClick:e(t,"EditEntry")})}},{title:"Due Date",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.dueDate})}},{title:"Unit Price",align:"center",render:function(e){var n="unitPrice".concat(e.purchaseRequestId);return(0,g.jsx)(u.Z.Group,{children:(0,g.jsx)(u.Z.Control,{type:"text",id:n,name:n,defaultValue:e.unitPrice,onBlur:function(n){return t("unitPrice",n.target.value,e)}})},"producedQty")}},{title:"Quantity",align:"center",render:function(n){var r="qty".concat(n.purchaseRequestId);return(0,g.jsx)("span",{children:1==n.requests?(0,g.jsx)(u.Z.Group,{children:(0,g.jsx)(u.Z.Control,{type:"text",id:r,name:r,defaultValue:n.poQty,onBlur:function(e){return t("qty",e.target.value,n)}})},"producedQty"):(0,g.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(n,"FurnanceForm"),children:n.poQty})})}},{title:"Uom",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.uom})}},{title:"Gst Perc",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.gst})}},{title:"Gst",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.gstAmt})}},{title:"Amount",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.amount})}},{title:"Remove",align:"center",render:function(t){return(0,g.jsx)(v.Ybf,{style:{cursor:"pointer"},onClick:e(t,"delete")})}}]};var N=function(e){var t=(0,i.useState)(),n=(0,l.Z)(t,2),a=n[0],o=(n[1],(0,p.cI)({defaultValues:(0,r.Z)({},a)})),c=o.register,x=(o.handleSubmit,o.formState.errors),f=o.watch,y=(o.setError,o.clearErrors,o.setValue,o.reset),j=f(["roundOff","notes"]),v=(0,i.useState)({roundOff:"0",notes:""}),b=(0,l.Z)(v,2);return b[0],b[1],(0,i.useEffect)((function(){e.saveValues(j)}),(0,s.Z)(j)),(0,i.useEffect)((function(){y(e.defaultValues)}),[e.defaultValues]),(0,g.jsx)(u.Z,{className:Z.Z.formcon,children:(0,g.jsxs)(d.Z,{style:{backgroundColor:h.Z.colors.dg,borderRadius:"1em",padding:".5rem 1rem"},children:[(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"CGst Amount"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"cGst",name:"cGst",defaultValue:(e.gstAmt/2).toFixed(2)},c("cGst")),{},{className:Z.Z.formBorder})),x.cGst&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.cGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"SGst Amount"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"sGst",name:"sGst",defaultValue:(e.gstAmt/2).toFixed(2)},c("sGst")),{},{className:Z.Z.formBorder})),x.sGst&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.sGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"IGst Amount"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"iGst",name:"iGst",defaultValue:e.igstAmt.toFixed(2)},c("iGst")),{},{className:Z.Z.formBorder})),x.iGst&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.iGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Total Gst"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"totalGst",name:"totalGst",defaultValue:Number(e.gstAmt+e.igstAmt).toFixed(2)},c("totalGst")),{},{className:Z.Z.formBorder})),x.totalGst&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.totalGst.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Gross Amount"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"grossAmt",name:"grossAmt",defaultValue:e.gross},c("grossAmt")),{},{className:Z.Z.formBorder})),x.grossAmt&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.grossAmt.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Net Amount"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"netAmt",name:"netAmt",defaultValue:(e.gstAmt+e.gross).toFixed(2)},c("netAmt")),{},{className:Z.Z.formBorder})),x.netAmt&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.netAmt.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Round-OFF Amt"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({type:"textarea",id:"roundOff",name:"roundOff",defaultValue:0},c("roundOff")),{},{className:Z.Z.formBorder})),x.roundOff&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.roundOff.message})]},"lineNo")}),(0,g.jsx)(m.Z,{md:{span:3},children:(0,g.jsxs)(u.Z.Group,{children:[(0,g.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Notes"}),(0,g.jsx)(u.Z.Control,(0,r.Z)((0,r.Z)({as:"textarea",id:"notes",name:"notes",defaultValue:""},c("notes")),{},{className:Z.Z.formBorder})),x.notes&&(0,g.jsx)(u.Z.Text,{className:"text-danger",children:x.notes.message})]},"lineNo")})]})})},C=n(99355),P=n(21229);var F=function(e){e.data&&e.data;var t=(0,i.useState)({}),n=(0,l.Z)(t,2),c=n[0],u=(n[1],(0,i.useState)(e.data?e.data:[])),d=(0,l.Z)(u,2),m=(d[0],d[1],(0,i.useState)()),p=(0,l.Z)(m,2),Z=(p[0],p[1],(0,i.useState)(e.materials)),x=(0,l.Z)(Z,2),f=x[0],h=x[1],v=(0,i.useState)({materialName:"",uom:""}),F=(0,l.Z)(v,2),S=F[0],D=F[1],q=(0,P.ZP)({data:[]}),A=(q.get,q.post),I=q.response,w=(q.loading,q.error,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,A(C.ZP+"/material/getById",{materialId:t});case 3:n=e.sent,I.ok?D((function(e){return(0,r.Z)({},n)})):D("Not Available"),console.log(S);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(C.ZP+"/material/loadOptionsByCategory",{category:t});case 2:n=e.sent,I.ok&&h([{value:"",label:"Select"}].concat((0,s.Z)(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{style:{padding:"0 1.5rem"},children:[(0,g.jsx)(y,{loadMaterials:w,loadCatMaterials:G,loadedMaterial:S,materials:f,defaultValues:c,savePo:e.savePo,data:e.data}),(0,g.jsx)(j.Z,{data:e.data,cols:b((function(t,n){return function(){"delete"===n?e.handleEdit(n,"",t):e.showFormHandler(t,n)}}),e.handleEdit)}),(0,g.jsx)(N,{gstAmt:e.gstAmt,gross:e.gross,net:e.net,igstAmt:e.igstAmt,terms:e.terms,saveValues:e.finalSubmit})]})},S=n(95316),D=n(79747),q=function(e,t){return[{title:"Item Name",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.material.materialName})}},{title:"Request No",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.requestNo})}},{title:"Department",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.department})}},{title:"Request Person",align:"center",render:function(e){return(0,g.jsx)("span",{children:e.purchaseRequest.user.userName})}},{title:"Quantity",align:"center",render:function(t){var n="qty".concat(t.materialQty);return(0,g.jsx)("span",{children:(0,g.jsx)(u.Z.Group,{children:(0,g.jsx)(u.Z.Control,{type:"text",id:n,name:n,defaultValue:t.poQty,onBlur:function(n){return e(n.target.value,t)}})},"producedQty")})}},{title:"Uom",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.material.uom})}},{title:"Gst Perc",align:"center",render:function(e){"gst".concat(e.purchaseRequestId);return(0,g.jsx)("span",{children:e.material.gst})}}]},A=function(e){console.log(e.matReqs);var t=(0,i.useState)(),n=(0,l.Z)(t,2);n[0],n[1];return(0,g.jsx)(D.Z,{children:(0,g.jsx)(j.Z,{data:e.matReqs,cols:q((function(t,n){e.handleEditRequests("QuantityEdit",t,n,e.rowData)}),e.isDefault)})})},I=n(2144);function w(e,t){t.errors,t.setError,t.clearErrors;e[0]>0&&console.log(e[0])}var G=function(e){return(0,g.jsx)(I.Z,{children:(0,g.jsx)(c.Z,{template:{heading:"Edit Specifications",fields:[{title:"Edit Specs",type:"text",name:"specs",contains:"text",inpprops:{}}]},rowwise:2,validate:w,onSubmit:function(t){e.handleEditRequests("SpecsEdit",t.specs,"",e.rowData)},onCancel:e.onCancel,defaultValues:e.rowData,buttonName:"Save"})})},R=n(50654),k={upper:{padding:"0rem"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0 1rem 0 1rem",backgroundColor:h.Z.colors.dg,borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:h.Z.colors.ttle}};var B=function(e){var t=(0,P.ZP)({data:[]}),n=t.get,u=t.post,d=t.response,m=(t.loading,t.error,(0,i.useState)(e.reqNo)),p=(0,l.Z)(m,2),Z=p[0],x=p[1],f=(0,i.useState)(0),h=(0,l.Z)(f,2),y=h[0],j=h[1],v=(0,i.useState)(e.selectedItems?e.selectedItems:[]),b=(0,l.Z)(v,2),N=b[0],q=b[1],I=(0,i.useState)([]),w=(0,l.Z)(I,2),B=w[0],E=w[1],Q=(0,i.useState)(e.selected?e.selected:{poNo:Z}),_=(0,l.Z)(Q,2),O=_[0],V=_[1],T=(0,i.useState)([{value:"",label:"Select"}]),L=(0,l.Z)(T,2),M=L[0],H=L[1],U=(0,i.useState)([{value:"",label:"Select"}]),z=(0,l.Z)(U,2),Y=z[0],J=z[1],W=(0,i.useState)(!1),K=(0,l.Z)(W,2),X=K[0],$=K[1],ee=(0,i.useState)(0),te=(0,l.Z)(ee,2),ne=te[0],re=te[1],ae=(0,i.useState)({roundOff:0,notes:""}),se=(0,l.Z)(ae,2),oe=se[0],le=se[1],ie=(0,i.useState)([{value:"",label:"Select"}]),ce=(0,l.Z)(ie,2),ue=ce[0],de=ce[1],me=(0,i.useState)([{value:"",label:"Select"}]),pe=(0,l.Z)(me,2),Ze=pe[0],xe=pe[1],fe=(0,i.useState)([]),he=(0,l.Z)(fe,2),ge=(he[0],he[1]),ye=(0,i.useState)({showForm:!1,selectedForm:(0,g.jsx)(g.Fragment,{}),selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),je=(0,l.Z)(ye,2),ve=je[0],be=je[1],Ne=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t,r,o,l,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(C.ZP+"/poMaster/listAll",{id:Math.random(),loadTime:Date().toLocaleString()});case 2:return t=e.sent,e.next=5,n(C.ZP+"/supplier/loadOptions");case 5:return r=e.sent,e.next=8,n(C.ZP+"/company/loadOptions");case 8:return o=e.sent,console.log(o),e.next=12,u(C.ZP+"/poMaster/loadReqNo",{random:Math.random()});case 12:l=e.sent,i=(new Date).getFullYear()-2e3,c=(new Date).getMonth()+1,d.ok&&(ge(t),H([].concat((0,s.Z)(M),(0,s.Z)(r))),xe([].concat((0,s.Z)(Ze),(0,s.Z)(o))),c>=4&&x("".concat(i,"/").concat(i+1,"-0000").concat(Number(l)+1)),c<4&&x("".concat(i-1,"/").concat(i,"-0000").concat(Number(l)+1)));case 16:case"end":return e.stop()}}),e)}))),[n,d]);(0,i.useEffect)((function(){Ne()}),[]);var Ce=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(C.ZP+"/matrialPrItems/multipleRequests",{ids:t});case 2:if(r=e.sent,d.ok){for(o=0;o<r.length;o++)r[o].poQty=n.requestQty[o];E((function(e){return(0,s.Z)(r)})),E((function(e){return console.log(e),e})),console.log(B)}case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"QuantityEdit"===t?(r.poQty=n,console.log(B),E((function(e){return e.map((function(e){return e.materialRequestId===r.materialRequestId?r:e}))})),console.log(B),s.requestQty[s.requestItems.findIndex((function(e){return e===r.materialRequestId}))]=n,s.poQty=s.requestQty.map((function(e){return e})).reduce((function(e,t){return Number(e)+Number(t)})),s.amount=s.unitPrice*s.poQty,s.gstAmt=(s.unitPrice*s.poQty*.01*s.gst).toFixed(2),Te("update",s)):"SpecsEdit"===t&&(s.specs=n,Te("SpecsEdit",s));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Fe=function(){be((0,r.Z)((0,r.Z)({},ve),{},{showForm:!1,selectedForm:"",selectedItem:(0,r.Z)((0,r.Z)({},ve.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))},Se=(0,i.useState)(N.length>0?N.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)})):0),De=(0,l.Z)(Se,2),qe=De[0],Ae=De[1],Ie=(0,i.useState)(N.length>0?N.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)})):0),we=(0,l.Z)(Ie,2),Ge=we[0],Re=we[1],ke=(0,i.useState)(qe+Ge),Be=(0,l.Z)(ke,2),Ee=Be[0],Qe=Be[1],_e=(0,i.useContext)(R.Z).userId,Oe=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(C.ZP+"/material/loadOptions");case 2:return t=e.sent,e.next=5,n(C.ZP+"/terms/loadOptions");case 5:r=e.sent,de([].concat((0,s.Z)(ue),(0,s.Z)(t))),J([].concat((0,s.Z)(Y),(0,s.Z)(r)));case 8:case"end":return e.stop()}}),e)}))),[n,d]);(0,i.useEffect)((function(){Oe()}),[]);var Ve={heading:"PO Entry",fields:[{title:"PO Date",type:"date",name:"poDate",contains:"date",validationProps:"Po Date is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Company",type:"select",name:"companyId",contains:"Select",options:Ze},{title:"PO Number",type:"disabled",name:"poNo",contains:"text",validationProps:"Po No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Supplier",type:"select",name:"supplierId",contains:"Select",options:M},{title:"Delivery Address",type:"textarea",name:"deliveryAddress",contains:"textarea",validationProps:"Delivery Address is required",inpprops:{md:4}},{title:"Payment Terms",type:"select",name:"paymentTerms",validationProps:"Please select Payment Terms",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Advance_Payment",label:"Advance Payment"},{value:"LC",label:"LC"},{value:"CAD",label:"CAD"},{value:"Immediate_After_Delivery",label:"Immediate After Delivery"},{value:"Seven_Days_Credit_From_Dod",label:"7 Days Credit From DOD"},{value:"Fifteen_Days_Credit_From_Dod",label:"15 Days Credit From DOD"},{value:"Thirty_Days_Credit_From_Dod",label:"30 Days Credit From DOD"},{value:"FourtyFive_Days_Credit_From_Dod",label:"45 Days Credit From DOD"},{value:"Ninety_Days_Credit_From_Dod",label:"90 Days Credit From DOD"}]},{title:"Payment Remarks",type:"textarea",name:"paymentRemarks",contains:"textarea",validationProps:"Delivery Address is required",inpprops:{md:4}},{title:"Delivery Terms",type:"select",name:"deliveryTerms",validationProps:"Please select Delivery Terms",contains:"Select",options:[{value:"Select",label:"Select"},{value:"DAP",label:"DAP"},{value:"Ex_works",label:"Ex Works"},{value:"CIF",label:"CIF"},{value:"C_And_F",label:"C&F"},{value:"FOB",label:"FOB"},{value:"DDP",label:"DDP"},{value:"DDU",label:"DDU"}]},{type:"hidden",name:"userId",contains:"hidden",value:_e},{type:"hidden",name:"poType",contains:"hidden",value:"Service_Purchase_Order"},{type:"hidden",name:"termsAndConId",contains:"hidden",value:"1"}]},Te=function(e,t){"update"===e?(q((function(e){return e.map((function(e){return e.materialRequestId===t.materialRequestId?t:e}))})),0==ne?Ae(N.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)}))):re(N.map((function(e){return e.gstAmt})).reduce((function(e,t){return Number(e)+Number(t)}))),Re(N.map((function(e){return e.amount})).reduce((function(e,t){return Number(e)+Number(t)}))),Qe((qe+Ge+ne).toFixed(2))):"SpecsEdit"===e?q((function(e){return e.map((function(e){return e.materialRequestId===t.materialRequestId?t:e}))})):"delete"===e&&(console.log("delete"),console.log(t),q((function(e){return e.filter((function(e){return e.materialRequestId!==t.materialRequestId}))})),console.log(N))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(S.Z,{size:"xl",show:ve.showForm,onHide:Fe,children:[(0,g.jsx)(S.Z.Header,{closeButton:!0,children:(0,g.jsx)(S.Z.Title,{style:{textAlign:"center"},children:"Enter Po Details"})}),(0,g.jsx)(S.Z.Body,{children:ve.selectedForm})]}),(0,g.jsx)(D.Z,{children:(0,g.jsx)(c.Z,{template:Ve,rowwise:3,watchFields:["supplierId","companyId"],validate:function(e,t){var n;t.errors,t.setError,t.clearErrors,console.log("logged"),""!=e[0]&&e[0]?(console.log(e[0]),(n=e[0],(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading Products"),e.next=3,u(C.ZP+"/supplier/getById",{supplierId:n,random:Math.random()});case 3:t=e.sent,console.log(t),33!=(null===t||void 0===t?void 0:t.stateId)?(0==ne&&1==X&&(re(qe),Ae(0)),$(!0)):ne>0&&(Ae(ne),re(0));case 6:case"end":return e.stop()}}),e)}))))()):void 0!=e[1]&&Number(e[1])!=y&&(console.log(e[1]),j(Number(e[1])),function(e){return(0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading Products"),t.next=3,u(C.ZP+"/company/getById",{companyId:e,random:Math.random()});case 3:n=t.sent,console.log(n),V((function(e){return(0,r.Z)((0,r.Z)({},O),{},{deliveryAddress:n.companyAddress,poNo:"SPO-".concat(n.prefixName).concat(Z)})}));case 6:case"end":return t.stop()}}),t)})))}(e[1])())},onSubmit:function(t){t.poItems=N,t.termsAndConId=oe.termsAndConId,t.roundOff=oe.roundOff,t.notes=oe.notes,t.grossAmt=Ge,t.netAmt=Ge+qe,t.gstAmt=qe,t.iGst=ne,t.cGst=qe/2,t.sGst=qe/2,t.totalGst=qe+ne,console.log(t),e.saveFunction(t)},onCancel:e.onCancel,defaultValues:O,buttonName:"Submit",styles:k,btButtons:(0,g.jsx)(F,{finalSubmit:function(e){le((0,r.Z)((0,r.Z)({},oe),{},{roundOff:e[0],notes:e[2]})),console.log(oe)},gstAmt:qe,gross:Ge,net:Ee,igstAmt:ne,showFormHandler:function(e,t){if("FurnanceForm"==t){Ce(e.requestItems,e);var n={showForm:!0,selectedForm:(0,g.jsx)(A,{handleEditRequests:Pe,matReqs:(0,s.Z)(B),rowData:e,onCancel:Fe}),selectedItem:(0,r.Z)({},e)};be((0,r.Z)((0,r.Z)({},ve),n))}else if("EditEntry"==t){var a={showForm:!0,selectedForm:(0,g.jsx)(G,{handleEditRequests:Pe,rowData:e,onCancel:Fe}),selectedItem:(0,r.Z)({},e)};be((0,r.Z)((0,r.Z)({},ve),a))}},hideFormHandler:Fe,handleEdit:function(e,t,n){"unitPrice"===e?(console.log(n),n.unitPrice=t,n.amount=t*n.poQty,n.gstAmt=(t*n.poQty*.01*n.gst).toFixed(2),Te("update",n)):"qty"===e?(n.poQty=t,n.amount=n.unitPrice*n.poQty,n.gstAmt=(n.unitPrice*n.poQty*.01*n.gst).toFixed(2),Te("update",n)):Te(e,n)},materials:ue,terms:Y,data:N,savePo:function(e,t){"add"===t?(e.isRequest="No",q((function(t){return[].concat((0,s.Z)(t),[e])})),Re(Ge+e.amount),X?(re(Number(ne)+Number(e.gstAmt)),Qe(ne+Ge)):(Ae(Number(qe)+Number(e.gstAmt)),Qe(qe+Ge))):(console.log((0,r.Z)({},e)),q(N.filter((function(t){return t.materialRequestId!==e.materialRequestId}))))},updateItems:Te})})})]})}}}]);
//# sourceMappingURL=2496.d66b7ef7.chunk.js.map