"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[9645,1650,1057],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,r){r.d(t,{Z:function(){return q}});var a=r(1413),n=r(70885),s=r(4942),l=r(72791),o={tableBody:"table_tableBody__NaJhZ"},i=r(89743),c=r(2677),d=r(89983),u=(r(77632),r(79836)),m=r(53382),p=r(68745),h=r(90618),f=r(39281),x=r(65136),Z=r(35855),g=r(35527),v=r(56890),y=r(40724),j=r(80184),b=function(e){var t=e.value,r=e.onChange;return(0,j.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return r(e.target.value)}})},P=(0,y.ZP)(p.Z)((function(e){var t,r=e.theme;return t={},(0,s.Z)(t,"&.".concat(h.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:r.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(h.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),S=(0,y.ZP)(Z.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),N=function(e){var t=e.cols,r=e.data,s=e.rows,p=(e.loadDataonPageChange,e.counts,e.className),h=e.includeCheck,y=e.checkBoxEvent,N=e.value,q=e.onChange,w=e.styles,C=l.useState(0),R=(0,n.Z)(C,2),I=R[0],k=R[1],F=l.useState(s||10),M=(0,n.Z)(F,2),Q=M[0],D=M[1],V=l.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),B=(0,n.Z)(V,2),E=B[0],A=(B[1],I>0&&Math.max(0,(1+I)*Q-r.length),"undefined"===typeof w?{}:w),_="center";return(0,j.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,j.jsx)(i.Z,{className:"".concat(o.tableContainer," ").concat(p),style:(0,a.Z)((0,a.Z)({},null===A||void 0===A?void 0:A.tablehead),null!==A&&void 0!==A&&A.tablehead?{}:{background:"transparent"}),children:(0,j.jsx)(g.Z,{className:o.tableContainer,children:(0,j.jsxs)(f.Z,{className:o.tableStyles,children:[(0,j.jsxs)(i.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==N&&q&&(0,j.jsx)(c.Z,{children:(0,j.jsx)(b,{value:N,onChange:q})}),(0,j.jsx)(c.Z,{children:s&&(0,j.jsx)(x.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:E,component:"div",count:r.length,rowsPerPage:Q,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:I,onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){D(+e.target.value),k(0)},className:o.pagination})})]}),(0,j.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},null===A||void 0===A?void 0:A.table),null!==A&&void 0!==A&&A.table?{}:{background:"transparent"}),className:o.tableBody,children:[(0,j.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(o.table),children:[(0,j.jsxs)(v.Z,{children:["                ",(0,j.jsxs)(Z.Z,{children:[h&&(0,j.jsx)(P,{align:_,children:(0,j.jsx)("input",{type:"checkbox"})}),(0,j.jsx)(P,{align:_,children:"S.No"}),t.map((function(e,t){return(0,j.jsx)(P,{align:_,children:e.title},t)}))]})]}),r&&(0,j.jsx)(m.Z,{children:r.slice(I*Q,I*Q+Q).map((function(e,r){return(0,j.jsxs)(S,{children:[h&&(0,j.jsx)(P,{align:_,children:(0,j.jsx)("input",{type:"checkbox",onClick:function(t){y(e,t.target.checked)}})}),(0,j.jsx)(P,{children:I*Q+r+1}),t.map((function(t,r){return(0,j.jsx)(P,{align:t.align,className:t.hover&&o.hoverclass,children:t.render(e)},r)}))]},r++)}))})]})," "]})]})})})})};N.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var q=N},46844:function(e,t,r){r.d(t,{Z:function(){return p}});var a=r(1413),n=(r(72791),r(38595),r(2144)),s=r(89743),l=r(2677),o=r(43360),i="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",m=r(80184);var p=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,m.jsxs)(n.Z,{className:i,style:(0,a.Z)((0,a.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,m.jsx)(n.Z.Header,{className:c,children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(l.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,m.jsx)("h4",{children:e.title})}),(0,m.jsx)(l.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,m.jsx)(o.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,m.jsx)(n.Z.Body,{className:d,children:e.children})]})}},29645:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var a=r(1413),n=r(42982),s=r(74165),l=r(15861),o=r(70885),i=r(72791),c=r(60057),d=r(46844),u=(r(78431),"orders_container__5ZmC1"),m=r(79747),p=r(56355),h=r(80184),f=function(e,t){return[{title:"User Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.user.userName})}},{title:"Request No",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.requestNo})}},{title:"Request Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.requestDate})}},{title:"Request Items",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.Items})}},{title:"Department",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.department})}},{title:"Description",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.purpose})}},{title:"Status",align:"center",render:function(r){return(0,h.jsxs)(h.Fragment,{children:[" ",["Requested"].includes("".concat(r.status))?(0,h.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[2]),children:r.status}):(0,h.jsx)("span",{children:(0,h.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[3]),children:r.status})})]})}},{title:"Edit",align:"center",render:function(r){return(0,h.jsx)(p.fmQ,{style:{cursor:"pointer"},onClick:e(r,t[0])})}}]},x=(r(38595),r(30717)),Z=r(89743),g=r(2677),v=r(61134),y=r(97829),j=r(73728),b=r(50654),P=r(21216);var S=function(e){var t=(0,i.useState)(),r=(0,o.Z)(t,2),n=r[0],s=(r[1],(0,i.useState)(e.prItems)),l=(0,o.Z)(s,2),c=(l[0],l[1],(0,i.useState)(e.materials)),d=(0,o.Z)(c,2),u=(d[0],d[1],(0,v.cI)({defaultValues:(0,a.Z)({},n)})),m=u.register,p=u.handleSubmit,f=u.formState.errors,S=(u.watch,u.setError,u.clearErrors,u.setValue,u.reset);return(0,i.useContext)(b.Z),(0,i.useEffect)((function(){S(e.defaultValues)}),[e.defaultValues]),(0,h.jsx)(x.Z,{className:y.Z.formcon,children:(0,h.jsxs)(Z.Z,{style:{backgroundColor:P.Z.colors.dgc,borderRadius:"1em",padding:"1rem"},children:[(0,h.jsx)(g.Z,{md:{span:3},children:(0,h.jsxs)(x.Z.Group,{children:[(0,h.jsx)(x.Z.Label,{htmlFor:"lineNo",children:"Material Category"}),(0,h.jsxs)(x.Z.Select,(0,a.Z)((0,a.Z)({id:"category",name:"category"},m("category",{required:"Items is Required"})),{},{className:y.Z.formBorder,children:[(0,h.jsx)("option",{value:"Raw_Materials",children:"Raw Materials"}),(0,h.jsx)("option",{value:"Office_Supplies",children:"Office Supplies"}),(0,h.jsx)("option",{value:"Electronics",children:"Electronics"})]})),f.lineNo&&(0,h.jsx)(x.Z.Text,{className:"text-danger",children:f.lineNo.message})]},"lineNo")}),(0,h.jsx)(g.Z,{md:{span:3},children:(0,h.jsxs)(x.Z.Group,{children:[(0,h.jsx)(x.Z.Label,{htmlFor:"lineNo",children:"Material Name"}),(0,h.jsx)(x.Z.Select,(0,a.Z)((0,a.Z)({id:"items"},m("materialId",{required:"Items is Required"})),{},{onChange:function(t){e.materialChange(t.target.value)},className:y.Z.formBorder,children:e.materials.map((function(e,t){var r=e.value,a=e.label;return(0,h.jsx)("option",{value:r,children:a})}))})),f.lineNo&&(0,h.jsx)(x.Z.Text,{className:"text-danger",children:f.lineNo.message})]},"lineNo")}),(0,h.jsx)(g.Z,{md:{span:3},children:(0,h.jsxs)(x.Z.Group,{children:[(0,h.jsx)(x.Z.Label,{htmlFor:"uom",children:"Uom"}),(0,h.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({type:"text",id:"uom",name:"uom",value:e.uom},m("uom",{required:"Quantity is Required"})),{},{diabled:!0,readOnly:!0,className:y.Z.formBorder}))]},"uom")}),(0,h.jsx)(g.Z,{md:3,children:(0,h.jsxs)(x.Z.Group,{children:[(0,h.jsx)(x.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,h.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({type:"reqQty",id:"reqQty",name:"reqQty"},m("reqQty",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty,className:y.Z.formBorder})),f.reqQty&&(0,h.jsx)(x.Z.Text,{className:"text-danger",children:f.reqQty.message})]},"quantity")}),(0,h.jsx)(g.Z,{md:3,children:(0,h.jsxs)(x.Z.Group,{children:[(0,h.jsx)(x.Z.Label,{htmlFor:"deliveryDate",children:"Expected Date"}),(0,h.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({type:"date",id:"expectedDate",name:"expectedDate"},m("expectedDate",{required:"Enter Expected Date"})),{},{className:y.Z.formBorder})),f.expectedDate&&(0,h.jsx)(x.Z.Text,{className:"text-danger",children:f.expectedDate.message})]},"deliveryDate")}),(0,h.jsxs)(g.Z,{md:1,children:[" ",(0,h.jsx)("a",{children:(0,h.jsx)(j.qVg,{size:38,className:y.Z.btnextra,onClick:p((function(t){console.log(t),t.materialQty=t.reqQty,e.saveprItems(t),S()})),hover:!0})})]})]})})},N=r(23118),q=r(23853),w=function(e,t,r){return[{title:"Material Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.material.materialName})}},{title:"Quantity",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.reqQty})}},{title:"Uom",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.material.uom})}},{title:"Expected Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.expectedDate})}},{title:"Remove",align:"center",render:function(t){return(0,h.jsx)(q.Ybf,{style:{cursor:"pointer"},onClick:e(t)})}}]},C=r(99355),R=r(21229);var I=function(e){var t=e.data?e.data:[],r=(0,i.useState)(t),n=(0,o.Z)(r,2),c=n[0],d=n[1],u=(0,i.useState)({materialName:"",uom:""}),m=(0,o.Z)(u,2),p=m[0],f=m[1],x=(0,R.ZP)({data:[]}),Z=(x.get,x.post),g=x.response,v=(x.loading,x.error,(0,i.useState)({})),y=(0,o.Z)(v,2),j=y[0],b=(y[1],(0,i.useState)(c.length>0?e.maxQty-c.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):e.maxQty)),P=(0,o.Z)(b,2),q=P[0],I=(P[1],function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Z(C.ZP+"/material/getById",{materialId:t});case 3:r=e.sent,g.ok?f((function(e){return(0,a.Z)({},r)})):f("Not Available");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,h.jsxs)("div",{style:{padding:"0 1.5rem"},children:[(0,h.jsx)(S,{saveprItems:function(t){t.material={},t.material.materialName=p.materialName,t.material.uom=p.uom,e.onPrItemsUpdate(t,"add")},defaultValues:j,maxQty:q,materials:e.materials,materialChange:I,uom:p.uom}),(0,h.jsx)(N.Z,{data:e.data,cols:w((function(t){return function(){d(c.filter((function(e){return e.materialId!==t.materialId}))),e.onPrItemsUpdate(t,"deleted")}}),"",[6,5])})]})},k={upper:{padding:"0"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0 1rem 0 1rem",backgroundColor:P.Z.colors.dg,borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:P.Z.colors.ttle}};var F=function(e){var t=(0,R.ZP)({data:[]}),r=t.get,d=(t.post,t.response),u=(t.loading,t.error,(0,i.useState)(e.selectedItem.purchaseRequestId?e.selectedItem:{requestNo:e.reqNo})),m=(0,o.Z)(u,2),p=m[0],f=(m[1],(0,i.useState)(e.selectedItem.materialRequests?e.selectedItem.materialRequests:[])),x=(0,o.Z)(f,2),Z=x[0],g=x[1],v=(0,i.useContext)(b.Z).userId;console.log(v);var y=(0,i.useState)(e.selectedItem?e.selectedItem.quantity:1),j=(0,o.Z)(y,2),P=j[0],S=j[1],N=(0,i.useState)([{value:"",label:"Select"}]),q=(0,o.Z)(N,2),w=q[0],F=q[1],M=(0,i.useCallback)((0,l.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(C.ZP+"/material/loadOptions");case 2:t=e.sent,F([].concat((0,n.Z)(w),(0,n.Z)(t)));case 4:case"end":return e.stop()}}),e)}))),[r,d]);(0,i.useEffect)((function(){M()}),[]);var Q={heading:"Purchase Request Entry",fields:[{title:"Req Number",type:"disabled",name:"requestNo",contains:"text",inpprops:{}},{title:"Req Date",type:"date",name:"requestDate",contains:"date",validationProps:"Request Date is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Company",type:"select",name:"companyId",validationProps:"Please select Company",contains:"Select",options:[{value:"1",label:"VJP Foundry"},{value:"2",label:"VJP Aluminium"}]},{title:"Depatment",type:"select",name:"department",validationProps:"Please select Shift",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Administration",label:"Administration"},{value:"Production",label:"Production"},{value:"Quality",label:"Quality"},{value:"Stores",label:"Stores"}]},{title:"Purpose",type:"textarea",name:"purpose",contains:"textarea",inpprops:{maxlength:128,md:4}},{type:"hidden",name:"status",contains:"hidden",value:"Requested"},{type:"hidden",name:"userId",contains:"hidden",value:v},{type:"hidden",name:"requestType",contains:"hidden",value:1}]};return console.log(e.reqNo),(0,h.jsx)(c.Z,{template:Q,rowwise:3,watchFields:["quantity"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0&&(console.log(e[0]),S(e[0]))},onSubmit:function(t){t.materialRequests=Z,console.log(t),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Submit",defaultValues:p,styles:k,btButtons:(0,h.jsx)(I,{materials:w,data:Z,onPrItemsUpdate:function(e,t){"add"===t?(g((function(t){return[].concat((0,n.Z)(t),[e])})),console.log(Z)):(console.log((0,a.Z)({},e)),g(Z.filter((function(t){return t.materialId!==e.materialId}))))},maxQty:P})})},M=r(59434),Q=r(34476),D=r(4349),V=function(e,t,r){return[{title:"Material  Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.reqQty})}},{title:"Expected Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.expectedDate})}},{title:"Approve Qty",align:"left",render:function(t){var r="qty".concat(t.materialRequestPRId),a=t.materialQty;return(0,h.jsx)("span",{children:(0,h.jsx)(x.Z.Group,{children:(0,h.jsx)(x.Z.Control,{type:"text",id:r,name:r,defaultValue:a,onBlur:function(r){return e("materialQty",r.target.value,t)}})},"materialQty")})}}]};var B={margin:"0",padding:"0"},E={table:{padding:"1rem"},upper:{padding:"1rem"},simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:P.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},A=["acceptedEdit"];function _(e,t){var r=t.errors,a=t.setError,n=t.clearErrors;"Admin"===e.firstname?r.firstname||a("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&n("firstname")}var H=function(e){var t=(0,M.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,o.Z)(t,3),a=(r[0],r[1],r[2],(0,R.ZP)()),n=(a.get,a.post),d=a.response,u=(a.loading,a.error,(0,M.I0)(),(0,i.useState)([])),p=(0,o.Z)(u,2),f=p[0],x=p[1],Z=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),g=(0,o.Z)(Z,2),v=(g[0],g[1],function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(C.ZP+"/matrialPrItems/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=(0,i.useCallback)((0,l.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,n(C.ZP+"/matrialPrItems/prItems",{id:e.selected.purchaseRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),d.ok&&x(r);case 6:case"end":return t.stop()}}),t)}))),[n,d,e.loadState]);return(0,i.useEffect)((function(){y()}),[y]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(m.Z,{upper:B,useUpperTwoStyle:!1,title:"Purchase Requests",styles:E,children:[(0,h.jsx)(N.Z,{cols:V((function(e,t,r){"materialQty"===e&&(r.materialQty=t,v(r))}),A,[5]),data:f,styles:E}),(0,h.jsx)(c.Z,{template:{fields:[{title:"Remarks",type:"textarea",name:"approvalRemarks",contains:"textarea",validationProps:"Please Enter Approval Remarks",inpprops:{md:4,maxLength:512}},{type:"hidden",name:"status",contains:"hidden",value:"Approved"}]},rowwise:3,validate:_,onSubmit:function(t){console.log(t),t.purchaseRequestId=e.selected.purchaseRequestId,e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Approve",styles:E})]})})},T=function(e,t,r){return[{title:"Material  Name",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.reqQty})}},{title:"Expected Date",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.expectedDate})}},{title:"Approved Qty",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.materialQty})}},{title:"Po Qty",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.poQty})}},{title:"Status",align:"center",render:function(e){return(0,h.jsx)("span",{children:e.status})}}]},L={margin:"0",padding:"0"},G={table:{padding:"1rem"},upper:{padding:"1rem"},simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:P.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},U=["acceptedEdit"];var O=function(e){var t=(0,M.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,o.Z)(t,3),a=(r[0],r[1],r[2],(0,R.ZP)()),n=(a.get,a.post),c=a.response,d=(a.loading,a.error,(0,M.I0)(),(0,i.useState)([])),u=(0,o.Z)(d,2),p=u[0],f=u[1],x=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),Z=(0,o.Z)(x,2),g=(Z[0],Z[1],function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(C.ZP+"/matrialPrItems/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=(0,i.useCallback)((0,l.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,n(C.ZP+"/matrialPrItems/prItems",{id:e.selected.purchaseRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),c.ok&&f(r);case 6:case"end":return t.stop()}}),t)}))),[n,c,e.loadState]);return(0,i.useEffect)((function(){v()}),[v]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(m.Z,{upper:L,useUpperTwoStyle:!1,title:"Purchase Requests",styles:G,children:(0,h.jsx)(N.Z,{cols:T((function(e,t,r){"materialQty"===e&&(r.materialQty=t,g(r))}),U),data:p,styles:G})})})},Y={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Depatment",type:"select",name:"department",validationProps:"Please select Shift",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Administration",label:"Administration"},{value:"Production",label:"Production"},{value:"Quality",label:"Quality"},{value:"Stores",label:"Stores"}]},{title:"PR Status",type:"select",name:"status",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Requested",label:"Requested"},{value:"Approved",label:"Approved"},{value:"PO_Generated",label:"Po Generated"},{value:"Closed",label:"Closed"}]}]};var z=function(e){var t=(0,i.useState)([]),r=(0,o.Z)(t,2),p=r[0],x=r[1],Z=(0,i.useState)(0),g=(0,o.Z)(Z,2),v=g[0],y=g[1],j=(0,R.ZP)({data:[]}),b=j.get,P=j.post,S=j.response,q=(j.loading,j.error,(0,i.useState)(Math.random())),w=(0,o.Z)(q,2),I=w[0],k=(w[1],(0,M.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),V=(0,o.Z)(k,3),B=V[0],E=(V[1],V[2],(0,M.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),A=(0,o.Z)(E,3),_=A[0],T=(A[1],A[2]),L=(0,M.I0)(),G=function(e,t){L(D.I.showAlertHandler({showAlert:!B,alertMessage:e,alertVariant:t}))},U=(0,i.useCallback)((0,l.Z)((0,s.Z)().mark((function e(){var t,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(C.ZP+"/materialPr/prS",{random:Math.random()});case 2:return t=e.sent,e.next=5,P(C.ZP+"/materialPr/loadReqNo",{random:Math.random()});case 5:r=e.sent,a=(new Date).getFullYear(),S.ok&&x(t),y("PR-".concat(a,"-000").concat(Number(r)+1));case 9:case"end":return e.stop()}}),e)}))),[b,S,I]);(0,i.useEffect)((function(){U()}),[U]);var z=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.materialPrId,r=t.purchaseRequestId?"/materialPr/update":"/materialPr/create",console.log(r),e.next=5,P(C.ZP+r,t);case 5:a=e.sent,console.log(a),1==a.retValues.status?t.purchaseRequestId?(x(p.map((function(e){return e.purchaseRequestId===a.retValues.materialPR.purchaseRequestId?a.retValues.materialPR:e}))),L(Q.n.hideModalHandler()),G(a.retValues.message,"success")):a.retValues.materialPR.purchaseRequestId>0&&(x([a.retValues.materialPR].concat((0,n.Z)(p))),L(Q.n.hideModalHandler()),G(a.retValues.message,"success")):(L(Q.n.hideModalHandler()),G(a.retValues.message,"danger"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/materialPr/approval",e.next=3,P(C.ZP+"/materialPr/approval",t);case 3:r=e.sent,console.log(r),1==r.retValues.status?t.materialPrId?(x(p.map((function(e){return e.materialPrId===r.retValues.materialPR.materialPrId?r.retValues.materialPR:e}))),L(Q.n.hideModalHandler()),G(r.retValues.message,"success")):r.retValues.materialPR.materialPrId>0&&(x([r.retValues.materialPR].concat((0,n.Z)(p))),L(Q.n.hideModalHandler()),G(r.retValues.message,"success")):(L(Q.n.hideModalHandler()),G(r.retValues.message,"danger"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){return function(){"productForm"==t?L(Q.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,h.jsx)(F,{onCancel:function(){return L(Q.n.hideModalHandler())},selectedItem:T,saveFunction:z,reqNo:v}),showModal:!0})):"edit"===t?(console.log((0,a.Z)({},e)),L(Q.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,h.jsx)(F,{onCancel:function(){return L(Q.n.hideModalHandler())},selectedItem:e,saveFunction:z}),showModal:!0}))):"approvalForm"==t?L(Q.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(H,{selected:e,saveFunction:K,onCancel:function(){return L(Q.n.hideModalHandler())},loadState:I})}),showModal:!0})):"viewApproved"==t&&L(Q.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(O,{selected:e,saveFunction:K,onCancel:function(){return L(Q.n.hideModalHandler())},loadState:I})}),showModal:!0}))}},X=function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/materialPr/search",console.log(r),e.next=4,P(C.ZP+r,t);case 4:a=e.sent,console.log(a),a.length>0?x(a):x([]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:u,children:[(0,h.jsx)(d.Z,{title:"Material Purchase Request Search",buttonName:"New PR",onHeaderClick:W({},"productForm"),bottonShow:_,children:(0,h.jsx)(c.Z,{template:Y,rowwise:4,validate:J,onSubmit:function(e){console.log(e),e.random=Math.random(),X(e)},onCancel:e.onCancel,buttonName:"Search"})}),(0,h.jsx)(m.Z,{md:12,children:(0,h.jsx)(N.Z,{cols:f(W,["edit","productForm","approvalForm","viewApproved","materialForm"]),data:p,rows:10,striped:!0})})]})};function J(e,t){var r=t.errors,a=t.setError,n=t.clearErrors;"Admin"===e.firstname?r.firstname||a("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&n("firstname")}}}]);
//# sourceMappingURL=9645.50d83b68.chunk.js.map