"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[8944,1650,1057],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(1413),a=r(70885),s=r(4942),o=r(72791),l={tableBody:"table_tableBody__NaJhZ"},i=r(89743),c=r(2677),d=r(89983),u=(r(77632),r(79836)),m=r(53382),p=r(68745),h=r(90618),f=r(39281),x=r(65136),Z=r(35855),g=r(35527),v=r(56890),y=r(40724),j=r(80184),b=function(e){var t=e.value,r=e.onChange;return(0,j.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return r(e.target.value)}})},q=(0,y.ZP)(p.Z)((function(e){var t,r=e.theme;return t={},(0,s.Z)(t,"&.".concat(h.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:r.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(h.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),w=(0,y.ZP)(Z.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),I=function(e){var t=e.cols,r=e.data,s=e.rows,p=(e.loadDataonPageChange,e.counts,e.className),h=e.includeCheck,y=e.checkBoxEvent,I=e.value,S=e.onChange,C=e.styles,N=o.useState(0),P=(0,a.Z)(N,2),R=P[0],k=P[1],Q=o.useState(s||10),F=(0,a.Z)(Q,2),M=F[0],V=F[1],E=o.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),A=(0,a.Z)(E,2),B=A[0],H=(A[1],R>0&&Math.max(0,(1+R)*M-r.length),"undefined"===typeof C?{}:C),D="center";return(0,j.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,j.jsx)(i.Z,{className:"".concat(l.tableContainer," ").concat(p),style:(0,n.Z)((0,n.Z)({},null===H||void 0===H?void 0:H.tablehead),null!==H&&void 0!==H&&H.tablehead?{}:{background:"transparent"}),children:(0,j.jsx)(g.Z,{className:l.tableContainer,children:(0,j.jsxs)(f.Z,{className:l.tableStyles,children:[(0,j.jsxs)(i.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==I&&S&&(0,j.jsx)(c.Z,{children:(0,j.jsx)(b,{value:I,onChange:S})}),(0,j.jsx)(c.Z,{children:s&&(0,j.jsx)(x.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:B,component:"div",count:r.length,rowsPerPage:M,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:R,onPageChange:function(e,t){k(t)},onRowsPerPageChange:function(e){V(+e.target.value),k(0)},className:l.pagination})})]}),(0,j.jsxs)("div",{style:(0,n.Z)((0,n.Z)({},null===H||void 0===H?void 0:H.table),null!==H&&void 0!==H&&H.table?{}:{background:"transparent"}),className:l.tableBody,children:[(0,j.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(l.table),children:[(0,j.jsxs)(v.Z,{children:["                ",(0,j.jsxs)(Z.Z,{children:[h&&(0,j.jsx)(q,{align:D,children:(0,j.jsx)("input",{type:"checkbox"})}),(0,j.jsx)(q,{align:D,children:"S.No"}),t.map((function(e,t){return(0,j.jsx)(q,{align:D,children:e.title},t)}))]})]}),r&&(0,j.jsx)(m.Z,{children:r.slice(R*M,R*M+M).map((function(e,r){return(0,j.jsxs)(w,{children:[h&&(0,j.jsx)(q,{align:D,children:(0,j.jsx)("input",{type:"checkbox",onClick:function(t){y(e,t.target.checked)}})}),(0,j.jsx)(q,{children:R*M+r+1}),t.map((function(t,r){return(0,j.jsx)(q,{align:t.align,className:t.hover&&l.hoverclass,children:t.render(e)},r)}))]},r++)}))})]})," "]})]})})})})};I.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var S=I},46844:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(1413),a=(r(72791),r(38595),r(2144)),s=r(89743),o=r(2677),l=r(43360),i="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",m=r(80184);var p=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,m.jsxs)(a.Z,{className:i,style:(0,n.Z)((0,n.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,m.jsx)(a.Z.Header,{className:c,children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,m.jsx)("h4",{children:e.title})}),(0,m.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,m.jsx)(l.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,m.jsx)(a.Z.Body,{className:d,children:e.children})]})}},38944:function(e,t,r){r.r(t),r.d(t,{default:function(){return J}});var n=r(1413),a=r(42982),s=r(74165),o=r(15861),l=r(70885),i=r(72791),c=r(60057),d=r(46844),u=(r(78431),"orders_container__j6YCc"),m=r(79747),p=r(80184),h=function(e,t){return[{title:"User Name",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.user.userName})}},{title:"Request No",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.requestNo})}},{title:"Request Date",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.requestDate})}},{title:"Department",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.department})}},{title:"Description",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.purpose})}},{title:"Approval Remarks",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.approvalRemarks})}},{title:"Status",align:"center",render:function(r){return(0,p.jsxs)(p.Fragment,{children:[" ",["Approved"].includes("".concat(r.status))?(0,p.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[2]),children:r.status}):(0,p.jsx)("span",{children:(0,p.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[3]),children:r.status})})]})}}]},f=(r(38595),r(30717)),x=r(89743),Z=r(2677),g=r(61134),v=r(97829),y=r(73728),j=r(50654);var b=function(e){var t=(0,i.useState)(),r=(0,l.Z)(t,2),a=r[0],s=(r[1],(0,i.useState)(e.prItems)),o=(0,l.Z)(s,2),c=(o[0],o[1],(0,i.useState)(e.materials)),d=(0,l.Z)(c,2),u=(d[0],d[1],(0,g.cI)({defaultValues:(0,n.Z)({},a)})),m=u.register,h=u.handleSubmit,b=u.formState.errors,q=(u.watch,u.setError,u.clearErrors,u.setValue,u.reset);return(0,i.useContext)(j.Z),(0,i.useEffect)((function(){q(e.defaultValues)}),[e.defaultValues]),(0,p.jsx)(f.Z,{className:v.Z.formcon,children:(0,p.jsxs)(x.Z,{style:{backgroundColor:"darkgrey",borderRadius:"1em"},children:[(0,p.jsx)(Z.Z,{md:{span:4},children:(0,p.jsxs)(f.Z.Group,{children:[(0,p.jsx)(f.Z.Label,{htmlFor:"lineNo",children:"Material Category"}),(0,p.jsxs)(f.Z.Select,(0,n.Z)((0,n.Z)({id:"category",name:"category"},m("category",{required:"Items is Required"})),{},{children:[(0,p.jsx)("option",{value:"Raw_Materials",children:"Raw Materials"}),(0,p.jsx)("option",{value:"Office_Supplies",children:"Office Supplies"}),(0,p.jsx)("option",{value:"Electronics",children:"Electronics"})]})),b.lineNo&&(0,p.jsx)(f.Z.Text,{className:"text-danger",children:b.lineNo.message})]},"lineNo")}),(0,p.jsx)(Z.Z,{md:{span:4},children:(0,p.jsxs)(f.Z.Group,{children:[(0,p.jsx)(f.Z.Label,{htmlFor:"lineNo",children:"Material Name"}),(0,p.jsx)(f.Z.Select,(0,n.Z)((0,n.Z)({id:"items"},m("materialId",{required:"Items is Required"})),{},{onChange:function(t){e.materialChange(t.target.value)},children:e.materials.map((function(e,t){var r=e.value,n=e.label;return(0,p.jsx)("option",{value:r,children:n})}))})),b.lineNo&&(0,p.jsx)(f.Z.Text,{className:"text-danger",children:b.lineNo.message})]},"lineNo")}),(0,p.jsx)(Z.Z,{md:{span:4},children:(0,p.jsxs)(f.Z.Group,{children:[(0,p.jsx)(f.Z.Label,{htmlFor:"uom",children:"Uom"}),(0,p.jsx)(f.Z.Control,(0,n.Z)((0,n.Z)({type:"text",id:"uom",name:"uom",value:e.uom},m("uom",{required:"Quantity is Required"})),{},{diabled:!0,readOnly:!0}))]},"uom")}),(0,p.jsx)(Z.Z,{md:4,children:(0,p.jsxs)(f.Z.Group,{children:[(0,p.jsx)(f.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,p.jsx)(f.Z.Control,(0,n.Z)((0,n.Z)({type:"reqQty",id:"reqQty",name:"reqQty"},m("reqQty",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty})),b.reqQty&&(0,p.jsx)(f.Z.Text,{className:"text-danger",children:b.reqQty.message})]},"quantity")}),(0,p.jsxs)(Z.Z,{md:1,children:[" ",(0,p.jsx)("a",{children:(0,p.jsx)(y.qVg,{size:38,className:v.Z.btnextra,onClick:h((function(t){console.log(t),t.approvedQty=t.reqQty,e.saveprItems(t),q()})),hover:!0})})]})]})})},q=r(23118),w=r(23853),I=function(e,t,r){return[{title:"Material Name",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.material.materialName})}},{title:"Quantity",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.reqQty})}},{title:"Uom",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.material.uom})}},{title:"Expected Date",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.expectedDate})}},{title:"Remove",align:"center",render:function(t){return(0,p.jsx)(w.Ybf,{style:{cursor:"pointer"},onClick:e(t)})}}]},S=r(99355),C=r(21229);var N=function(e){var t=e.data?e.data:[],r=(0,i.useState)(t),a=(0,l.Z)(r,2),c=a[0],d=a[1],u=(0,i.useState)({materialName:"",uom:""}),m=(0,l.Z)(u,2),h=m[0],f=m[1],x=(0,C.ZP)({data:[]}),Z=(x.get,x.post),g=x.response,v=(x.loading,x.error,(0,i.useState)({})),y=(0,l.Z)(v,2),j=y[0],w=(y[1],(0,i.useState)(c.length>0?e.maxQty-c.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):e.maxQty)),N=(0,l.Z)(w,2),P=N[0],R=(N[1],function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Z(S.ZP+"/material/getById",{materialId:t});case 3:r=e.sent,g.ok?f((function(e){return(0,n.Z)({},r)})):f("Not Available");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(b,{saveprItems:function(t){t.material={},t.material.materialName=h.materialName,t.material.uom=h.uom,e.onPrItemsUpdate(t,"add")},defaultValues:j,maxQty:P,materials:e.materials,materialChange:R,uom:h.uom}),(0,p.jsx)(q.Z,{data:e.data,cols:I((function(t){return function(){d(c.filter((function(e){return e.materialId!==t.materialId}))),e.onPrItemsUpdate(t,"deleted")}}),"",[6,5])})]})};var P=function(e){var t=(0,C.ZP)({data:[]}),r=t.get,d=(t.post,t.response),u=(t.loading,t.error,(0,i.useState)(e.selectedItem.materialRequests?e.selectedItem.materialRequests:[])),m=(0,l.Z)(u,2),h=m[0],f=m[1],x=(0,i.useContext)(j.Z).userId;console.log(x);var Z=(0,i.useState)(e.selectedItem?e.selectedItem.quantity:1),g=(0,l.Z)(Z,2),v=g[0],y=g[1],b=(0,i.useState)([{value:"",label:"Select"}]),q=(0,l.Z)(b,2),w=q[0],I=q[1],P=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(S.ZP+"/material/loadOptions");case 2:t=e.sent,I([].concat((0,a.Z)(w),(0,a.Z)(t)));case 4:case"end":return e.stop()}}),e)}))),[r,d]);(0,i.useEffect)((function(){P()}),[]);var R={heading:"Purchase Request Entry",fields:[{title:"Req Number",type:"text",name:"requestNo",contains:"text",inpprops:{}},{title:"Req Date",type:"date",name:"requestDate",contains:"date",validationProps:"Internal Part No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Purpose",type:"textarea",name:"purpose",contains:"textarea",inpprops:{maxlength:128,md:4}},{type:"hidden",name:"status",contains:"hidden",value:"Requested"},{type:"hidden",name:"userId",contains:"hidden",value:x}]};return(0,p.jsx)(c.Z,{template:R,rowwise:3,watchFields:["quantity"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0&&(console.log(e[0]),y(e[0]))},onSubmit:function(t){t.storesRequestItems=h,console.log(t),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Submit",defaultValues:e.selectedItem,btButtons:(0,p.jsx)(N,{materials:w,data:h,onPrItemsUpdate:function(e,t){"add"===t?(f((function(t){return[].concat((0,a.Z)(t),[e])})),console.log(h)):(console.log((0,n.Z)({},e)),f(h.filter((function(t){return t.materialId!==e.materialId}))))},maxQty:v})})},R=r(59434),k=r(34476),Q=r(4349),F=function(e,t,r,n){return[{title:"Material  Name",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.reqQty})}},{title:"Approved Qty",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.approvedQty})}},{title:"Issue Qty",align:"left",render:function(t){var r="qty".concat(t.storesRequestId);t.issuedQty;return(0,p.jsx)("span",{children:t.issuedQty>0?(0,p.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:n(t,"EditEntry"),children:t.issuedQty}):(0,p.jsx)(f.Z.Group,{children:(0,p.jsx)(f.Z.Control,{type:"text",id:r,name:r,defaultValue:t.issuedQty,onBlur:function(r){return e("issuedQty",r.target.value,t)}})},"producedQty")})}}]},M=r(95316);var V=r(2144);function E(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var A=function(e){var t=(0,R.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),n=r[0],a=(r[1],r[2],(0,R.I0)()),s={heading:"Edit Issued Quantity",fields:[{title:"Old Qty",type:"disabled",name:"oldEntry",contains:"disabled",value:e.selectedItem.issuedQty},{title:"New Qty",type:"number",name:"editedQty",contains:"number",inpprops:{}}]};return(0,p.jsx)(V.Z,{children:(0,p.jsx)(c.Z,{template:s,rowwise:2,validate:E,onSubmit:function(t){if(Number(t.editedQty)-Number(e.selectedItem.producedQty)>Number(e.selectedItem.availableStock))s="Produced Qty cannot be greater than Avail Stock",o="success",a(Q.I.showAlertHandler({showAlert:!n,alertMessage:s,alertVariant:o}));else{var r=e.selectedItem.producedQty;e.selectedItem.producedQty=t.editedQty,e.selectedItem.availableStock=e.selectedItem.availableStock-(t.editedQty-r),e.saveFunction(e.selectedItem)}var s,o},onCancel:e.onCancel,buttonName:"Save"})})},B=r(21216),H={margin:"0",padding:"0"},D=(B.Z.margins.mg,{simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:B.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}}),_=["acceptedEdit"];var T=function(e){var t=(0,R.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),a=(r[0],r[1],r[2],(0,C.ZP)()),c=(a.get,a.post),d=a.response,u=(a.loading,a.error,(0,R.I0)(),(0,i.useState)([])),h=(0,l.Z)(u,2),f=h[0],x=h[1],Z=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),g=(0,l.Z)(Z,2),v=g[0],y=g[1],j=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,c(S.ZP+"/storesReqItems/updateIssuedQty",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t,r){"issuedQty"===e&&(r.issuedQty=t,j(r))},w=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,c(S.ZP+"/storesReqItems/reqItems",{id:e.selected.storesRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),d.ok&&x(r);case 6:case"end":return t.stop()}}),t)}))),[c,d,e.loadState]);(0,i.useEffect)((function(){w()}),[w]);var I=function(){y((0,n.Z)((0,n.Z)({},v),{},{showForm:!1,selectedForm:"",title:"",selectedItem:(0,n.Z)((0,n.Z)({},v.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(M.Z,{size:"xl",show:v.showForm,onHide:I,children:[(0,p.jsx)(M.Z.Header,{closeButton:!0,children:(0,p.jsx)(M.Z.Title,{})}),(0,p.jsx)(M.Z.Body,{children:v.selectedForm})]}),(0,p.jsx)(m.Z,{upper:H,useUpperTwoStyle:!1,styles:D,title:"Approve Requests",children:(0,p.jsx)(q.Z,{cols:F(b,_,[5],(function(e,t){return function(){if("EditEntry"==t){var r={showForm:!0,selectedForm:(0,p.jsx)(A,{onCancel:I,selectedItem:e,saveFunction:b}),selectedItem:(0,n.Z)({},e)};y((0,n.Z)((0,n.Z)({},v),r))}}})),data:f})})]})},U=function(e,t,r){return[{title:"Material  Name",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.reqQty})}},{title:"Approved Qty",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.approvedQty})}},{title:"Issued Qty",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.issuedQty})}},{title:"Status",align:"center",render:function(e){return(0,p.jsx)("span",{children:e.status})}}]},L={margin:"0",padding:"0"},O={table:{padding:"1rem"},simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:B.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},G=["acceptedEdit"];var Y=function(e){var t=(0,R.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),n=(r[0],r[1],r[2],(0,C.ZP)()),a=(n.get,n.post),c=n.response,d=(n.loading,n.error,(0,R.I0)(),(0,i.useState)([])),u=(0,l.Z)(d,2),h=u[0],f=u[1],x=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),Z=(0,l.Z)(x,2),g=(Z[0],Z[1],function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,a(S.ZP+"/matrialPrItems/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,a(S.ZP+"/storesReqItems/reqItems",{id:e.selected.storesRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),c.ok&&f(r);case 6:case"end":return t.stop()}}),t)}))),[a,c,e.loadState]);return(0,i.useEffect)((function(){v()}),[v]),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(m.Z,{upper:L,useUpperTwoStyle:!1,styles:O,title:"Approved Requests",children:(0,p.jsx)(q.Z,{cols:U((function(e,t,r){"materialQty"===e&&(r.materialQty=t,g(r))}),G),data:h,styles:O})})})},z={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Depatment",type:"select",name:"department",validationProps:"Please select Shift",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Administration",label:"Administration"},{value:"Production",label:"Production"},{value:"Quality",label:"Quality"},{value:"Stores",label:"Stores"}]},{title:"Request Status",type:"select",name:"status",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Requested",label:"Requested"},{value:"Approved",label:"Approved"},{value:"Issued",label:"Issued"},{value:"Closed",label:"Closed"}]}]};var J=function(e){var t=(0,i.useState)([]),r=(0,l.Z)(t,2),f=r[0],x=r[1],Z=(0,C.ZP)({data:[]}),g=Z.get,v=Z.post,y=Z.response,j=(Z.loading,Z.error,(0,i.useState)(Math.random())),b=(0,l.Z)(j,2),w=b[0],I=(b[1],(0,R.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),N=(0,l.Z)(I,3),F=N[0],M=(N[1],N[2],(0,R.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),V=(0,l.Z)(M,3),E=(V[0],V[1],V[2]),A=(0,R.I0)(),B=function(e,t){A(Q.I.showAlertHandler({showAlert:!F,alertMessage:e,alertVariant:t}))},H=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(S.ZP+"/storesRequest/approvedStoreRequests",{random:Math.random()});case 2:t=e.sent,y.ok&&x(t);case 4:case"end":return e.stop()}}),e)}))),[g,y,w]);(0,i.useEffect)((function(){H()}),[H]);var D=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.storesRequestId,r=t.storesRequestId?"/storesRequest/update":"/storesRequest/create",console.log(r),console.log(t),e.next=6,v(S.ZP+r,t);case 6:n=e.sent,console.log(n),1==n.retValues.status?t.purchaseRequestId?(x(f.map((function(e){return e.purchaseRequestId===n.retValues.materialPR.purchaseRequestId?n.retValues.materialPR:e}))),A(k.n.hideModalHandler()),B(n.retValues.message,"success")):n.retValues.materialPR.purchaseRequestId>0&&(x([n.retValues.materialPR].concat((0,a.Z)(f))),A(k.n.hideModalHandler()),B(n.retValues.message,"success")):(A(k.n.hideModalHandler()),B(n.retValues.message,"danger"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/storesRequest/approval",e.next=3,v(S.ZP+"/storesRequest/approval",t);case 3:r=e.sent,console.log(r),1==r.retValues.status?t.storesRequestId?(x(f.map((function(e){return e.storesRequestId===r.retValues.storeRequest.storesRequestId?r.retValues.storeRequest:e}))),A(k.n.hideModalHandler()),B(r.retValues.message,"success")):r.retValues.storeRequest.storesRequestId>0&&(x([r.retValues.storeRequest].concat((0,a.Z)(f))),A(k.n.hideModalHandler()),B(r.retValues.message,"success")):(A(k.n.hideModalHandler()),B(r.retValues.message,"danger"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e,t){return function(){"productForm"==t?A(k.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,p.jsx)(P,{onCancel:function(){return A(k.n.hideModalHandler())},selectedItem:E,saveFunction:D}),showModal:!0})):"edit"===t?(console.log((0,n.Z)({},e)),A(k.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,p.jsx)(P,{onCancel:function(){return A(k.n.hideModalHandler())},selectedItem:e,saveFunction:D}),showModal:!0}))):"approvalForm"==t?A(k.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(T,{selected:e,saveFunction:_,onCancel:function(){return A(k.n.hideModalHandler())},loadState:w})}),showModal:!0})):"viewApproved"==t&&A(k.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(Y,{selected:e,saveFunction:_,onCancel:function(){return A(k.n.hideModalHandler())},loadState:w})}),showModal:!0}))}},L=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/materialPr/search",console.log(r),e.next=4,v(S.ZP+r,t);case 4:n=e.sent,console.log(n),n.length>0?x(n):x([]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:u,children:[(0,p.jsx)(d.Z,{title:"Material Request Search",buttonName:"",onHeaderClick:U({},"productForm"),bottonShow:!0,children:(0,p.jsx)(c.Z,{template:z,rowwise:4,validate:K,onSubmit:function(e){console.log(e),e.random=Math.random(),L(e)},onCancel:e.onCancel,buttonName:"Search"})}),(0,p.jsx)(m.Z,{md:12,children:(0,p.jsx)(q.Z,{cols:h(U,["edit","productForm","approvalForm","viewApproved","materialForm"]),data:f,rows:10,striped:!0})})]})};function K(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}}}]);
//# sourceMappingURL=8944.e9f3b349.chunk.js.map