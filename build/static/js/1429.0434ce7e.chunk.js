(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[1429,1057],{46844:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(1413),a=(r(72791),r(38595),r(2144)),s=r(89743),o=r(2677),l=r(43360),i="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",m=r(80184);var p=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,m.jsxs)(a.Z,{className:i,style:(0,n.Z)((0,n.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,m.jsx)(a.Z.Header,{className:c,children:(0,m.jsxs)(s.Z,{children:[(0,m.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,m.jsx)("h4",{children:e.title})}),(0,m.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,m.jsx)(l.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,m.jsx)(a.Z.Body,{className:d,children:e.children})]})}},49624:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Te}});var n=r(1413),a=r(74165),s=r(42982),o=r(15861),l=r(70885),i=r(72791),c=r(60057),d=r(46844),u=(r(78431),r(38595),r(30717)),m=r(89743),p=r(2677),f=r(61134),h=r(97829),y=r(73728),Z=r(21216),v=r(80184);var x=function(e){var t=(0,i.useState)(),r=(0,l.Z)(t,2),a=r[0],s=(r[1],(0,i.useState)(e.deliveries)),o=(0,l.Z)(s,2),c=(o[0],o[1],(0,f.cI)({defaultValues:(0,n.Z)({},a)})),d=c.register,x=c.handleSubmit,g=c.formState.errors,j=(c.watch,c.setError,c.clearErrors,c.setValue,c.reset);return(0,i.useEffect)((function(){j(e.defaultValues)}),[e.defaultValues]),(0,v.jsx)(u.Z,{className:h.Z.formcon,children:(0,v.jsxs)(m.Z,{style:{backgroundColor:Z.Z.colors.dgc,borderRadius:"1em",padding:Z.Z.paddings.pdc},children:[(0,v.jsx)(p.Z,{children:(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Label,{htmlFor:"lineNo",children:"Line No"}),(0,v.jsx)(u.Z.Control,(0,n.Z)((0,n.Z)({type:"text",id:"lineNo",name:"lineNo"},d("lineNo",{required:"Line No is Required"})),{},{className:h.Z.formBorder})),g.lineNo&&(0,v.jsx)(u.Z.Text,{className:"text-danger",children:g.lineNo.message})]},"lineNo")}),(0,v.jsx)(p.Z,{children:(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,v.jsx)(u.Z.Control,(0,n.Z)((0,n.Z)({type:"number",id:"quantity",name:"quantity"},d("quantity",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty,className:h.Z.formBorder})),g.quantity&&(0,v.jsx)(u.Z.Text,{className:"text-danger",children:g.quantity.message})]},"quantity")}),(0,v.jsxs)(p.Z,{children:[(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Label,{htmlFor:"deliveryDate",children:"Delivery Date"}),(0,v.jsx)(u.Z.Control,(0,n.Z)((0,n.Z)({type:"date",id:"deliveryDate",name:"deliveryDate"},d("deliveryDate",{required:"Enter Delivery Date"})),{},{className:h.Z.formBorder})),g.deliveryDate&&(0,v.jsx)(u.Z.Text,{className:"text-danger",children:g.deliveryDate.message})]},"deliveryDate"),(0,v.jsx)(u.Z.Control,(0,n.Z)((0,n.Z)({type:"hidden",id:"orderId",name:"orderId"},d("orderId")),{},{value:e.orderId?e.orderId:""})),(0,v.jsx)(u.Z.Control,(0,n.Z)((0,n.Z)({type:"hidden",id:"deliveryId",name:"deliveryId"},d("deliveryId")),{},{value:e.delivery?e.delivery.deliveryId:""}))]}),(0,v.jsxs)(p.Z,{className:"d-flex align-items-center justify-content-center",children:[" ",(0,v.jsx)("a",{children:(0,v.jsx)(y.qVg,{size:38,className:h.Z.btnextra,onClick:x((function(t){e.saveDeliveries(t),j()})),hover:!0})})]})]})})},g=r(23118),j=r(23853),S=r(7692),I=function(e,t,r){return[{title:"Line No",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.lineNo})}},{title:"Quantity",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}},{title:"Delivery Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.deliveryDate})}},{title:"Revised Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.revisedDate})}},{title:"Remove",align:"center",render:function(t){return(0,v.jsx)(j.Ybf,{style:{cursor:"pointer"},onClick:e(t)})}},{title:"Revise Date",align:"center",render:function(r){return(0,v.jsx)(S.Gko,{style:{cursor:"pointer"},onClick:e(r,t[0])})}},{title:"Accept",align:"center",render:function(r){return(0,v.jsx)(y.pl2,{style:{cursor:"pointer"},onClick:e(r,t[1])})}}].filter((function(e,t){return-1==r.indexOf(t)}))},w={tablehead:{margin:".2rem .0rem",padding:"0"}};var b=function(e){var t=e.data?e.data:[],r=(0,i.useState)(t),n=(0,l.Z)(r,2),a=n[0],s=(n[1],(0,i.useState)({})),o=(0,l.Z)(s,2),c=o[0],d=(o[1],(0,i.useState)(a.length>0?e.maxQty-a.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):e.maxQty)),u=(0,l.Z)(d,2),m=u[0],p=u[1];return(0,v.jsxs)("div",{style:{padding:Z.Z.paddings.pdc},children:[(0,v.jsx)(x,{saveDeliveries:function(t){p(m-t.quantity),t.revisedDate=t.deliveryDate,e.onDeliveryUpdate(t,"add")},defaultValues:c,maxQty:m}),(0,v.jsx)(g.Z,{data:e.data,cols:I((function(t){return function(){p(m+t.quantity),e.onDeliveryUpdate(t,"deleted")}}),"",[6,5]),styles:w})]})},P=r(99355),C=r(21229),N={upper:{padding:"0"},upperRow:{margin:Z.Z.margins.mg,padding:Z.Z.paddings.pd,backgroundColor:Z.Z.colors.dg,borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:Z.Z.colors.ttle}};var D=function(e){var t=(0,C.ZP)({data:[]}),r=t.get,d=t.post,u=t.response,m=(t.loading,t.error,(0,i.useState)(e.selectedItem?e.selectedItem:{})),p=(0,l.Z)(m,2),f=(p[0],p[1],(0,i.useState)(e.selectedItem.deliveries?e.selectedItem.deliveries:[])),h=(0,l.Z)(f,2),y=h[0],Z=h[1],x=(0,i.useState)(e.selectedItem?e.selectedItem.quantity:1),g=(0,l.Z)(x,2),j=g[0],S=g[1],I=(0,i.useState)([{value:"",label:"Select"}]),w=(0,l.Z)(I,2),D=w[0],k=w[1],V=(0,i.useState)([{value:"",label:"Select"}]),q=(0,l.Z)(V,2),_=q[0],F=q[1],M=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(P.ZP+"/customer/loadOptions");case 2:t=e.sent,F([].concat((0,s.Z)(_),(0,s.Z)(t)));case 4:case"end":return e.stop()}}),e)}))),[r,u]),R=(0,i.useCallback)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(P.ZP+"/product/loadProductsByCustomer",{id:t});case 2:r=e.sent,k([].concat((0,s.Z)(D),(0,s.Z)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,u]);(0,i.useEffect)((function(){M()}),[]);var E={heading:"Order Entry",fields:[{title:"Order Number",type:"text",name:"orderNo",contains:"text",inpprops:{minlength:3,maxlength:80}},{title:"Customer Name",type:"select",name:"customerId",contains:"Select",options:_,validationProps:"Product Name is required"},{title:"Product Name",type:"select",name:"productId",contains:"Select",options:D,validationProps:"Product Name is required"},{title:"Quantity",type:"number",name:"quantity",contains:"number",validationProps:"Internal Part No is required",inpprops:{min:1,step:1}},{title:"Order Date",type:"date",name:"OrderDate",contains:"date",validationProps:"Internal Part No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Target Date",type:"date",name:"TargetDate",contains:"date",validationProps:"Internal Part No is required",inpprops:{format:"dd/mm/yyyy"}}]};return(0,v.jsx)(c.Z,{template:E,rowwise:3,watchFields:["quantity","customerId"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0?(console.log(e[0]),S(e[0])):""!=e[1]&&R(e[1])},onSubmit:function(t){t.deliveries=y,e.saveFunction(t),console.log(t)},onCancel:e.onCancel,buttonName:"Submit",defaultValues:e.selectedItem,styles:N,btButtons:(0,v.jsx)(b,{data:y,onDeliveryUpdate:function(e,t){"add"===t?Z((function(t){return[].concat((0,s.Z)(t),[e])})):(console.log((0,n.Z)({},e)),Z(y.filter((function(t){return t.lineNo!==e.lineNo}))))},maxQty:j})})},k=r(39126),V=r(56355),q=r(78820),_=function(e,t){return[{title:"Customer Name",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.product.customer.name})}},{title:"Product Name",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.product.productName})}},{title:"Order No",align:"left",render:function(e){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("span",{children:e.orderNo})})}},{title:" Part No.",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.product.internalPartCode})}},{title:"Qty",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}},{title:"Status",align:"left",render:function(r){return(0,v.jsx)(v.Fragment,{children:["Awaiting_Approval"].includes("".concat(r.orderStatus))?(0,v.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[6]),children:r.orderStatus}):(0,v.jsx)("span",{style:{color:"gray"},children:r.orderStatus})})}},{title:"Edit",align:"center",render:function(r){return(0,v.jsx)(V.fmQ,{style:{cursor:"pointer"},onClick:e(r,t[0])})}},{title:"M.Plan",align:"center",render:function(r){return(0,v.jsx)(k.GuI,{style:{cursor:"pointer"},onClick:e(r,t[1])})}},{title:"J.O",align:"center",render:function(r){return(0,v.jsx)(q.OzS,{style:{cursor:"pointer"},onClick:e(r,t[3])})}},{title:"Dispatch",align:"center",render:function(r){return(0,v.jsx)(V.DyX,{style:{cursor:"pointer"},onClick:e(r,t[5])})}},{title:"Process",align:"center",render:function(r){return(0,v.jsx)(V.M56,{style:{cursor:"pointer"},onClick:e(r,t[4])})}}]},F="orders_container__iSRHN",M=r(79747),R=r(4942),E=function(e,t,r,n,a,s){return[{title:"Delivery Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.revisedDate})}},{title:"Quantity",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}}]};var Q=function(e){return(0,v.jsx)(g.Z,{cols:E((function(){})),data:e.data,striped:!0})},A="monthlyplan_monthlyform__HDCPD",H="monthlyplan_ctitle__CSLaJ",O="monthlyplan_title__ggg+U",B="monthlyplan_shRow__ZexTn",T="monthlyplan_shCol__jwgzr",L="monthlyplan_table__BjCRq";var Y=function(e){var t={fields:[{title:"Select Month",type:"date",name:"startDate",contains:"date",validation:"Month and Year is Required",inpprops:{format:"dd/mm/yyyy"}},{title:"Quantity",type:"number",name:"quantity",contains:"number",validation:"Quantity is Required",inpprops:{min:1,step:1}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:12}},{type:"hidden",name:"orderId",contains:"number",value:e.orderId},{type:"hidden",name:"monthPlanId",contains:"number"}]},r=(0,i.useState)(),a=(0,l.Z)(r,2),s=a[0],o=a[1];return(0,i.useEffect)((function(){o(e.selected)}),[e.selected]),(0,v.jsx)(c.Z,{template:t,className:A,rowwise:2,validate:G,onSubmit:function(t){console.log((0,n.Z)({},t)),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Save",defaultValues:s})};function G(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var J,U=["January","February","March","April","May","June","July","August","September","October","November","December"],z=function(e,t){return[{title:"Month",align:"center",render:function(e){var t=new Date(e.startDate);return(0,v.jsx)("span",{children:U[t.getMonth()]})}},{title:"Year",align:"center",render:function(e){var t=new Date(e.startDate);return(0,v.jsx)("span",{children:t.getFullYear()})}},{title:"Quantity",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}},{title:"Remarks",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.remarks})}},{title:"Edit",align:"center",render:function(t){return(0,v.jsx)(j.vPQ,{style:{cursor:"pointer"},onClick:e(t,"edit")})}}].slice(0,t)},K=r(4349),X=r(59434),W={margin:"0",padding:"0"},$={margin:Z.Z.margins.mg},ee={simplettl:(J={display:"flex",justifyContent:"center",backgroundColor:Z.Z.colors.simcard,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},(0,R.Z)(J,"backgroundColor",Z.Z.colors.ttle),(0,R.Z)(J,"height","3rem"),J)};var te=function(e){var t=(0,i.useState)([]),r=(0,l.Z)(t,2),c=r[0],d=r[1],u=(0,i.useState)(),f=(0,l.Z)(u,2),h=f[0],y=f[1],Z=(0,i.useState)(e.selectedItem.quantity),x=(0,l.Z)(Z,2),j=x[0],S=x[1],I=(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),w=(0,l.Z)(I,3),b=w[0],N=(w[1],w[2],(0,X.I0)()),D=(0,C.ZP)({data:[]}),k=(D.get,D.post),V=D.response,q=(D.loading,D.error,(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(P.ZP+"/monthlyPlan/plans",{id:e.selectedItem.orderId,loadState:e.loadState});case 2:r=t.sent,V.ok&&d(r),r.length>0&&S(j-r.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})));case 5:case"end":return t.stop()}}),t)}))),[k,V,e.loadState]));(0,i.useEffect)((function(){q()}),[]);var _=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(r){var o,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.monthPlanId?"/monthlyPlan/update":"/monthlyPlan/create",console.log(o),t.next=4,k(P.ZP+o,r);case 4:1==(l=t.sent).retValues.status?(y((function(e){})),console.log((0,n.Z)({},h)),r.monthPlanId?(d(c.map((function(e){return e.monthPlanId===l.retValues.monthlyPlan.monthPlanId?l.retValues.monthlyPlan:e}))),F(l.retValues.message,"success"),e.loadStateContoller({type:"monthlyPlan"}),S(j-l.retValues.monthlyPlan.quantity)):l.retValues.monthlyPlan.monthPlanId>0&&(d([].concat((0,s.Z)(c),[l.retValues.monthlyPlan])),F(l.retValues.message,"success"),e.loadStateContoller({type:"monthlyPlan"}),S(j-l.retValues.monthlyPlan.quantity))):F(l.retValues.message,"danger");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(e,t){N(K.I.showAlertHandler({showAlert:!b,alertMessage:e,alertVariant:t}))};return(0,v.jsxs)(M.Z,{upper:W,useUpperTwoStyle:!1,children:[(0,v.jsxs)("div",{className:H,children:[(0,v.jsxs)("h5",{className:O,children:["Monthly Plan - ",e.selectedItem.product.productName,"(",e.selectedItem.product.customer.name,")"]})," "]}),(0,v.jsxs)(m.Z,{className:B,children:[(0,v.jsx)(p.Z,{md:6,className:T,children:(0,v.jsx)(M.Z,{uppertwo:$,useUpperTwoStyle:!0,title:"Target Schedule",styles:ee,children:(0,v.jsx)(Q,{data:e.selectedItem.deliveries})})}),(0,v.jsx)(p.Z,{className:T,children:(0,v.jsx)(Y,{selected:h,saveFunction:_,onCancel:e.onCancel,orderId:e.selectedItem.orderId})})]}),(0,v.jsx)(m.Z,{className:L,children:(0,v.jsx)(g.Z,{data:c,cols:z((function(e,t){return function(){"edit"===t&&(y(e),console.log((0,n.Z)({},h)))}}))})})]})},re=r(2144),ne="dailyplan_title__4PDcR",ae="dailyplan_tableCon__8uPyX";var se=function(e){var t={fields:[{title:"Date",type:"date",name:"planDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yyyy"}},{title:"Quantity",type:"number",name:"quantity",contains:"number",validation:"Quantity is Required",inpprops:{min:1,step:1,max:e.maxQty}},{title:"Remarks",type:"textarea",name:"remarksForProd",contains:"textarea",inpprops:{maxlength:128,md:6}},{type:"hidden",name:"orderId",contains:"number",value:e.orderId},{type:"hidden",name:"dailyPlanId",contains:"number"}]};return(0,v.jsx)(c.Z,{template:t,rowwise:2,validate:oe,onSubmit:function(t){console.log((0,n.Z)({},t)),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Save",defaultValues:e.selected})};function oe(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var le=function(e,t){return[{title:"Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.planDate})}},{title:"Quantity",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}},{title:"Remarks",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.remarksForProd})}},{title:"Edit",align:"center",render:function(t){return(0,v.jsx)(j.vPQ,{style:{cursor:"pointer"},onClick:e(t)})}}].slice(0,t)};var ie=function(e){var t=(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),c=r[0],d=(r[1],r[2],(0,X.I0)()),u=(0,C.ZP)({data:[]}),p=u.get,f=u.post,h=u.response,y=(u.loading,u.error,(0,i.useState)([])),Z=(0,l.Z)(y,2),x=Z[0],j=Z[1],S=(0,i.useState)(e.selectedItem.quantity),I=(0,l.Z)(S,2),w=I[0],b=I[1],N=(0,i.useState)({}),D=(0,l.Z)(N,2),k=D[0],V=D[1],q=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(P.ZP+"/dailyPlan/plans",{id:e.selectedItem.orderId,loadState:e.loadState});case 2:r=t.sent,h.ok&&j(r),r.length>0&&b(w-r.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})));case 6:case"end":return t.stop()}}),t)}))),[p,h,e.loadState]);(0,i.useEffect)((function(){q()}),[q]);var _=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(r){var n,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.dailyPlanId?"/dailyPlan/update":"/dailyPlan/create",t.next=3,f(P.ZP+n,r);case 3:1==(o=t.sent).retValues.status?r.dailyPlanId?(j(x.map((function(e){return e.dailyPlanId===o.retValues.dailyPlan.dailyPlanId?o.retValues.dailyPlan:e}))),F(o.retValues.message,"success"),e.loadStateContoller({type:"dailyPlan"}),V({})):o.retValues.dailyPlan.dailyPlanId>0&&(j([].concat((0,s.Z)(x),[o.retValues.dailyPlan])),F(o.retValues.message,"success"),V({})):F(o.retValues.message,"danger");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(e,t){d(K.I.showAlertHandler({showAlert:!c,alertMessage:e,alertVariant:t}))};return(0,v.jsxs)(M.Z,{children:[(0,v.jsxs)(re.Z,{body:!0,className:ne,children:[(0,v.jsxs)("h5",{children:[" ","Daily Plan For - ",e.selectedItem.product.productName]})," "]}),(0,v.jsxs)(M.Z,{title:"Add Daily Schedule",children:[(0,v.jsx)(m.Z,{children:(0,v.jsx)(se,{selected:k,onCancel:e.onCancel,saveFunction:_,orderId:e.selectedItem.orderId,maxQty:w})}),(0,v.jsx)(m.Z,{className:ae,children:(0,v.jsx)(g.Z,{data:x,cols:le((function(e){return function(){V((0,n.Z)({},e))}})),className:ae})})]})]})},ce={monthlyform:"joborder_monthlyform__miPJk",title:"joborder_title__YDO1q",shRow:"joborder_shRow__YbWP9",shCol:"joborder_shCol__7o-k+",tableCon:"joborder_tableCon__hDOVG",formCon:"joborder_formCon__5xkqa"},de={upper:{padding:Z.Z.paddings.pd,backgroundColor:Z.Z.colors.dg,borderRadius:"1em"}};var ue=function(e){var t=(0,C.ZP)({data:[]}),r=t.get,n=t.post,d=t.response,u=(t.loading,t.error,(0,i.useState)([{value:"",label:"Select"}])),m=(0,l.Z)(u,2),p=m[0],f=m[1],h=(0,i.useState)([{value:"",label:"Select"}]),y=(0,l.Z)(h,2),Z=y[0],x=y[1],g=(0,i.useState)([{value:"",label:"Select"}]),j=(0,l.Z)(g,2),S=j[0],I=j[1],w=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var o,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(P.ZP+"/supplier/loadOptions");case 2:return o=t.sent,f([].concat((0,s.Z)(p),(0,s.Z)(o))),t.next=6,n(P.ZP+"/ppMap/loadOptions",{id:e.selected.product.productId});case 6:l=t.sent,x([].concat((0,s.Z)(Z),(0,s.Z)(l)));case 8:case"end":return t.stop()}}),t)}))),[r,d]),b=(0,i.useState)(Math.random()),N=(0,l.Z)(b,2),D=N[0];N[1],(0,i.useEffect)((function(){w()}),[D]);var k={fields:[{title:"Date",type:"date",name:"joDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yyyy"}},{title:"Quantity",type:"number",name:"requestedQty",contains:"number",validation:"Quantity is Required",inpprops:{min:1,step:1,max:e.maxQty}},{title:"Outward Going before",type:"select",name:"goingBefore",contains:"Select",validationProps:"Please Select Process",options:Z},{title:"Inward Coming After",type:"select",name:"comingAfter",contains:"Select",validationProps:"Please Select Process",options:S},{title:"Company Name",type:"select",name:"supplierId",contains:"Select",validationProps:"Please Select Outsorce Comppany Name",options:p},{title:"Target Days",type:"number",name:"targetDays",contains:"number",validationProps:"Target Days is required",inpprops:{min:1,max:365}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:3},value:e.selected.id?e.selected.Remarks:""},{type:"hidden",name:"orderId",contains:"number",value:e.orderId}]},V=e.approval?"Edit":"Add";return(0,v.jsx)(c.Z,{template:k,rowwise:4,validate:function(e,t){t.errors,t.setError,t.clearErrors,""!==e[0]&&function(e){return(0,o.Z)((0,a.Z)().mark((function t(){var r,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),r=[{value:"",label:"Select"}],!e){t.next=7;break}return t.next=5,n(P.ZP+"/ppMap/loadOptionsAfter",{id:e});case 5:o=t.sent,d.ok&&I([].concat(r,(0,s.Z)(o)));case 7:case"end":return t.stop()}}),t)})))}(e[0])()},watchFields:["goingBefore"],onSubmit:function(t){console.log(t),t.approvedQty=t.requestedQty,e.saveFunction(t)},onCancel:e.onCancel,buttonName:V,defaultValues:e.selectedItem,styles:de})},me=function(e,t,r){return[{title:"Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.joDate})}},{title:"Req_Qty",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.requestedQty})}},{title:"Remarks",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.remarks})}},{title:"Company",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.supplier.supplierName})}},{title:"Going Before",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.goingBeforeDetails.process.processName})}},{title:"Coming After",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.comingAfterDetails.process.processName})}},{title:"Status",align:"left",render:function(e){return(0,v.jsx)("span",{children:e.joStatus})}},{title:"Edit",align:"center",render:function(r){return(0,v.jsx)(v.Fragment,{children:"Awaiting_Approval"=="".concat(r.joStatus)?(0,v.jsx)(j.vPQ,{style:{cursor:"pointer"},onClick:e(r,t[1])}):"Cannot Edit"})}}].slice(0,r)},pe=r(95316);function fe(e){console.log(e)}function he(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var ye=function(e){return(0,v.jsx)(re.Z,{children:(0,v.jsx)(c.Z,{template:{heading:"Enter Receival Details",fields:[{title:"Date",type:"date",name:"date",contains:"date",inpprops:{format:"dd/mm/yyyy"}},{title:"Quantity",type:"number",name:"Qty1",contains:"number",inpprops:{min:.1,step:.5}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}},{title:"Inward Entry Process",type:"select",name:"inwardStock",contains:"Select",validationProps:"Please Select Process",options:[{value:"",label:"Select"},{value:1,label:"Cutting & Fettling"},{value:2,label:"Heat Treatment"},{value:3,label:"Shot Blasting"}]}]},rowwise:2,validate:he,onSubmit:fe,onCancel:e.onCancel,buttonName:"Add"})})};function Ze(e){console.log(e)}function ve(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var xe=function(e){var t=(0,f.cI)(),r=t.register,a=(t.handleSubmit,t.formState.errors),s=(t.watch,t.setError,t.clearErrors,t.setValue,{heading:(0,v.jsx)(m.Z,{className:"justify-content-center",children:(0,v.jsx)(p.Z,{children:"JO Inspection Entry"})}),fields:[{title:"Date",type:"date",name:"date",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"}},{title:"Defect Type",type:"select",name:"InwardType",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Type1"},{value:0,label:"Pores"}]},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:12}},{title:"Rejected Qty",type:"number",name:"Qty1",contains:"number",inpprops:{min:0,step:1}}]}),o=(0,v.jsx)(m.Z,{children:(0,v.jsx)(p.Z,{md:5,children:(0,v.jsxs)(u.Z.Group,{children:[(0,v.jsx)(u.Z.Label,{htmlFor:"LineNo",children:"Accepted Qty"}),(0,v.jsx)(u.Z.Control,(0,n.Z)({type:"text",id:"LineNo",disabled:!0,value:"45"},r("LineNo",{required:"Line No is Required"}))),a.LineNo&&(0,v.jsx)(u.Z.Text,{className:"text-danger",children:a.LineNo.message})]},"LineNo")})});return(0,v.jsx)(c.Z,{template:s,rowwise:2,validate:ve,onSubmit:Ze,onCancel:e.onCancel,buttonName:"Add",btButtons:o})},ge={margin:"0",padding:"0"},je={margin:Z.Z.margins.mg};var Se=function(e){var t=(0,X.I0)(),r=(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),c=(0,l.Z)(r,3),d=c[0],u=(c[1],c[2],(0,C.ZP)({data:[]})),m=(u.get,u.post),p=u.response,f=(u.loading,u.error,(0,i.useState)({stock:0,produced:0})),h=(0,l.Z)(f,2),y=(h[0],h[1],(0,i.useState)([])),x=(0,l.Z)(y,2),j=x[0],S=x[1],I=(0,i.useState)(Math.random()),w=(0,l.Z)(I,2),b=w[0],N=w[1],D=(0,i.useState)(e.selectedItem.quantity),k=(0,l.Z)(D,2),V=k[0],q=k[1],_=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.joId?"/jorder/update":"/jorder/create",e.next=3,m(P.ZP+r,t);case 3:n=e.sent,console.log(n),1==n.retValues.status?t.joId?(S(j.map((function(e){return e.joId===n.retValues.order.joId?n.retValues.order:e}))),S([n.retValues.order].concat((0,s.Z)(j))),R(n.retValues.message,"success"),N(Math.random()),console.log(b)):n.retValues.order.joId>0&&(S([n.retValues.order].concat((0,s.Z)(j))),R(n.retValues.message,"success"),N(Math.random()),console.log(b)):R(n.retValues.message,"danger");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(P.ZP+"/jorder/jorders",{orderId:e.selectedItem.orderId,loadStateid:b});case 2:r=t.sent,console.log((0,n.Z)({},r)),p.ok&&S(r),r.length>0&&q(V-r.map((function(e){return e.requestedQty})).reduce((function(e,t){return e+t})));case 6:case"end":return t.stop()}}),t)}))),[m,p,b]);(0,i.useEffect)((function(){F()}),[F]);var R=function(e,r){t(K.I.showAlertHandler({showAlert:!d,alertMessage:e,alertVariant:r}))},E=(0,i.useState)({showForm:!1,selectedForm:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),Q=(0,l.Z)(E,2),A=Q[0],H=Q[1],O=(0,i.useState)({id:0,Month:"",Year:"",Remarks:"",Quantity:""}),B=(0,l.Z)(O,2),T=B[0],L=B[1],Y=(0,i.useState)(!1),G=(0,l.Z)(Y,2),J=G[0],U=G[1],z=function(){H((0,n.Z)((0,n.Z)({},A),{},{showForm:!1,selectedForm:"",selectedItem:(0,n.Z)((0,n.Z)({},A.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))};return(0,v.jsxs)(M.Z,{upper:ge,useUpperTwoStyle:!1,children:[(0,v.jsxs)(pe.Z,{show:A.showForm,onHide:z,children:[(0,v.jsx)(pe.Z.Header,{closeButton:!0}),(0,v.jsx)(pe.Z.Body,{children:A.selectedForm})]}),(0,v.jsxs)("div",{body:!0,className:ce.ctitle,style:{backgroundColor:Z.Z.colors.ttle},children:[(0,v.jsxs)("h5",{className:ce.title,children:["Job Order Details - ",e.selectedItem.product.productName,"(",e.selectedItem.product.customer.name,")"]})," "]})," ",(0,v.jsxs)(M.Z,{uppertwo:je,useUpperTwoStyle:!0,children:[(0,v.jsx)(ue,{selected:e.selectedItem,approval:J,saveFunction:_,selectedItem:T,orderId:e.selectedItem.orderId,maxQty:V}),(0,v.jsx)(g.Z,{data:j,cols:me((function(e,t){return function(){if("approval"==t)U(!0),L((0,n.Z)((0,n.Z)({},T),e));else if("edit"==t)L({item:e});else if("receival"==t){var r={showForm:!0,selectedForm:(0,v.jsx)(ye,{onCancel:z,selectedItem:A.selectedItem}),selectedItem:(0,n.Z)({},e)};H((0,n.Z)((0,n.Z)({},A),r))}else if("inspection"==t){var a={showForm:!0,selectedForm:(0,v.jsx)(xe,{onCancel:z,selectedItem:A.selectedItem}),selectedItem:(0,n.Z)({},e)};H((0,n.Z)((0,n.Z)({},A),a))}}}),["edit","approval","receival","inspection"]),rows:5,className:ce.tableCon})]})]})},Ie=(r(45335),"dispatch_title__i5vaK"),we="dispatch_tableCon__LQqeG",be={upper:{margin:"0rem 0rem 0 0rem",padding:Z.Z.paddings.pd,backgroundColor:Z.Z.colors.dg,borderRadius:"1rem"},upperRow:{}};function Pe(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var Ce=function(e){var t={fields:[{title:"Date",type:"date",name:"invoiceDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"}},{title:"Quantity",type:"number",name:"quantity",contains:"number",inpprops:{min:1,step:1,max:e.orderQty}},{title:"Dc No",type:"text",name:"invoiceNo",contains:"text",inpprops:{minlength:3,maxlength:80}},{title:"Vechicle No",type:"text",name:"vehicleDetails",contains:"text",inpprops:{minlength:3,maxlength:80}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:3}},{type:"hidden",name:"orderId",contains:"number",value:e.orderId}]};return(0,v.jsx)(c.Z,{template:t,rowwise:4,validate:Pe,onSubmit:function(t){e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Add",defaultValues:e.selected,styles:be})},Ne=function(e){return[{title:"Dispatch Date",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.invoiceDate})}},{title:"Quantity",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.quantity})}},{title:"Invoice Details",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.invoiceNo})}},{title:"Vechile Details",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.vehicleDetails})}},{title:"Remarks",align:"center",render:function(e){return(0,v.jsx)("span",{children:e.remarks})}},{title:"Edit",align:"center",render:function(t){return(0,v.jsx)(j.vPQ,{style:{cursor:"pointer"},onClick:e(t,"edit")})}}]},De=r(34476),ke={margin:"0",padding:"0"},Ve={table:{padding:"0rem",margin:"0rem"}},qe={margin:Z.Z.margins.mg};var _e=function(e){var t=(0,C.ZP)({data:[]}),r=t.get,s=t.post,c=t.response,d=(t.loading,t.error,(0,i.useState)([])),u=(0,l.Z)(d,2),f=u[0],h=u[1],y=(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),x=(0,l.Z)(y,3),j=x[0],S=(x[1],x[2],(0,X.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),I=(0,l.Z)(S,3),w=(I[0],I[1],I[2],(0,i.useState)(Math.random())),b=(0,l.Z)(w,2),N=b[0],D=b[1],k=(0,X.I0)(),V=function(e,t){k(K.I.showAlertHandler({showAlert:!j,alertMessage:e,alertVariant:t}))},q=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.ok,e.selectedItem.product.productId,t.next=4,s(P.ZP+"/dispatchEntry/dispatchEntrys",{orderId:e.selectedItem.orderId,loadStateTime:Date().toLocaleString()});case 4:r=t.sent,h(r||[]);case 6:case"end":return t.stop()}}),t)}))),[r,c]);(0,i.useEffect)((function(){q()}),[N]);var _=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(r){var n,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.dispatchId?"/dispatchEntry/update":"/dispatchEntry/create",console.log(n),t.next=4,s(P.ZP+n,r);case 4:o=t.sent,console.log(o),1==o.retValues.status?r.dispatchId?(h([o.retValues.dispatch]),D(Math.random()),e.loadStateController(),V(o.retValues.message,"success")):o.retValues.dispatch.dispatchId>0&&(h([o.retValues.dispatch]),V(o.retValues.message,"success"),D(Math.random()),e.loadStateController()):V(o.retValues.message,"danger");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=(0,i.useState)({id:"",Month:"",Year:"",Remarks:"",Quantity:""}),R=(0,l.Z)(F,2),E=R[0],Q=R[1],A=(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(re.Z,{body:!0,className:Ie,children:(0,v.jsxs)(m.Z,{children:[(0,v.jsxs)(p.Z,{style:{backgroundColor:Z.Z.colors.yllw,justifyContent:"left",borderRadius:"5%",color:"black"},md:2,children:["Stock Qty ",(0,v.jsx)("br",{}),e.selectedItem.fgStock]}),(0,v.jsxs)(p.Z,{md:10,children:[" ",(0,v.jsxs)("h4",{children:["Dispatch Details - ",e.selectedItem.product.productName," (",e.selectedItem.product.customer.name,")"]})," "]})]})})});return(0,v.jsxs)(M.Z,{upper:ke,useUpperTwoStyle:!1,children:[A,(0,v.jsxs)(M.Z,{uppertwo:qe,useUpperTwoStyle:!0,children:[(0,v.jsx)(Ce,{orderQty:e.selectedItem.fgStock,orderId:e.selectedItem.orderId,selected:E,saveFunction:_,onCancel:e.onCancel}),(0,v.jsx)(g.Z,{data:f,cols:Ne((function(e){return function(){Q((0,n.Z)((0,n.Z)({},E),e))}})),className:we,styles:Ve})]})]})};function Fe(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var Me=function(e){v.Fragment,re.Z,m.Z,p.Z,p.Z,"Enter ".concat(e.selectedItem," Details"),p.Z;var t=(0,i.useState)(e.selected),r=(0,l.Z)(t,2),n=r[0],a=r[1];return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(c.Z,{template:{heading:"Enter Revision Details",fields:[{title:"Revised Date",type:"date",name:"revisedDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{maxlength:128,md:6}}]},rowwise:2,validate:Fe,onSubmit:function(t){e.saveFunction(t),a({})},onCancel:e.onCancel,buttonName:"Request Revision",defaultValues:n})})};var Re=function(e){var t=(0,C.ZP)(),r=(t.get,t.post),s=t.response,c=(t.loading,t.error,(0,i.useState)()),d=(0,l.Z)(c,2),u=d[0],m=d[1],p=(0,i.useState)(e.selectedItem),f=(0,l.Z)(p,2),h=(f[0],f[1],(0,i.useState)({id:"",Month:"",Year:"",Remarks:"",Quantity:""})),y=(0,l.Z)(h,2),Z=(y[0],y[1],(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),x=(0,l.Z)(Z,3),j=x[0],S=(x[1],x[2],(0,X.I0)()),w=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),b=(0,l.Z)(w,2),N=b[0],D=b[1],k=function(t,r){return function(){if("reviseDate"==r){var a={showForm:!0,selectedForm:(0,v.jsx)(Me,{onCancel:_,selected:t,orderId:e.selectedItem.orderId,saveFunction:q}),selectedItem:{item:t},title:""};D((0,n.Z)((0,n.Z)({},N),a))}else"approve"==r&&(alert(r),window.confirm(JSON.stringify(t)))}},V=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,r(P.ZP+"/deliSchedule/schedules",{id:e.selectedItem.orderId,loadState:e.loadState});case 3:n=t.sent,console.log(n),s.ok&&m(n);case 6:case"end":return t.stop()}}),t)}))),[r,s,e.loadState]),q=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/deliSchedule/update",t.next=3,r(P.ZP+"/deliSchedule/update",n);case 3:s=t.sent,console.log({returnObject:s}),1==s.retValues.status?n.deliveryId&&(m(u.map((function(e){return e.deliveryId===s.retValues.delischedule.deliveryId?s.retValues.delischedule:e}))),console.log(e.loadState),_(),e.loadStateContoller({type:"approval"}),e.loadStateContoller({type:"orderSearch"}),F(s.retValues.message,"success")):(S(De.n.hideModalHandler()),F(s.retValues.message,"danger"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){D((0,n.Z)((0,n.Z)({},N),{},{showForm:!1,selectedForm:"",title:"",selectedItem:(0,n.Z)((0,n.Z)({},N.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))};(0,i.useEffect)((function(){V()}),[V]);var F=function(e,t){S(K.I.showAlertHandler({showAlert:!j,alertMessage:e,alertVariant:t}))};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(pe.Z,(0,n.Z)((0,n.Z)({},e),{},{showFormHandler:k,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:N.showForm,onHide:_,children:[(0,v.jsx)(pe.Z.Header,{closeButton:!0,children:N.title}),(0,v.jsx)(pe.Z.Body,{children:N.selectedForm})]})),(0,v.jsx)(M.Z,{title:"Approve Production Schedules",children:(0,v.jsx)(g.Z,{data:u,cols:I(k,["reviseDate","approve"],[4,6])})})]})},Ee=(r(99607),r(79704),r(73317)),Qe=r(11529),Ae=r(37762),He=function(e,t){var r,n=t.split("."),a=e,s=(0,Ae.Z)(n);try{for(s.s();!(r=s.n()).done;){if(void 0===(a=a[r.value]))break}}catch(o){s.e(o)}finally{s.f()}return a},Oe={seach:{padding:"0 3rem"}},Be=["orderForm","monthlyPlan","dailyPlan","jobOrder","processView","dispatch","approval"];var Te=function(e){var t=(0,C.ZP)({data:[]}),r=t.get,u=t.post,m=t.response,p=(t.loading,t.error,(0,i.useState)([])),f=(0,l.Z)(p,2),h=f[0],y=f[1],Z=(0,i.useState)([{value:"",label:"Select"}]),x=(0,l.Z)(Z,2),j=x[0],S=x[1],I=(0,i.useState)([{value:"",label:"Select"}]),w=(0,l.Z)(I,2),b=w[0],N=w[1],k=(0,X.v9)((function(e){return e.orderEntryProps})),V=function(e){!function(e){"orderSearch"===e.type?O(Ee.V.alterOrderSearchlHandler()):"orderEntry"===e.type?O(Ee.V.alterOrderEntrylHandler()):"monthlyPlan"===e.type?O(Ee.V.alterMonthlyPlanHandler()):"dailyPlan"===e.type?O(Ee.V.alterDailyPlanHandler()):"jobOrder"===e.type?O(Ee.V.alterJobOrderHandler()):"processView"===e.type?O(Ee.V.alterProcessViewHandler()):"approval"===e.type&&O(Ee.V.alterApprovalHandler())}(e),console.log(k.approval)},q=(0,X.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]})),R=(0,l.Z)(q,3),E=R[0],Q=(R[1],R[2],(0,X.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),A=(0,l.Z)(Q,3),H=A[0],O=(A[1],A[2],(0,X.I0)()),B=(0,i.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t,n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(P.ZP+"/order/orders",{id:0,loadTime:Date().toLocaleString()});case 2:return t=e.sent,e.next=5,r(P.ZP+"/customer/loadOptions");case 5:return n=e.sent,e.next=8,r(P.ZP+"/product/loadOptions");case 8:o=e.sent,console.log(Date().toLocaleString()),m.ok&&(y(t),N([].concat((0,s.Z)(b),(0,s.Z)(n))),S([].concat((0,s.Z)(j),(0,s.Z)(o))));case 11:case"end":return e.stop()}}),e)}))),[r,m]);(0,i.useEffect)((function(){B()}),[k.orderSearch]);var T=function(e,t){O(K.I.showAlertHandler({showAlert:!H,alertMessage:e,alertVariant:t}))},L={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Customer Name",type:"select",name:"customerId",contains:"Select",options:b},{title:"Product Name",type:"select",name:"productId",contains:"Select",options:j},{title:"Order No",type:"text",name:"orderNo",contains:"text",inpprops:{}}]},Y=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/order/searchOrders",console.log(r),e.next=4,u(P.ZP+r,t);case 4:n=e.sent,console.log(n),n.length>0?y(n):y([]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=(0,i.useCallback)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(P.ZP+"/product/loadProductsByCustomer",{id:t});case 2:r=e.sent,S([{value:"",label:"Select"}].concat((0,s.Z)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,m]),J=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.orderId?"/order/update":"/order/create",console.log(r),e.next=4,u(P.ZP+r,t);case 4:n=e.sent,console.log(n),1==n.retValues.status?t.orderId?(y(h.map((function(e){return e.orderId===n.retValues.order.orderId?n.retValues.order:e}))),O(De.n.hideModalHandler()),T(n.retValues.message,"success")):n.retValues.order.orderId>0&&(y([n.retValues.order].concat((0,s.Z)(h))),O(De.n.hideModalHandler()),T(n.retValues.message,"success")):(O(De.n.hideModalHandler()),T(n.retValues.message,"danger"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e,t){return function(){"orderForm"===t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(D,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:(0,n.Z)({},e),saveFunction:J,loadState:k.orderSearch,loadStateContoller:V}),showModal:!0})):"monthlyPlan"==t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),showModal:!0,selectedForm:(0,v.jsx)(te,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:e,loadState:k.monthlyPlan,loadStateContoller:V})})):"dailyPlan"==t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(ie,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:e,loadState:k.dailyPlan,loadStateContoller:V}),showModal:!0})):"dispatch"==t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(_e,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:(0,n.Z)({},e),saveFunction:J,loadStateController:V}),showModal:!0})):"jobOrder"==t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(Se,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:e,loadState:k.jobOrder,loadStateContoller:V}),showModal:!0})):"processView"==t?O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(Qe.Z,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:e,loadState:k.processView,loadStateContoller:V}),showModal:!0})):"approval"==t&&O(De.n.showModalHandler({selectedData:(0,n.Z)({},e),selectedForm:(0,v.jsx)(Re,{onCancel:function(){return O(De.n.hideModalHandler())},selectedItem:e,loadState:k.approval,loadStateContoller:V}),showModal:!0}))}},z=(0,i.useState)(""),W=(0,l.Z)(z,2),$=W[0],ee=W[1],re=function(e,t,r){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){var t,a=(0,Ae.Z)(r);try{for(a.s();!(t=a.n()).done;){var s,o=t.value,l=null===(s=He(e,o))||void 0===s?void 0:s.toString().toLowerCase();if(l&&l.includes(n))return!0}}catch(i){a.e(i)}finally{a.f()}return!1}))}(h,$,["product.customer.name","product.productName","orderNo"]);return(0,v.jsxs)("div",{className:F,children:[(0,v.jsx)(d.Z,{title:"Order Search",buttonName:"New Order",onHeaderClick:U({},"orderForm"),bottonShow:E,children:(0,v.jsx)(c.Z,{template:L,watchFields:["customerId"],rowwise:4,validate:function(e,t){t.errors,t.setError,t.clearErrors,""!=e[0]&&G(e[0])},onSubmit:function(e){e.random=Math.random(),console.log(e),Y(e)},onCancel:e.onCancel,buttonName:"Search",styles:Oe})}),(0,v.jsx)(M.Z,{md:12,children:(0,v.jsx)(g.Z,{cols:_(U,Be),data:re,rows:10,value:$,onChange:function(e){ee(e)}})})]})}},24654:function(){}}]);
//# sourceMappingURL=1429.0434ce7e.chunk.js.map