"use strict";(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[2979,1650,1057],{21216:function(e,t){t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,r){r.d(t,{Z:function(){return C}});var a=r(1413),n=r(70885),s=r(4942),o=r(72791),l={tableBody:"table_tableBody__NaJhZ"},i=r(89743),c=r(2677),d=r(89983),u=(r(77632),r(79836)),p=r(53382),m=r(68745),f=r(90618),h=r(39281),x=r(65136),Z=r(35855),g=r(35527),v=r(56890),y=r(40724),j=r(80184),b=function(e){var t=e.value,r=e.onChange;return(0,j.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return r(e.target.value)}})},P=(0,y.ZP)(m.Z)((function(e){var t,r=e.theme;return t={},(0,s.Z)(t,"&.".concat(f.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:r.palette.common.white,border:"1px solid #B1BFC3"}),(0,s.Z)(t,"&.".concat(f.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),S=(0,y.ZP)(Z.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,s.Z)({border:0},"border","1px solid #B1BFC3")}})),w=function(e){var t=e.cols,r=e.data,s=e.rows,m=(e.loadDataonPageChange,e.counts,e.className),f=e.includeCheck,y=e.checkBoxEvent,w=e.value,C=e.onChange,q=e.styles,R=o.useState(0),N=(0,n.Z)(R,2),k=N[0],I=N[1],D=o.useState(s||10),F=(0,n.Z)(D,2),Q=F[0],M=F[1],V=o.useState(s<10?[5,10,25,50,100]:[10,25,50,100]),B=(0,n.Z)(V,2),A=B[0],E=(B[1],k>0&&Math.max(0,(1+k)*Q-r.length),"undefined"===typeof q?{}:q),H="center";return(0,j.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,j.jsx)(i.Z,{className:"".concat(l.tableContainer," ").concat(m),style:(0,a.Z)((0,a.Z)({},null===E||void 0===E?void 0:E.tablehead),null!==E&&void 0!==E&&E.tablehead?{}:{background:"transparent"}),children:(0,j.jsx)(g.Z,{className:l.tableContainer,children:(0,j.jsxs)(h.Z,{className:l.tableStyles,children:[(0,j.jsxs)(i.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==w&&C&&(0,j.jsx)(c.Z,{children:(0,j.jsx)(b,{value:w,onChange:C})}),(0,j.jsx)(c.Z,{children:s&&(0,j.jsx)(x.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:A,component:"div",count:r.length,rowsPerPage:Q,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:k,onPageChange:function(e,t){I(t)},onRowsPerPageChange:function(e){M(+e.target.value),I(0)},className:l.pagination})})]}),(0,j.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},null===E||void 0===E?void 0:E.table),null!==E&&void 0!==E&&E.table?{}:{background:"transparent"}),className:l.tableBody,children:[(0,j.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(l.table),children:[(0,j.jsxs)(v.Z,{children:["                ",(0,j.jsxs)(Z.Z,{children:[f&&(0,j.jsx)(P,{align:H,children:(0,j.jsx)("input",{type:"checkbox"})}),(0,j.jsx)(P,{align:H,children:"S.No"}),t.map((function(e,t){return(0,j.jsx)(P,{align:H,children:e.title},t)}))]})]}),r&&(0,j.jsx)(p.Z,{children:r.slice(k*Q,k*Q+Q).map((function(e,r){return(0,j.jsxs)(S,{children:[f&&(0,j.jsx)(P,{align:H,children:(0,j.jsx)("input",{type:"checkbox",onClick:function(t){y(e,t.target.checked)}})}),(0,j.jsx)(P,{children:k*Q+r+1}),t.map((function(t,r){return(0,j.jsx)(P,{align:t.align,className:t.hover&&l.hoverclass,children:t.render(e)},r)}))]},r++)}))})]})," "]})]})})})})};w.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var C=w},46844:function(e,t,r){r.d(t,{Z:function(){return m}});var a=r(1413),n=(r(72791),r(38595),r(2144)),s=r(89743),o=r(2677),l=r(43360),i="SearchCard_card__Dzf+K",c="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",p=r(80184);var m=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,p.jsxs)(n.Z,{className:i,style:(0,a.Z)((0,a.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,p.jsx)(n.Z.Header,{className:c,children:(0,p.jsxs)(s.Z,{children:[(0,p.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,p.jsx)("h4",{children:e.title})}),(0,p.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,p.jsx)(l.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,p.jsx)(n.Z.Body,{className:d,children:e.children})]})}},32979:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var a=r(1413),n=r(42982),s=r(74165),o=r(15861),l=r(70885),i=r(72791),c=r(60057),d=r(46844),u=(r(78431),"orders_container__9YDlw"),p=r(79747),m=r(56355),f=r(80184),h=function(e,t){return[{title:"User Name",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.user.userName})}},{title:"Request No",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.requestNo})}},{title:"Request Date",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.requestDate})}},{title:"Description",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.purpose})}},{title:"Department",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.department})}},{title:"Status",align:"center",render:function(r){return(0,f.jsxs)(f.Fragment,{children:[" ",["Requested"].includes("".concat(r.status))?(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[2]),children:r.status}):(0,f.jsx)("span",{children:(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[3]),children:r.status})})]})}},{title:"Edit",align:"center",render:function(r){return(0,f.jsx)(m.fmQ,{style:{cursor:"pointer"},onClick:e(r,t[0])})}}]},x=(r(38595),r(30717)),Z=r(89743),g=r(2677),v=r(61134),y=r(97829),j=r(73728),b=r(50654),P=r(21216);var S=function(e){var t=(0,i.useState)(),r=(0,l.Z)(t,2),n=r[0],s=(r[1],(0,i.useState)(e.prItems)),o=(0,l.Z)(s,2),c=(o[0],o[1],(0,i.useState)(e.materials)),d=(0,l.Z)(c,2),u=(d[0],d[1],(0,v.cI)({defaultValues:(0,a.Z)({},n)})),p=u.register,m=u.handleSubmit,h=u.formState.errors,S=(u.watch,u.setError,u.clearErrors,u.setValue,u.reset);return(0,i.useContext)(b.Z),(0,i.useEffect)((function(){S(e.defaultValues)}),[e.defaultValues]),(0,f.jsx)(x.Z,{className:y.Z.formcon,children:(0,f.jsxs)(Z.Z,{style:{backgroundColor:P.Z.colors.dgc,borderRadius:"1em",padding:".5rem 1rem"},children:[(0,f.jsx)(g.Z,{md:{span:5},children:(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:"description",children:"Service Description"}),(0,f.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({as:"textarea",id:"specification"},p("specification",{required:"Specification is required"})),{},{maxLength:554,className:y.Z.formBorder})),h.specification&&(0,f.jsx)(x.Z.Text,{className:"text-danger",children:h.specification.message})]},"description")}),(0,f.jsx)(g.Z,{md:3,children:(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:"quantity",children:"Quantity"}),(0,f.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({type:"reqQty",id:"reqQty",name:"reqQty"},p("reqQty",{required:"Quantity is Required"})),{},{min:1,step:1,max:e.maxQty,className:y.Z.formBorder})),h.reqQty&&(0,f.jsx)(x.Z.Text,{className:"text-danger",children:h.reqQty.message})]},"quantity")}),(0,f.jsx)(g.Z,{md:3,children:(0,f.jsxs)(x.Z.Group,{children:[(0,f.jsx)(x.Z.Label,{htmlFor:"deliveryDate",children:"Service Date"}),(0,f.jsx)(x.Z.Control,(0,a.Z)((0,a.Z)({type:"date",id:"expectedDate",name:"expectedDate"},p("expectedDate",{required:"Enter Expected Date"})),{},{className:y.Z.formBorder})),h.expectedDate&&(0,f.jsx)(x.Z.Text,{className:"text-danger",children:h.expectedDate.message})]},"deliveryDate")}),(0,f.jsxs)(g.Z,{md:1,children:[" ",(0,f.jsx)("a",{children:(0,f.jsx)(j.qVg,{size:38,className:y.Z.btnextra,onClick:m((function(t){console.log(t),t.materialId=1418,t.materialQty=t.reqQty,e.saveprItems(t),S()})),hover:!0})})]})]})})},w=r(23118),C=r(23853),q=function(e,t,r){return[{title:"Service Description",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.specification})}},{title:"Service Quantity",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.reqQty})}},{title:"Service Date",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.expectedDate})}},{title:"Remove",align:"center",render:function(t){return(0,f.jsx)(C.Ybf,{style:{cursor:"pointer"},onClick:e(t)})}}]},R=r(99355),N=r(21229),k={table:{padding:".5rem"},upper:{padding:"1rem"}};var I=function(e){var t=e.data?e.data:[],r=(0,i.useState)(t),n=(0,l.Z)(r,2),c=n[0],d=n[1],u=(0,i.useState)({materialName:"",uom:""}),p=(0,l.Z)(u,2),m=p[0],h=p[1],x=(0,N.ZP)({data:[]}),Z=(x.get,x.post),g=x.response,v=(x.loading,x.error,(0,i.useState)({})),y=(0,l.Z)(v,2),j=y[0],b=(y[1],(0,i.useState)(c.length>0?e.maxQty-c.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):e.maxQty)),P=(0,l.Z)(b,2),C=P[0],I=(P[1],function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Z(R.ZP+"/material/getById",{materialId:t});case 3:r=e.sent,g.ok?h((function(e){return(0,a.Z)({},r)})):h("Not Available");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return(0,f.jsxs)("div",{style:{padding:"0 1.5em"},children:[(0,f.jsx)(S,{saveprItems:function(t){e.onPrItemsUpdate(t,"add")},defaultValues:j,maxQty:C,materials:e.materials,materialChange:I,uom:m.uom}),(0,f.jsx)(w.Z,{data:e.data,cols:q((function(t){return function(){d(c.filter((function(e){return e.materialId!==t.materialId}))),e.onPrItemsUpdate(t,"deleted")}}),"",[6,5]),styles:k})]})},D={upper:{padding:"0"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0 1rem 0 1rem",backgroundColor:P.Z.colors.dg,borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:P.Z.colors.ttle}};var F=function(e){var t=(0,N.ZP)({data:[]}),r=t.get,d=(t.post,t.response),u=(t.loading,t.error,(0,i.useState)(e.selectedItem.purchaseRequestId?e.selectedItem:{requestNo:e.reqNo})),p=(0,l.Z)(u,2),m=p[0],h=(p[1],(0,i.useState)(e.selectedItem.materialRequests?e.selectedItem.materialRequests:[])),x=(0,l.Z)(h,2),Z=x[0],g=x[1],v=(0,i.useContext)(b.Z).userId;console.log(v);var y=(0,i.useState)(e.selectedItem?e.selectedItem.quantity:1),j=(0,l.Z)(y,2),P=j[0],S=j[1],w=(0,i.useState)([{value:"",label:"Select"}]),C=(0,l.Z)(w,2),q=C[0],k=C[1],F=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(R.ZP+"/material/loadOptions");case 2:t=e.sent,k([].concat((0,n.Z)(q),(0,n.Z)(t)));case 4:case"end":return e.stop()}}),e)}))),[r,d]);(0,i.useEffect)((function(){F()}),[]);var Q={heading:"Service Purchase Request Entry",fields:[{title:"Req Number",type:"disabled",name:"requestNo",contains:"text",inpprops:{}},{title:"Req Date",type:"date",name:"requestDate",contains:"date",validationProps:"Internal Part No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Company",type:"select",name:"companyId",validationProps:"Please select Company",contains:"Select",options:[{value:"1",label:"VJP Foundry"}]},{title:"Depatment",type:"select",name:"department",validationProps:"Please select Shift",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Administration",label:"Administration"},{value:"Production",label:"Production"},{value:"Quality",label:"Quality"},{value:"Stores",label:"Stores"}]},{title:"Purpose",type:"textarea",name:"purpose",contains:"textarea",inpprops:{maxlength:128,md:4}},{type:"hidden",name:"status",contains:"hidden",value:"Requested"},{type:"hidden",name:"userId",contains:"hidden",value:v},{type:"hidden",name:"requestType",contains:"hidden",value:"Service"}]};return(0,f.jsx)(c.Z,{template:Q,rowwise:3,watchFields:["quantity"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0&&(console.log(e[0]),S(e[0]))},onSubmit:function(t){t.materialRequests=Z,console.log(t),e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Submit",defaultValues:m,styles:D,btButtons:(0,f.jsx)(I,{materials:q,data:Z,onPrItemsUpdate:function(e,t){"add"===t?(e.materialId=1487,g((function(t){return[].concat((0,n.Z)(t),[e])})),console.log(Z)):(console.log((0,a.Z)({},e)),g(Z.filter((function(t){return t.materialId!==e.materialId}))))},maxQty:P})})},Q=r(59434),M=r(34476),V=r(4349),B=function(e,t,r){return[{title:"Material  Name",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.reqQty})}},{title:"Service Date",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.expectedDate})}},{title:"Description",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.specification})}},{title:"Approve Qty",align:"left",render:function(t){var r="qty".concat(t.materialRequestPRId),a=t.materialQty;return(0,f.jsx)("span",{children:(0,f.jsx)(x.Z.Group,{children:(0,f.jsx)(x.Z.Control,{type:"text",id:r,name:r,defaultValue:a,onBlur:function(r){return e("materialQty",r.target.value,t)}})},"materialQty")})}}]};var A={simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:P.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},E=["acceptedEdit"];function H(e,t){var r=t.errors,a=t.setError,n=t.clearErrors;"Admin"===e.firstname?r.firstname||a("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&n("firstname")}var _=function(e){var t=(0,Q.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),a=(r[0],r[1],r[2],(0,N.ZP)()),n=(a.get,a.post),d=a.response,u=(a.loading,a.error,(0,Q.I0)(),(0,i.useState)([])),m=(0,l.Z)(u,2),h=m[0],x=m[1],Z=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),g=(0,l.Z)(Z,2),v=(g[0],g[1],function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(R.ZP+"/matrialPrItems/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,n(R.ZP+"/matrialPrItems/prItems",{id:e.selected.purchaseRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),d.ok&&x(r);case 6:case"end":return t.stop()}}),t)}))),[n,d,e.loadState]);return(0,i.useEffect)((function(){y()}),[y]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(p.Z,{title:"Approve Requests",styles:A,children:[(0,f.jsx)(w.Z,{cols:B((function(e,t,r){"materialQty"===e&&(r.materialQty=t,v(r))}),E,[5]),data:h}),(0,f.jsx)(c.Z,{template:{fields:[{title:"Remarks",type:"textarea",name:"approvalRemarks",contains:"textarea",validationProps:"Please Enter Approval Remarks",inpprops:{md:12,maxLength:512}},{type:"hidden",name:"status",contains:"hidden",value:"Approved"}]},rowwise:3,validate:H,onSubmit:function(t){console.log(t),t.purchaseRequestId=e.selected.purchaseRequestId,e.saveFunction(t)},onCancel:e.onCancel,buttonName:"Approve"})]})})},L=function(e,t,r){return[{title:"Material  Name",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.material.materialName})}},{title:"Request Qty",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.reqQty})}},{title:"Service Date",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.expectedDate})}},{title:"Description",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.specification})}},{title:"Approved Qty",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.materialQty})}},{title:"Po Qty",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.poQty})}},{title:"Status",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.status})}}]},T={margin:"0",padding:"0"},G={table:{padding:"1rem"},upper:{padding:"1rem"},simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:P.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},Y=["acceptedEdit"];var U=function(e){var t=(0,Q.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,l.Z)(t,3),a=(r[0],r[1],r[2],(0,N.ZP)()),n=(a.get,a.post),c=a.response,d=(a.loading,a.error,(0,Q.I0)(),(0,i.useState)([])),u=(0,l.Z)(d,2),m=u[0],h=u[1],x=(0,i.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),Z=(0,l.Z)(x,2),g=(Z[0],Z[1],function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(R.ZP+"/matrialPrItems/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.loadState),t.next=3,n(R.ZP+"/matrialPrItems/prItems",{id:e.selected.purchaseRequestId,loadState:Math.random()});case 3:r=t.sent,console.log(r),c.ok&&h(r);case 6:case"end":return t.stop()}}),t)}))),[n,c,e.loadState]);return(0,i.useEffect)((function(){v()}),[v]),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(p.Z,{upper:T,useUpperTwoStyle:!1,title:"Purchase Request Approval",styles:G,children:(0,f.jsx)(w.Z,{cols:L((function(e,t,r){"materialQty"===e&&(r.materialQty=t,g(r))}),Y),data:m,styles:G})})})},z={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Depatment",type:"select",name:"department",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Administration",label:"Administration"},{value:"Production",label:"Production"},{value:"Quality",label:"Quality"},{value:"Stores",label:"Stores"}]},{title:"PR Status",type:"select",name:"status",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Requested",label:"Requested"},{value:"Approved",label:"Approved"},{value:"PO_Generated",label:"Po Generated"},{value:"Closed",label:"Closed"}]}]};var O=function(e){var t=(0,i.useState)([]),r=(0,l.Z)(t,2),m=r[0],x=r[1],Z=(0,i.useState)(0),g=(0,l.Z)(Z,2),v=g[0],y=g[1],j=(0,N.ZP)({data:[]}),b=j.get,P=j.post,S=j.response,C=(j.loading,j.error,(0,i.useState)(Math.random())),q=(0,l.Z)(C,2),k=q[0],I=(q[1],(0,Q.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),D=(0,l.Z)(I,3),B=D[0],A=(D[1],D[2],(0,Q.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),E=(0,l.Z)(A,3),H=E[0],L=(E[1],E[2]),T=(0,Q.I0)(),G=function(e,t){T(V.I.showAlertHandler({showAlert:!B,alertMessage:e,alertVariant:t}))},Y=(0,i.useCallback)((0,o.Z)((0,s.Z)().mark((function e(){var t,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(R.ZP+"/materialPr/serviceRequests",{random:Math.random()});case 2:return t=e.sent,e.next=5,P(R.ZP+"/materialPr/loadReqNo",{random:Math.random()});case 5:r=e.sent,a=(new Date).getFullYear(),S.ok&&x(t.length>0?t:[]),y("SPR-".concat(a,"-000").concat(Number(r)+1));case 9:case"end":return e.stop()}}),e)}))),[b,S,k]);(0,i.useEffect)((function(){Y()}),[Y]);var O=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.materialPrId,r=t.purchaseRequestId?"/materialPr/update":"/materialPr/create",console.log(r),e.next=5,P(R.ZP+r,t);case 5:a=e.sent,console.log(a),1==a.retValues.status?t.purchaseRequestId?(x(m.map((function(e){return e.purchaseRequestId===a.retValues.materialPR.purchaseRequestId?a.retValues.materialPR:e}))),T(M.n.hideModalHandler()),G(a.retValues.message,"success")):a.retValues.materialPR.purchaseRequestId>0&&(x([a.retValues.materialPR].concat((0,n.Z)(m))),T(M.n.hideModalHandler()),G(a.retValues.message,"success")):(T(M.n.hideModalHandler()),G(a.retValues.message,"danger"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/materialPr/approval",e.next=3,P(R.ZP+"/materialPr/approval",t);case 3:r=e.sent,console.log(r),1==r.retValues.status?t.materialPrId?(x(m.map((function(e){return e.materialPrId===r.retValues.materialPR.materialPrId?r.retValues.materialPR:e}))),T(M.n.hideModalHandler()),G(r.retValues.message,"success")):r.retValues.materialPR.materialPrId>0&&(x([r.retValues.materialPR].concat((0,n.Z)(m))),T(M.n.hideModalHandler()),G(r.retValues.message,"success")):(T(M.n.hideModalHandler()),G(r.retValues.message,"danger"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){return function(){"productForm"==t?T(M.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,f.jsx)(F,{onCancel:function(){return T(M.n.hideModalHandler())},selectedItem:L,saveFunction:O,reqNo:v}),showModal:!0})):"edit"===t?(console.log((0,a.Z)({},e)),T(M.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,f.jsx)(F,{onCancel:function(){return T(M.n.hideModalHandler())},selectedItem:e,saveFunction:O,reqNo:v}),showModal:!0}))):"approvalForm"==t?T(M.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(_,{selected:e,saveFunction:K,onCancel:function(){return T(M.n.hideModalHandler())},loadState:k})}),showModal:!0})):"viewApproved"==t&&T(M.n.showModalHandler({selectedData:(0,a.Z)({},e),selectedForm:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(U,{selected:e,saveFunction:K,onCancel:function(){return T(M.n.hideModalHandler())},loadState:k})}),showModal:!0}))}},X=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/materialPr/searchService",console.log(r),e.next=4,P(R.ZP+r,t);case 4:a=e.sent,console.log(a),a.length>0?x(a):x([]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)(d.Z,{title:"Service Purchase Request Search",buttonName:"New Service PR",onHeaderClick:W({},"productForm"),bottonShow:H,children:(0,f.jsx)(c.Z,{template:z,rowwise:4,validate:J,onSubmit:function(e){console.log(e),e.random=Math.random(),X(e)},onCancel:e.onCancel,buttonName:"Search"})}),(0,f.jsx)(p.Z,{md:12,children:(0,f.jsx)(w.Z,{cols:h(W,["edit","productForm","approvalForm","viewApproved","materialForm"]),data:m,rows:10,striped:!0})})]})};function J(e,t){var r=t.errors,a=t.setError,n=t.clearErrors;"Admin"===e.firstname?r.firstname||a("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&n("firstname")}}}]);
//# sourceMappingURL=2979.e4842232.chunk.js.map