(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[6600,3837,1057],{46844:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(1413),a=(r(72791),r(38595),r(2144)),s=r(89743),o=r(2677),i=r(43360),c="SearchCard_card__Dzf+K",l="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",p="SearchCard_addButton__iMTZ7",u=r(80184);var m=function(e,t){var r="undefined"===typeof e.styles?{}:e.styles;return(0,u.jsxs)(a.Z,{className:c,style:(0,n.Z)((0,n.Z)({},r.search),r.search?{}:{background:"transparent"}),children:[(0,u.jsx)(a.Z.Header,{className:l,children:(0,u.jsxs)(s.Z,{children:[(0,u.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,u.jsx)("h4",{children:e.title})}),(0,u.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,u.jsx)(i.Z,{variant:"primary",className:p,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,u.jsx)(a.Z.Body,{className:d,children:e.children})]})}},10563:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n=r(1413),a=r(42982),s=r(74165),o=r(15861),i=r(70885),c=r(72791),l=r(60057),d=r(46844),p=(r(78431),r(56355)),u=r(80184),m=function(e,t){return[{title:"PO Date",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.poDate})})}},{title:"PO Number",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.poNo})})}},{title:"Company Name",align:"center",render:function(e){return(0,u.jsx)("span",{children:e.company.companyName})}},{title:"Supplier Name",align:"center",render:function(e){return(0,u.jsx)("span",{children:e.supplier.supplierName})}},{title:"Net Amt",align:"left",render:function(e){return(0,u.jsx)("span",{children:e.netAmt})}},{title:"Status",align:"left",render:function(r){return(0,u.jsx)(u.Fragment,{children:["Awaiting_Approval"].includes("".concat(r.status))?(0,u.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(r,t[2]),children:r.status}):(0,u.jsx)("span",{style:{color:"gray"},children:r.status})})}},{title:"Edit",align:"center",render:function(r){return(0,u.jsx)(p.fmQ,{style:{cursor:"pointer"},onClick:e(r,t[0])})}},{title:"P.O",align:"center",render:function(t){return(0,u.jsx)(p.dSq,{style:{cursor:"pointer"},onClick:e(t,"viewPo")})}},{title:"Docs",align:"center",render:function(r){return(0,u.jsx)(p.dSq,{style:{cursor:"pointer"},onClick:e(r,t[3])})}},{title:"GRN",align:"center",render:function(r){return(0,u.jsx)(p.fmQ,{style:{cursor:"pointer"},onClick:"Service_Purchase_Order"!=r.poType?e(r,t[1],"PO"):e(r,t[1],"SERVICE")})}}]},h="orders_container__0U4zc",f=r(23118),v=r(79747),x=r(59434),j=r(34476),g=r(4349),y=r(21229),Z=r(99355),b=(r(99607),r(79704),r(73317),r(43360)),S=function(e,t,r){return[{title:"Prepared By",align:"center",render:function(t){return(0,u.jsxs)(u.Fragment,{children:[" ",0==Number(t.statusState)&&0==Number(t.isRejected)&&3==Number(r)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,1,0),children:"Approve"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,1,1),children:"Reject"})," "]}),0==Number(t.statusState)&&0==Number(t.isRejected)&&3!=Number(r)&&(0,u.jsx)("span",{children:"Yet To Approve"}),Number(t.statusState)>=1&&0==Number(t.isRejected)&&(0,u.jsxs)("span",{children:[t.approver1,(0,u.jsx)("br",{}),t.poApproval1,(0,u.jsx)("br",{})]}),1==t.isRejected&&(0,u.jsxs)("span",{children:["Rejected By ",(0,u.jsx)("br",{}),t.approver1,(0,u.jsx)("br",{}),t.poApproval1]})]})}},{title:"Schritanised By",align:"center",render:function(t){return(0,u.jsxs)(u.Fragment,{children:[Number(t.statusState)>=1&&""==t.approver2&&0==Number(t.isRejected)&&4==Number(r)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,2,0),children:"Approve"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,2,1),children:"Reject"})," "]}),Number(t.statusState)>=1&&Number(t.statusState)<=3&&""==t.approver2&&0==Number(t.isRejected)&&4!=Number(r)&&(0,u.jsx)("span",{children:"Yet To Approve"}),""!=t.approver2&&0==Number(t.isRejected)&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver2,(0,u.jsx)("br",{}),t.poApproval2]}),""!=t.approver2&&1===Number(t.isRejected)&&2===t.rejectedState&&(0,u.jsxs)("span",{children:["Rejected By ",(0,u.jsx)("br",{}),t.approver2,(0,u.jsx)("br",{}),t.poApproval2]}),""!=t.approver2&&1===Number(t.isRejected)&&2!==t.rejectedState&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver2,(0,u.jsx)("br",{}),t.poApproval2]})]})}},{title:"Verified By",align:"center",render:function(t){return(0,u.jsxs)(u.Fragment,{children:[Number(t.statusState)>=1&&""==t.approver3&&0==Number(t.isRejected)&&5==Number(r)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,3,0),children:"Approve"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,3,1),children:"Reject"})," "]}),Number(t.statusState)>=1&&Number(t.statusState)<=3&&""==t.approver3&&0==Number(t.isRejected)&&5!=Number(r)&&(0,u.jsx)("span",{children:"Yet To Approve"}),""!=t.approver3&&0==Number(t.isRejected)&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver3,(0,u.jsx)("br",{}),t.poApproval3]}),""!=t.approver3&&1===Number(t.isRejected)&&3===t.rejectedState&&(0,u.jsxs)("span",{children:["Rejected By ",(0,u.jsx)("br",{}),t.approver3,(0,u.jsx)("br",{}),t.poApproval3]}),""!=t.approver3&&1===Number(t.isRejected)&&3!==t.rejectedState&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver3,(0,u.jsx)("br",{}),t.poApproval3]})]})}},{title:"Certified By",align:"center",render:function(t){return(0,u.jsxs)(u.Fragment,{children:[Number(t.statusState)>=3&&Number(t.statusState)<5&&""==t.approver4&&0==Number(t.isRejected)&&6==Number(r)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,4,0),children:"Approve"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,4,1),children:"Reject"})," "]}),Number(t.statusState)>=1&&Number(t.statusState)<5&&""==t.approver4&&0==Number(t.isRejected)&&6!=Number(r)&&(0,u.jsx)("span",{children:"Yet To Approve"}),""!=t.approver4&&0==Number(t.isRejected)&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver4,(0,u.jsx)("br",{}),t.poApproval4]}),""!=t.approver4&&1===Number(t.isRejected)&&4===t.rejectedState&&(0,u.jsxs)("span",{children:["Rejected By ",(0,u.jsx)("br",{}),t.approver4,(0,u.jsx)("br",{}),t.poApproval4]}),""!=t.approver4&&1===Number(t.isRejected)&&4!==t.rejectedState&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver4,(0,u.jsx)("br",{}),t.poApproval4]})]})}},{title:"Authorised By",align:"center",render:function(t){return(0,u.jsxs)(u.Fragment,{children:[Number(t.statusState)>=3&&Number(t.statusState)<5&&""==t.approver5&&0==Number(t.isRejected)&&7==Number(r)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,5,0),children:"Approve"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e(t,5,1),children:"Reject"})," "]}),Number(t.statusState)>=1&&Number(t.statusState)<5&&""==t.approver5&&0==Number(t.isRejected)&&7!=Number(r)&&(0,u.jsx)("span",{children:"Yet To Approve"}),""!=t.approver5&&0==Number(t.isRejected)&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver5,(0,u.jsx)("br",{}),t.poApproval5]}),""!=t.approver5&&1===Number(t.isRejected)&&5===t.rejectedState&&(0,u.jsxs)("span",{children:["Rejected By ",(0,u.jsx)("br",{}),t.approver5,(0,u.jsx)("br",{}),t.poApproval5]}),""!=t.approver5&&1===Number(t.isRejected)&&5!==t.rejectedState&&(0,u.jsxs)("span",{children:["Approved By ",(0,u.jsx)("br",{}),t.approver5,(0,u.jsx)("br",{}),t.poApproval5]})]})}}]},I=r(50654),N=r(21216),w={margin:"0",padding:"0"},A={simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:N.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},tablehead:{padding:".5rem 1rem"}};var P=function(e){var t=(0,y.ZP)({data:[]}),r=t.get,a=t.post,l=t.response,d=(t.loading,t.error,(0,c.useState)(e.selectedItem.deliveries?e.selectedItem.deliveries:[])),p=(0,i.Z)(d,2),m=(p[0],p[1],(0,c.useContext)(I.Z)),h=(0,x.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),b=(0,i.Z)(h,3),N=b[0],P=(b[1],b[2],(0,x.I0)()),C=function(e,t){P(g.I.showAlertHandler({showAlert:!N,alertMessage:e,alertVariant:t}))},R=(0,c.useState)(e.selectedItem?e.selectedItem.quantity:1),F=(0,i.Z)(R,2),k=(F[0],F[1],(0,c.useState)([])),M=(0,i.Z)(k,2),D=M[0],T=M[1],H=(0,c.useState)({statusState:0,poApprovalId:0,poId:e.selectedItem.poId,poApproval1:"",approver1:"",poApproval2:"",approver2:"",poApproval3:"",approver3:"",poApproval4:"",approver4:"",poApproval5:"",approver5:"",stateInts:0,isRejected:0,rejectedState:0}),B=(0,i.Z)(H,2),V=B[0],E=B[1],Q=(0,c.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(Z.ZP+"/poApproval/getBypoId",{id:e.selectedItem.poId,rand:Math.random()});case 2:r=t.sent,console.log(r),E((0,n.Z)((0,n.Z)({},V),{},{poApprovalId:r.poApprovalId,statusState:r.statusState,poId:r.poId,approver1:r.approver1,approver2:r.approver2,approver3:r.approver3,approver4:r.approver4,approver5:r.approver5,stateInts:0,rejectedState:r.rejectedState,isRejected:r.isRejected})),r.userId=localStorage.getItem("userId"),T([r]),console.log(r),console.log(D.length),console.log(V);case 10:case"end":return t.stop()}}),t)}))),[r,l]);(0,c.useEffect)((function(){Q()}),[]),console.log(V);var O=function(){var t=(0,o.Z)((0,s.Z)().mark((function t(r){var n,o,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(V),n="/poApproval/update",o="/jasperReports/report",console.log(n),t.next=6,a(Z.ZP+n,r);case 6:return i=t.sent,t.next=9,a(Z.ZP+o,{poId:e.selectedItem.poId,rand:Math.random()});case 9:t.sent,console.log(i),1==i.retValues.status?(r.poApprovalId||i.retValues.poApproval.poApprovalId>0)&&(E(i.retValues.poApproval),C(i.retValues.message,"success"),P(j.n.hideModalHandler())):(C(i.retValues.message,"danger"),P(j.n.hideModalHandler()));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsx)(v.Z,{upper:w,useUpperTwoStyle:!1,styles:A,title:"Po Approval",children:(0,u.jsx)(f.Z,{cols:S((function(e,t,r){return function(){2===t&&0==r||3===t&&0==r||4===t&&0==r||5===t&&0==r?(e.statusState=Number(e.statusState)+1,e.stateInts=t):(r=1)&&(e.rejectState=t,e.isRejected=1),console.log(m.userId),console.log(e),O(e)}}),"action",m.roleId),data:D,styles:A})})},C=function(e,t){return[{title:"Rcvd Date",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.receivedDate})})}},{title:"Material Name",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.poItems.itemName})})}},{title:"PO Qty",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.poItems.poQty})})}},{title:"Rcvd Qty",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.receivedTillDate})})}},{title:"Acpt Qty",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.acceptedTillDate})})}},{title:"In Qty",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.receivedQty})})}},{title:"Acpt Qty",align:"center",render:function(t){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("span",{children:[" ",(0,u.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(t,"acceptedEdit"),children:t.acceptedQty})]})})}},{title:"Bal Qty",align:"center",render:function(e){return(0,u.jsx)("span",{children:e.poItems.poQty-e.acceptedTillDate})}}]},R=r(95316),F=r(2144),k=r(89743),M=r(2677);function D(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}var T=function(e){var t=(0,c.useState)(e.selected?e.selected:{}),r=(0,i.Z)(t,2),n=r[0],a=(r[1],u.Fragment,F.Z,k.Z,M.Z,M.Z,"Enter ".concat(e.selectedItem," Details"),M.Z,(0,c.useState)(e.selected)),s=(0,i.Z)(a,2),o=(s[0],s[1]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(l.Z,{template:{heading:"Enter Accepted Quantity",fields:[{title:"Accepted Qty",type:"text",name:"acceptedQty",contains:"text",validation:"Accepted Quantity is Required",inpprops:{format:"dd/mm/yy"}}]},rowwise:2,validate:D,onSubmit:function(t){e.saveFunction(t),o({})},onCancel:e.onCancel,buttonName:"Save Qty",defaultValues:n})})};function H(){return(0,u.jsx)("div",{})}var B=r(30717),V=function(e,t){return[{title:"Service Description",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.itemName})})}},{title:"Po Quantity",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.poQty})})}},,{title:"Due Date",align:"center",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.dueDate})})}},{title:"Receival Date",align:"center",render:function(t){var r="qty".concat(t.dailyPlanId),n=t.receivedDate;return(0,u.jsx)("span",{children:"Select"==t.status?(0,u.jsx)(B.Z.Group,{children:(0,u.jsx)(B.Z.Control,{type:"date",id:r,name:r,defaultValue:n,onBlur:function(r){return e(r.target.value,t)}})},"plannedQty"):t.receivedDate})}}]},E={margin:"0",padding:"0"},Q={upper:{padding:"0",margin:"0"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0rem 1rem ",borderRadius:"1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0"},simplettl:{height:"3rem",display:"flex",justifyContent:"center",backgroundColor:N.Z.colors.ttle,borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}},O=["acceptedEdit"];var L=function(e){var t=(0,x.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),r=(0,i.Z)(t,3),d=r[0],p=(r[1],r[2],(0,y.ZP)()),m=p.get,h=p.post,j=p.response,b=(p.loading,p.error,(0,x.I0)()),S=(0,c.useState)({}),I=(0,i.Z)(S,2),N=I[0],w=(I[1],(0,c.useState)([{value:"",label:"Select"}])),A=(0,i.Z)(w,2),P=A[0],F=A[1],k=(0,c.useState)([]),M=(0,i.Z)(k,2),D=(M[0],M[1],(0,c.useState)([])),B=(0,i.Z)(D,2),L=B[0],_=B[1],q=(0,c.useState)([]),G=(0,i.Z)(q,2),Y=G[0],U=G[1],z=(0,c.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r,n,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(Z.ZP+"/poItems/loadOptions",{id:e.selectedItem.poId,random:Math.random()});case 2:return r=t.sent,t.next=5,h(Z.ZP+"/grnEntry/listAll",{id:e.selectedItem.poId,random:Math.random()});case 5:return n=t.sent,t.next=8,h(Z.ZP+"/poItems//listAllPoItems",{id:e.selectedItem.poId,random:Math.random()});case 8:o=t.sent,U((0,a.Z)(o)),F([].concat((0,a.Z)(P),(0,a.Z)(r))),_((0,a.Z)(n));case 12:case"end":return t.stop()}}),t)}))),[m,j]),J=(0,c.useState)(Math.random()),K=(0,i.Z)(J,2),W=K[0];K[1],(0,c.useEffect)((function(){z()}),[W]);var $=(0,c.useState)({showForm:!1,selectedForm:"",title:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),X=(0,i.Z)($,2),ee=X[0],te=X[1],re=function(e,t){b(g.I.showAlertHandler({showAlert:!d,alertMessage:e,alertVariant:t}))},ne=function(e,t){return function(){if("acceptedEdit"==t){var r={showForm:!0,selectedForm:(0,u.jsx)(T,{onCancel:oe,selected:e,saveFunction:ae}),selectedItem:{item:e},title:""};te((0,n.Z)((0,n.Z)({},ee),r))}else"approve"==t&&(alert(t),window.confirm(JSON.stringify(e)))}},ae=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=""==t.grnId?"/grnEntry/create":"/grnEntry/update",e.next=3,h(Z.ZP+r,t);case 3:n=e.sent,console.log({returnObject:n}),1==n.retValues.status?n.retValues.grnEntry.grnId>0&&(oe(),re(n.retValues.message,"success")):re(n.retValues.message,"danger");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/poItems/editPoItemStatus",e.next=3,h(Z.ZP+"/poItems/editPoItemStatus",t);case 3:r=e.sent,console.log({returnObject:r}),1==r.retValues.status?r.retValues.poItem.poItemsId>0&&(oe(),re(r.retValues.message,"success")):re(r.retValues.message,"danger");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){te((0,n.Z)((0,n.Z)({},ee),{},{showForm:!1,selectedForm:"",title:"",selectedItem:(0,n.Z)((0,n.Z)({},ee.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))},ie={fields:[{title:"Grn Number",type:"text",name:"grnNumber",contains:"text",validation:"Grn Number is Required",inpprops:{min:1,step:1}},{title:"Received Date",type:"date",name:"receivedDate",contains:"date",validation:"Received Date is Required",inpprops:{}},{title:"Material Name",type:"select",name:"poItemsId",contains:"select",validation:"Material is Required",options:P},{title:"Received Qty",type:"number",name:"receivedQty",contains:"number",validation:"Quantity is Required",inpprops:{}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{md:4,maxLength:512}},{type:"hidden",name:"grnId",contains:"text",value:N.grnId?N.grnId:0}]};return(0,u.jsxs)(u.Fragment,{children:["PO"==e.poType&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(R.Z,(0,n.Z)((0,n.Z)({},e),{},{showFormHandler:ne,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:ee.showForm,onHide:oe,children:[(0,u.jsx)(R.Z.Header,{closeButton:!0,children:ee.title}),(0,u.jsx)(R.Z.Body,{children:ee.selectedForm})]})),(0,u.jsxs)(v.Z,{upper:E,useUpperTwoStyle:!1,title:"Goods Receipt Note Entry",styles:Q,children:[(0,u.jsx)(l.Z,{template:ie,rowwise:3,watchFields:["poId"],validate:function(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")},onSubmit:function(e){console.log(e),ae(e)},onCancel:e.onCancel,buttonName:"Save",styles:Q}),(0,u.jsx)(f.Z,{cols:C(ne,O),data:L})]})]}),"PO"!=e.poType&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(v.Z,{title:"Service Entry",children:[(0,u.jsx)(H,{}),(0,u.jsx)(f.Z,{cols:V((function(e,t){t.status="Closed",t.receivedDate=e,U((function(e){return e.map((function(e){return e.poItemsId===t.poItemsId?t:e}))})),se(t)}),O),data:Y})]})})]})},_=function(e,t){return[{title:"Vendor Name",align:"left",render:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{children:e.supplier.supplierName})})}},{title:"Remarks",align:"left",render:function(e){return(0,u.jsx)("span",{children:e.remarks})}},{title:"Quotes Doc",align:"center",render:function(t){return(0,u.jsx)(p.aBF,{style:{cursor:"pointer"},onClick:e(t)})}}]},q=(r(64802),r(31243),r(28931)),G={upper:{padding:"0"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0 1rem"},uppertitle:{borderBottomLeftRadius:0,borderBottomRightRadius:"0",backgroundColor:N.Z.colors.ttle}};var Y=function(e){var t=(0,y.ZP)({data:[]}),r=t.get,n=t.post,d=t.response,p=(t.loading,t.error,(0,c.useContext)(I.Z).token,(0,c.useState)(e.selectedItem.deliveries?e.selectedItem.deliveries:[])),m=(0,i.Z)(p,2),h=(m[0],m[1],(0,c.useState)(e.selectedItem?e.selectedItem.quantity:1)),v=(0,i.Z)(h,2),j=(v[0],v[1]),g=((0,q.useHistory)(),function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat(Z.mP,"VJPUploads/").concat(t),"_blank","noreferrer");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=(0,c.useState)([]),S=(0,i.Z)(b,2),N=S[0],w=S[1],A=(0,c.useState)([{}]),P=(0,i.Z)(A,2),C=(P[0],P[1],(0,x.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),R=(0,i.Z)(C,3),F=(R[0],R[1],R[2],(0,x.I0)(),(0,c.useCallback)((0,o.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Z.ZP+"/poQuotes/getQuotesById",{id:e.selectedItem.poId,rand:Math.random()});case 2:r=t.sent,console.log(r),r.length>0?w((0,a.Z)(r)):w([]);case 5:case"end":return t.stop()}}),t)}))),[r,d]));(0,c.useEffect)((function(){F()}),[]);var k={heading:"Vendor Quotes",fields:[{title:"Vendor Name",type:"select",name:"supplierId",contains:"Select",options:e.suppliers},{title:"Upload Document",type:"Document",name:"file",contains:"Document",inpprops:{md:4}},{title:"Remarks",type:"textarea",name:"remarks",contains:"textarea",inpprops:{md:4}},{type:"hidden",name:"poId",value:e.selectedItem.poId}]};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{template:k,rowwise:3,watchFields:["quantity"],validate:function(e,t){t.errors,t.setError,t.clearErrors,e[0]>0&&(console.log(e[0]),j(e[0]))},onSubmit:function(t){e.saveFunction(t),console.log(t)},onCancel:e.onCancel,buttonName:"Submit",styles:G}),(0,u.jsx)(f.Z,{cols:_((function(e){return function(){g(e.generatedFileName)}})),data:N})]})},U=(r(10471),r(43090),r(44147));function z(e){return(0,u.jsx)(v.Z,{title:"Select Po Type",children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e.showFormHandler({},"poForm","PO"),children:"Purchase Order"}),(0,u.jsx)(b.Z,{variant:"success",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e.showFormHandler({},"servicePo",[0,1,2,3,4]),children:"Service Purchase Order"}),(0,u.jsx)(b.Z,{variant:"primary",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e.showFormHandler({},"poForm","Jo_Purchase_Order"),children:"Job Order"}),(0,u.jsx)(b.Z,{variant:"danger",style:{cursor:"pointer",marginLeft:"0.1em",marginTop:"10px"},onClick:e.onCancel,children:"Cancel"})]})})}var J=r(22496),K=["poForm","grnEntry","poApproval","viewQuotes"];var W=function(e){var t=(0,y.ZP)({data:[]}),r=t.get,p=t.post,b=t.response,S=(t.loading,t.error,(0,c.useState)([])),I=(0,i.Z)(S,2),N=I[0],w=I[1],A=(0,c.useState)([]),C=(0,i.Z)(A,2),R=C[0],F=C[1],k=(0,c.useState)(Math.random()),M=(0,i.Z)(k,2),D=M[0],T=(M[1],(0,c.useState)(0)),H=(0,i.Z)(T,2),B=(H[0],H[1],(0,c.useState)([{value:"",label:"Select"}])),V=(0,i.Z)(B,2),E=V[0],Q=V[1],O=(0,c.useState)(0),_=(0,i.Z)(O,2),q=_[0],G=_[1],W=(0,c.useState)([{value:"",label:"Select"}]),ee=(0,i.Z)(W,2),te=ee[0],re=ee[1],ne=(0,c.useState)(),ae=(0,i.Z)(ne,2),se=(ae[0],ae[1],(0,x.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]}))),oe=(0,i.Z)(se,3),ie=(oe[0],oe[1],oe[2],(0,x.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),ce=(0,i.Z)(ie,3),le=ce[0],de=(ce[1],ce[2],(0,x.I0)()),pe=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(Z.ZP+"/poMaster/create",t);case 2:e.sent,b.ok?t.poId?(de(j.n.hideModalHandler()),fe("Product Updated Successfully","success")):(de(j.n.hideModalHandler()),fe("Purchase Order Created Succesfully","success")):(de(j.n.hideModalHandler()),fe("Product Details Failed To Save","danger"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(Z.ZP+"/poMaster/createServicePo",t);case 2:e.sent,b.ok?t.poId?(de(j.n.hideModalHandler()),fe("Service Purchase Order Updated Successfully","success")):(de(j.n.hideModalHandler()),fe("Purchase Order Created Succesfully","success")):(de(j.n.hideModalHandler()),fe("Product Details Failed To Save","danger"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e,t){"update"==t&&(console.log("updated from selected"),F(R.map((function(t){return t.purchaseRequestId===e.purchaseRequestId?e:t}))))},he=(0,c.useCallback)((0,o.Z)((0,s.Z)().mark((function e(){var t,n,o,i,c,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(Z.ZP+"/poMaster/listAll",{id:Math.random(),loadTime:Date().toLocaleString()});case 2:return t=e.sent,e.next=5,r(Z.ZP+"/supplier/loadOptions");case 5:return n=e.sent,e.next=8,r(Z.ZP+"/company/loadOptions");case 8:return o=e.sent,console.log(o),e.next=12,p(Z.ZP+"/poMaster/loadReqNo",{random:Math.random()});case 12:i=e.sent,c=(new Date).getFullYear()-2e3,l=(new Date).getMonth()+1,b.ok&&(w(t),Q([].concat((0,a.Z)(E),(0,a.Z)(n))),re([].concat((0,a.Z)(te),(0,a.Z)(o))),l>=4&&G("".concat(c,"/").concat(c+1,"-0000").concat(Number(i)+1)),l<4&&G("".concat(c-1,"/").concat(c,"-0000").concat(Number(i)+1)));case 16:case"end":return e.stop()}}),e)}))),[r,b]);(0,c.useEffect)((function(){he()}),[]);var fe=function(e,t){de(g.I.showAlertHandler({showAlert:!le,alertMessage:e,alertVariant:t}))},ve=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var r,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.orderId,r="/poQuotes/uploadFile",(n=new FormData).append("file",t.file[0]),n.append("poId",t.poId),n.append("supplierId",t.supplierId),n.append("remarks",t.remarks),console.log(r),e.next=9,p(Z.ZP+r,n);case 9:a=e.sent,console.log(a),1==a.retValues.status?(t.poId||a.retValues.order.orderId>0)&&(de(j.n.hideModalHandler()),fe(a.retValues.message,"success")):(de(j.n.hideModalHandler()),fe(a.retValues.message,"danger"));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat(Z.mP,"Generated/").concat(t),"_blank","noreferrer");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Supplier",type:"select",name:"department",contains:"Select",options:E},{title:"PR Status",type:"select",name:"status",contains:"Select",options:[{value:"Select",label:"Select"},{value:"Requested",label:"Requested"},{value:"Approved",label:"Approved"},{value:"PO_Generated",label:"Po Generated"},{value:"Closed",label:"Closed"}]}]},ge=function e(t,r,a){return function(){"add"===r?de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(z,{showFormHandler:e,onCancel:function(){return de(j.n.hideModalHandler())}})}),showModal:!0})):"poForm"===r&&de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(U.default,{poType:a,suppliers:E,company:te,selectedItems:t.poItems,selectedItem:t,saveFunction:pe,updateItems:me,onCancel:function(){return de(j.n.hideModalHandler())},loadState:D,reqNo:q})}),showModal:!0})),"servicePo"===r?de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(J.default,{suppliers:E,company:te,selectedItems:t.poItems,selectedItem:t,saveFunction:ue,updateItems:me,onCancel:function(){return de(j.n.hideModalHandler())},loadState:D,reqNo:q})}),showModal:!0})):"grnEntry"===r?de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(L,{poType:a,onCancel:function(){return de(j.n.hideModalHandler())},selectedItem:(0,n.Z)({},t),saveFunction:ve}),showModal:!0})):"viewPo"===r?xe(t.fileName):"poApproval"===r?de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(P,{onCancel:function(){return de(j.n.hideModalHandler())},selectedItem:(0,n.Z)({},t),saveFunction:ve}),showModal:!0})):"viewQuotes"===r&&de(j.n.showModalHandler({selectedData:(0,n.Z)({},t),selectedForm:(0,u.jsx)(Y,{onCancel:function(){return de(j.n.hideModalHandler())},selectedItem:(0,n.Z)({},t),saveFunction:ve,suppliers:E}),showModal:!0}))}};return(0,u.jsxs)("div",{className:h,children:[(0,u.jsx)(d.Z,{title:"Purchase Order Search",onHeaderClick:ge({},"add",[0,1,2,3,4]),bottonShow:!0,children:(0,u.jsx)(l.Z,{template:je,rowwise:4,validate:X,onSubmit:$,onCancel:e.onCancel,buttonName:"Search"})}),(0,u.jsx)(v.Z,{md:12,children:(0,u.jsx)(f.Z,{cols:m(ge,K),data:N,rows:10})})]})};function $(e){console.log(e)}function X(e,t){var r=t.errors,n=t.setError,a=t.clearErrors;"Admin"===e.firstname?r.firstname||n("firstname",{type:"manual",message:"You cannot use this first name"}):r.firstname&&"manual"===r.firstname.type&&a("firstname")}},10471:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});r(72791);var n=r(43090),a=r(88311),s=r(80184);var o=function(e){var t=n.mM.create({row1:{border:"1pt",borderColor:"#000",borderStyle:"solid",height:"10vh",flexDirection:"row",display:"flex"},colLogo:{width:20,height:70,borderRight:"1pt",borderColor:"#000",borderStyle:"solid",paddingTop:"3vh",flex:1},colCompanyDetails:{width:"100%"},colCompanyDetailsPre:{},bold:{fontWeight:"600",textAlign:"center"},l1:{fontSize:"1.5"},l2:{fontSize:"1"}});return(0,s.jsxs)(n.G7,{style:t.row1,children:[(0,s.jsx)(n.Ee,{src:a,style:" ".concat(t.colLogo)}),(0,s.jsxs)(n.G7,{style:"".concat(t.colCompanyDetails),children:[(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"VEE J PEE Aluminium Foundry Private Limited"}),"\n",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l2),children:"Registered Office:"})," No. 9, Sowripalayam Road, Opposite Sujini Mills, Coimbatore 641 028",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"Factory:"})," SF No 162/2A 12 East, Chennappa Chetty Pudur Post, Padhuvampalli Village, Coimbatore 641 659, Tamil Nadu Phone: +91 422 2319777, Fax: +91 422 2314000, Email: purchase@vjp.in",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"PAN:"})," AACCV7072Q    ",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"GSTIN:"})," 33AACCV7072Q1ZR",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"CIN:"})," U26999TZ2002PTC010140",(0,s.jsx)(n.xv,{style:"".concat(t.bold," ").concat(t.l1),children:"Service Purchase Order"})]})]})},i=n.mM.create({page:{backgroundColor:"#fff",fontFamily:"Helvetica",fontSize:11,paddingTop:20,paddingLeft:40,paddingRight:40,lineHeight:1.5}}),c=function(e){return(0,s.jsx)(n.BB,{children:(0,s.jsx)(n.T3,{size:"A4",style:i.page,children:(0,s.jsx)(o,{})})})};var l=function(e){return(0,s.jsx)(n.Z$,{width:800,height:500,showToolbar:!1,children:(0,s.jsx)(c,{})})}},88311:function(e,t,r){"use strict";e.exports=r.p+"static/media/VJPLogo.acff4dc2a5291b2ab331.jpg"},42480:function(){},24654:function(){}}]);
//# sourceMappingURL=6600.442b3df0.chunk.js.map