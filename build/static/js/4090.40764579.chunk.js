(self.webpackChunkcosting=self.webpackChunkcosting||[]).push([[4090,1650,1057],{21216:function(e,t){"use strict";t.Z={colors:{dg:"#fafafa",dgc:"#f0f0f0",primary:"#007bff",secondary:"#6c757d",cardbody:"#E8F7F2",yllw:"yellow",simcard:"#170462",blk:"black",ttle:"#170462"},margins:{mg0:"0",mg1:"1rem",mg:".5rem .5rem 0 .5rem",mgt:".2rem .0rem"},paddings:{pd0:"0,",pd1:"1rem",pd:"0 1rem 0 1rem",pdc:"0 1.5rem"}}},23118:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(1413),a=n(70885),l=n(4942),o=n(72791),s={tableBody:"table_tableBody__NaJhZ"},c=n(89743),i=n(2677),d=n(89983),u=(n(77632),n(79836)),p=n(53382),m=n(68745),f=n(90618),h=n(39281),y=n(65136),Z=n(35855),g=n(35527),v=n(56890),x=n(40724),b=n(80184),j=function(e){var t=e.value,n=e.onChange;return(0,b.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:function(e){return n(e.target.value)}})},S=(0,x.ZP)(m.Z)((function(e){var t,n=e.theme;return t={},(0,l.Z)(t,"&.".concat(f.Z.head),{backgroundColor:"rgb(0, 92, 185);",color:n.palette.common.white,border:"1px solid #B1BFC3"}),(0,l.Z)(t,"&.".concat(f.Z.body),{fontSize:16,backgroundColor:"#f2f2f2",border:"1px solid #B1BFC3"}),t})),P=(0,x.ZP)(Z.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover,borderBottom:"1px solid #B1BFC3"},"&:last-child td, &:last-child th":(0,l.Z)({border:0},"border","1px solid #B1BFC3")}})),w=function(e){var t=e.cols,n=e.data,l=e.rows,m=(e.loadDataonPageChange,e.counts,e.className),f=e.includeCheck,x=e.checkBoxEvent,w=e.value,I=e.onChange,F=e.styles,k=o.useState(0),C=(0,a.Z)(k,2),N=C[0],Q=C[1],D=o.useState(l||10),M=(0,a.Z)(D,2),E=M[0],_=M[1],A=o.useState(l<10?[5,10,25,50,100]:[10,25,50,100]),R=(0,a.Z)(A,2),B=R[0],V=(R[1],N>0&&Math.max(0,(1+N)*E-n.length),"undefined"===typeof F?{}:F),H="center";return(0,b.jsx)(d.Pd.Provider,{value:{color:"#6495ED"},children:(0,b.jsx)(c.Z,{className:"".concat(s.tableContainer," ").concat(m),style:(0,r.Z)((0,r.Z)({},null===V||void 0===V?void 0:V.tablehead),null!==V&&void 0!==V&&V.tablehead?{}:{background:"transparent"}),children:(0,b.jsx)(g.Z,{className:s.tableContainer,children:(0,b.jsxs)(h.Z,{className:s.tableStyles,children:[(0,b.jsxs)(c.Z,{className:"justify-content-center align-items-center",style:{backgroundColor:"white",padding:"0 10px 0 10px"},children:[void 0!==w&&I&&(0,b.jsx)(i.Z,{children:(0,b.jsx)(j,{value:w,onChange:I})}),(0,b.jsx)(i.Z,{children:l&&(0,b.jsx)(y.Z,{sx:{padding:"0px",margin:"0px",".MuiTablePagination-selectLabel":{margin:"0px"},".MuiTablePagination-displayedRows":{margin:"0px"}},rowsPerPageOptions:B,component:"div",count:n.length,rowsPerPage:E,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},page:N,onPageChange:function(e,t){Q(t)},onRowsPerPageChange:function(e){_(+e.target.value),Q(0)},className:s.pagination})})]}),(0,b.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},null===V||void 0===V?void 0:V.table),null!==V&&void 0!==V&&V.table?{}:{background:"transparent"}),className:s.tableBody,children:[(0,b.jsxs)(u.Z,{stickyHeader:!0,className:"table table-bordered table-striped ".concat(s.table),children:[(0,b.jsxs)(v.Z,{children:["                ",(0,b.jsxs)(Z.Z,{children:[f&&(0,b.jsx)(S,{align:H,children:(0,b.jsx)("input",{type:"checkbox"})}),(0,b.jsx)(S,{align:H,children:"S.No"}),t.map((function(e,t){return(0,b.jsx)(S,{align:H,children:e.title},t)}))]})]}),n&&(0,b.jsx)(p.Z,{children:n.slice(N*E,N*E+E).map((function(e,n){return(0,b.jsxs)(P,{children:[f&&(0,b.jsx)(S,{align:H,children:(0,b.jsx)("input",{type:"checkbox",onClick:function(t){x(e,t.target.checked)}})}),(0,b.jsx)(S,{children:N*E+n+1}),t.map((function(t,n){return(0,b.jsx)(S,{align:t.align,className:t.hover&&s.hoverclass,children:t.render(e)},n)}))]},n++)}))})]})," "]})]})})})})};w.defaultProps={bordered:!0,hoverable:!1,striped:!1,isDark:!1};var I=w},46844:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(1413),a=(n(72791),n(38595),n(2144)),l=n(89743),o=n(2677),s=n(43360),c="SearchCard_card__Dzf+K",i="SearchCard_cardHeader__QVtAN",d="SearchCard_cardBody__Yd43+",u="SearchCard_addButton__iMTZ7",p=n(80184);var m=function(e,t){var n="undefined"===typeof e.styles?{}:e.styles;return(0,p.jsxs)(a.Z,{className:c,style:(0,r.Z)((0,r.Z)({},n.search),n.search?{}:{background:"transparent"}),children:[(0,p.jsx)(a.Z.Header,{className:i,children:(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(o.Z,{xs:12,md:e.bottonShow?{span:12}:{span:5,offset:3},className:"d-flex justify-content-center",children:(0,p.jsx)("h4",{children:e.title})}),(0,p.jsx)(o.Z,{xs:12,md:4,className:"d-flex justify-content-end",children:!e.bottonShow&&(0,p.jsx)(s.Z,{variant:"primary",className:u,onClick:e.onHeaderClick,children:e.buttonName})})]})}),(0,p.jsx)(a.Z.Body,{className:d,children:e.children})]})}},51456:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ae}});var r=n(1413),a=n(74165),l=n(42982),o=n(15861),s=n(70885),c=n(72791),i=n(60057),d=n(46844),u=(n(78431),n(99355)),p=n(21229),m=n(30717),f=n(80184),h=function(e,t,n,r,a){return[{title:"planDate",align:"center",render:function(e){return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("span",{children:e.planDate})})}},{title:"Shift",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.shift})}},{title:"Process",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.productProcessMap.process.processName})}},{title:"Order",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.order.orderNo})}},{title:"Product Code",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.order.product.internalPartCode})}},{title:"Product",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.order.product.productName})}},{title:"Available Qty",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.availableStock})}},{title:"Planed Qty",align:"left",render:function(t){var n="qty".concat(t.dailyPlanId),r=t.planQty;return(0,f.jsx)("span",{children:(0,f.jsx)(m.Z.Group,{children:(0,f.jsx)(m.Z.Control,{type:"text",id:n,name:n,defaultValue:r,onBlur:function(n){return e("planedQty",n.target.value,t)}})},"plannedQty")})}},{title:"Remarks",align:"left",render:function(t){var n="remarks".concat(t.dailyPlanId),r=t.remarksForProd;return(0,f.jsx)("span",{children:(0,f.jsx)(m.Z.Group,{children:(0,f.jsx)(m.Z.Control,{type:"text",id:n,name:n,onBlur:function(n){return e("remarks",n.target.value,t)},defaultValue:r})},"remarks")})}}]},y=n(23118),Z=n(21216),g={upper:{padding:"0",margin:"0",borderRadius:"0px"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0"},uppertitle:{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",backgroundColor:Z.Z.colors.ttle},table:{padding:"1rem"}};var v=function(e){var t=(0,p.ZP)({data:[]}),n=(t.get,t.post),d=(t.response,t.loading,t.error,(0,c.useState)([{value:"",label:"Select"}])),m=(0,s.Z)(d,2),Z=m[0],v=m[1],x=(0,c.useState)([{value:"",label:"Select"}]),b=(0,s.Z)(x,2),j=b[0],S=(b[1],{heading:"Production Plan Entry",fields:[{title:"Plan Date",type:"date",name:"planDate",contains:"date",validationProps:"Plan Date is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Shift",type:"select",name:"shift",contains:"Select",options:[{value:"",label:"Select"},{value:"Shift_1",label:"Shift 1"},{value:"Shift_2",label:"Shift 2"},{value:"Shift_3",label:"Shift 3"},{value:"All",label:"All"}]},{title:"Department",type:"select",name:"departmentId",contains:"Select",options:[{value:"1",label:"Foundry"},{value:"2",label:"Quality"},{value:"3",label:"Machining"},{value:"4",label:"Others"}]},{title:"Process Name",type:"select",name:"processId",contains:"Select",options:Z}]}),P=(0,c.useState)({planDate:"",shift:"",departmentId:"",processId:""}),w=(0,s.Z)(P,2),I=w[0],F=w[1],k=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(u.ZP+"/dailyPlan/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=(0,c.useState)([]),N=(0,s.Z)(C,2),Q=N[0],D=N[1],M=(0,c.useState)(e.selectedItem?e.selectedItem.quantity:1),E=(0,s.Z)(M,2),_=(E[0],E[1],(0,c.useState)({})),A=(0,s.Z)(_,2),R=A[0],B=A[1],V=(0,c.useState)([{value:"",label:"Select"}]),H=(0,s.Z)(V,2),q=(H[0],H[1],function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,o){var s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("loading Products"),console.log(I),s="All"===o?"/monthlyPlan/dailyplans":"/monthlyPlan/dailyplansShiftWise",null==t&&""==t){e.next=9;break}return e.next=6,n(u.ZP+s,{id:t,reqDate:r,shift:o,random:Math.random()});case 6:c=e.sent,console.log(c),500==c.status||c.length<1?D([]):(console.log(c),D([]),D((0,l.Z)(c)));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),O=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,n(u.ZP+"/process/loadprocess",{id:t});case 3:r=e.sent,console.log(r),v([].concat((0,l.Z)(j),(0,l.Z)(r)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){O(1)}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{template:S,rowwise:3,watchFields:["planDate","shift","departmentId","processId"],validate:function(e,t){t.errors,t.setError,t.clearErrors,console.log(e),e[0]!=I.planDate?(F((function(t){return(0,r.Z)((0,r.Z)({},t),{},{planDate:e[0]})})),""!=e[1]&""!=e[3]&I.planDate!=e[0]&&(D([]),q(e[3],e[0],e[1]))):e[1]!=I.shift?""!=e[0]&""!=e[3]&I.shift!=e[1]&&(F((function(t){return(0,r.Z)((0,r.Z)({},t),{},{shift:e[1]})})),D([]),q(e[3],e[0],e[1])):e[2]!=I.departmentId?(F((function(t){return(0,r.Z)((0,r.Z)({},t),{},{departmentId:e[2]})})),O(e[2])):e[3]!=I.processId&&(console.log(e),""!=e[1]&""!=e[0]&I.processId!=e[3]&&(F((function(t){return(0,r.Z)((0,r.Z)({},t),{},{processId:e[3]})})),D([]),q(e[3],e[0],e[1]))),console.log(I)},onSubmit:function(e){q(e.processId,e.planDate,e.shift),console.log(e),B((function(e){return(0,r.Z)({},I)}))},onCancel:e.onCancel,defaultValues:R,buttonName:"",styles:g}),"  ",(0,f.jsx)(y.Z,{data:Q,cols:h((function(e,t,n){"planedQty"===e?(n.planQty=t,k(n)):(n.remarksForProd=t,k(n))}),"",[6,5]),rows:10,styles:g})]})},x=function(e,t){return[{title:"Plan Date",align:"center",render:function(e){return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("span",{children:e.planDate})})}},{title:"Shift",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.shift})}},{title:"Customer Name",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.order.product.customer.name})}},{title:"Product",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.order.product.productName})}},{title:"Process",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.productProcessMap.process.processName})}},{title:"Planed Qty",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.planQty})}},{title:"Produced Qty",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.producedQty})}},{title:"Plan Remarks",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.remarksForProd})}},{title:"Production Remarks",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.remarksAfterProd})}}]},b="orders_container__SQ7t+",j="orders_btn__rM0x7",S=n(79747),P=n(89743),w=n(43360),I=n(59434),F=n(34476),k=n(4349);n(99607),n(79704),n(73317),n(38595),n(97829);var C=function(e,t,n,r){return[{title:"Shift",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.shift})}},{title:"Order",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.order.orderNo})}},{title:"Product Code",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.order.product.internalPartCode})}},{title:"Product",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.order.product.productName})}},{title:"Available Qty",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.availableStock})}},{title:"Remarks",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.remarksForProd})}},{title:"Planned Qty",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.planQty})}},{title:"Produced Qty",align:"left",render:function(t){var a="qty".concat(t.dailyPlanId);return(0,f.jsx)("span",{children:n?(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:r(t,"FurnanceForm"),children:t.producedQty}):t.producedQty>0?(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:r(t,"EditEntry"),children:t.producedQty}):(0,f.jsx)(m.Z.Group,{children:(0,f.jsx)(m.Z.Control,{type:"text",id:a,name:a,defaultValue:t.producedQty,onBlur:function(n){return e("producedQty",n.target.value,t)}})},"producedQty")})}},{title:"Remarks",align:"left",render:function(t){var n="remarks".concat(t.dailyPlanId);return(0,f.jsx)("span",{children:(0,f.jsx)(m.Z.Group,{children:(0,f.jsx)(m.Z.Control,{type:"text",id:n,name:n,onBlur:function(n){return e("remarks",n.target.value,t)},defaultValue:t.remarksAfterProd})},"remarks")})}}]};var N=n(95316);var Q=n(2144),D=n(2677),M="dailyentry_title__HjvKY",E=n(23853),_=function(e){return[{title:"Entry Date",align:"Center",render:function(e){return(0,f.jsx)("span",{children:e.entryDate})}},{title:"Shift",align:"Center",render:function(e){return(0,f.jsx)("span",{children:e.shift})}},{title:"Heat No",align:"left",render:function(e){return(0,f.jsx)("span",{children:e.meltingEntry.heatNo})}},{title:"SerielNo From",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.serielNofrom})}},{title:"SerielNo To",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.serielNoTo})}},{title:"Quantity",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.quantity})}},{title:"Edit",align:"center",render:function(t){return(0,f.jsx)(E.vPQ,{style:{cursor:"pointer"},onClick:e(t,"edit")})}}]};var A=function(e){var t=(0,I.I0)(),n=(0,c.useState)({}),d=(0,s.Z)(n,2),m=(d[0],d[1],(0,I.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),h=(0,s.Z)(m,3),Z=h[0],g=(h[1],h[2],(0,p.ZP)({data:[]})),v=(g.get,g.post),x=g.response,b=(g.loading,g.error,(0,c.useState)({stock:0,produced:0})),j=(0,s.Z)(b,2),w=j[0],F=(j[1],(0,c.useState)("Not Available")),C=(0,s.Z)(F,2),N=C[0],E=(C[1],(0,c.useState)()),A=(0,s.Z)(E,2),R=A[0],B=A[1],V=(0,c.useState)([{}]),H=(0,s.Z)(V,2),q=H[0],O=H[1],T=(0,c.useState)(""),G=(0,s.Z)(T,2),L=G[0],Y=G[1],K=(0,c.useState)(Math.random()),W=(0,s.Z)(K,2),z=W[0],J=W[1],U=(0,c.useState)(e.orderQty),X=(0,s.Z)(U,2),$=X[0],ee=X[1],te=(0,c.useCallback)((0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(u.ZP+"/castingEntry/allEntries",{orderId:e.selectedItem.orderId,prodProcMapId:e.selectedItem.prodProcMapId,entryDate:e.date,loadStateid:z});case 2:n=t.sent,console.log((0,r.Z)({},n)),x.ok&&n.retValues.latestEntries&&B((0,l.Z)(n.retValues.latestEntries)),console.log(n.retValues.prodStock.producedQuantity),ee($);case 7:case"end":return t.stop()}}),t)}))),[v,x,z]);(0,c.useEffect)((function(){te()}),[te]);var ne=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r){var l,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=r.entryId?"/castingEntry/update":"/castingEntry/create",console.log(l),console.log(r),n.next=5,v(u.ZP+l,r);case 5:o=n.sent,console.log(o),1==o.retValues.status?(r.entryId||o.retValues.prodEntry.entryId>0)&&(B((function(e){return[o.retValues.prodEntry]})),J(Math.random()),console.log(z),e.saveProduced(e.selectedItem)):(a=o.retValues.message,s="danger",t(k.I.showAlertHandler({showAlert:!Z,alertMessage:a,alertVariant:s})));case 8:case"end":return n.stop()}var a,s}),n)})));return function(e){return n.apply(this,arguments)}}(),re=(0,c.useState)(),ae=(0,s.Z)(re,2),le=ae[0],oe=ae[1],se=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Q.Z,{body:!0,className:M,children:(0,f.jsx)(P.Z,{children:(0,f.jsxs)(D.Z,{md:{span:6,offset:3},children:[" ",(0,f.jsxs)("h4",{children:["Casting Entry - ",e.productName]})," "]})})})}),ce={fields:[{title:"Furnance",type:"select",name:"furnace",contains:"Select",options:[{value:"",label:"Select"},{value:"Furnance_A",label:"Furnace A"},{value:"Furnance_B",label:"Furnace B"},{value:"Furnance_C",label:"Furnace C"},{value:"Furnance_D",label:"Furnace D"},{value:"Furnance_E",label:"Furnace E"},{value:"Furnance_F",label:"Furnace F"},{value:"Furnance_J",label:"Furnace J"},{value:"Furnance_K",label:"Furnace K"},{value:"Furnance_L",label:"Furnace L"},{value:"Furnance_M",label:"Furnace M"},{value:"Furnance_N",label:"Furnace N"},{value:"Furnance_O",label:"Furnace O"},{value:"Furnance_P",label:"Furnace P"}]},{title:"Heat Code",type:"select",name:"meltingEntryId",contains:"Select",options:q},{title:"Production Qty",type:"number",name:"quantity",contains:"number",inpprops:{min:1,step:1,max:$-w.produced}},{title:"Serial No From",type:"text",name:"serielNofrom",contains:"text",inpprops:{min:3,max:50}},{title:"Serial No To",type:"text",name:"serielNoTo",contains:"text",inpprops:{min:3,max:50}},{type:"hidden",name:"orderId",contains:"number",value:e.selectedItem.orderId},{type:"hidden",name:"prodProcMapId",contains:"number",value:e.selectedItem.prodProcMapId},{title:"Date",type:"hidden",name:"entryDate",contains:"date",validation:"Date is Required",inpprops:{format:"dd/mm/yy"},value:e.date},{title:"Shift",type:"hidden",name:"shift",value:e.shift},{title:"Heat No",type:"hidden",name:"heatNo",contains:"text",value:N}]};return(0,f.jsxs)(f.Fragment,{children:[se,(0,f.jsx)(i.Z,{template:ce,watchFields:["furnace"],rowwise:3,validate:function(t,n){var r;n.errors,n.setError,n.clearErrors;""!=t[0]&&t[0]!=L&&(console.log(t[0]),Y(t[0]),(r=t[0],(0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(u.ZP+"/meltEntry/getHeatNoByDate",{MeltingDate:e.date,furnace:r});case 2:n=t.sent,console.log(n),O([{value:"0",label:"Select"}].concat((0,l.Z)(n)));case 5:case"end":return t.stop()}}),t)}))))())},onSubmit:function(e){console.log(e),ne(e)},onCancel:e.onCancel,buttonName:"Add",defaultValues:le}),(0,f.jsx)(S.Z,{children:(0,f.jsx)(y.Z,{cols:_((function(e,t){return function(){"edit"===t&&oe((0,r.Z)({},e))}})),data:R})})]})};function R(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var B=function(e){var t=(0,I.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),n=(0,s.Z)(t,3),r=n[0],a=(n[1],n[2],(0,I.I0)()),l={heading:"Edit Production Quantity",fields:[{title:"Old Qty",type:"disabled",name:"oldEntry",contains:"disabled",value:e.selectedItem.producedQty},{title:"New Qty",type:"number",name:"editedQty",contains:"number",inpprops:{step:1,max:Number(e.selectedItem.producedQty)+Number(e.selectedItem.availableStock)}}]};return(0,f.jsx)(Q.Z,{children:(0,f.jsx)(i.Z,{template:l,rowwise:2,validate:R,onSubmit:function(t){if(Number(t.editedQty)-Number(e.selectedItem.producedQty)>Number(e.selectedItem.availableStock))l="Produced Qty cannot be greater than Avail Stock",o="success",a(k.I.showAlertHandler({showAlert:!r,alertMessage:l,alertVariant:o}));else{var n=e.selectedItem.producedQty;e.selectedItem.producedQty=t.editedQty,e.selectedItem.availableStock=e.selectedItem.availableStock-(t.editedQty-n),e.saveFunction(e.selectedItem)}var l,o},onCancel:e.onCancel,buttonName:"Save"})})},V={upper:{padding:"0",margin:"0",borderRadius:"0px"},upperRow:{margin:".5rem .5rem 0 .5rem",padding:"0"},uppertitle:{borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",backgroundColor:Z.Z.colors.ttle},table:{padding:"1rem"}};var H=function(e){var t=(0,I.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]})),n=(0,s.Z)(t,3),d=n[0],m=(n[1],n[2],(0,I.I0)()),h=(0,c.useState)({showForm:!1,selectedForm:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),Z=(0,s.Z)(h,2),g=Z[0],v=Z[1],x=(0,p.ZP)({data:[]}),b=(x.get,x.post),j=x.response,S=(x.loading,x.error,(0,c.useState)(!1)),P=(0,s.Z)(S,2),w=P[0],F=P[1],Q=(0,c.useState)([{value:"",label:"Select"}]),D=(0,s.Z)(Q,2),M=D[0],E=D[1],_={heading:"Production Entry",fields:[{title:"Plan Date",type:"date",name:"planDate",contains:"date",validationProps:"Plan Date No is required",inpprops:{format:"dd/mm/yyyy"}},{title:"Shift",type:"select",name:"shift",contains:"Select",options:[{value:"",label:"Select"},{value:"Shift_1",label:"Shift 1"},{value:"Shift_2",label:"Shift 2"},{value:"Shift_3",label:"Shift 3"},{value:"All",label:"All"}]},{title:"Department",type:"select",name:"departmentId",contains:"Select",options:[{value:"1",label:"Foundry"},{value:"2",label:"Quality"},{value:"3",label:"Machining"},{value:"4",label:"Others"}]},{title:"Process Name",type:"select",name:"processId",contains:"Select",options:M}]},R=(0,c.useState)({planDate:"",shift:"",departmentId:"1",processId:"15"}),H=(0,s.Z)(R,2),q=H[0],O=H[1],T=(0,c.useState)([]),G=(0,s.Z)(T,2),L=G[0],Y=G[1],K=(0,c.useState)(e.selectedItem?e.selectedItem.quantity:1),W=(0,s.Z)(K,2),z=(W[0],W[1],(0,c.useState)([{value:"",label:"Select"}])),J=(0,s.Z)(z,2),U=(J[0],J[1],function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,b(u.ZP+"/dailyPlan/updateProduction",t);case 3:e.sent,ne();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,b(u.ZP+"/dailyPlan/update",t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,b(u.ZP+"/process/loadprocess",{id:t});case 3:n=e.sent,console.log(n),n.length>0?E([{value:"",label:"Select"}].concat((0,l.Z)(n))):E([{value:"",label:"Select"}]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){$(1)}),[]);var ee=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(u.ZP+"/dailyPlan/findProduced",t);case 2:n=e.sent,console.log(n),j.ok&&Y((function(e){return e.map((function(e){return e.dailyPlanId===n.dailyPlanId?n:e}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return function(){if("FurnanceForm"==t){var n={showForm:!0,selectedForm:(0,f.jsx)(A,{onCancel:ne,selectedItem:e,productName:e.order.product.productName,date:e.planDate,shift:e.shift,saveProduced:ee}),selectedItem:(0,r.Z)({},e)};v((0,r.Z)((0,r.Z)({},g),n))}else if("EditEntry"==t){var a={showForm:!0,selectedForm:(0,f.jsx)(B,{onCancel:ne,selectedItem:e,productName:e.order.product.productName,date:e.planDate,shift:e.shift,saveFunction:U}),selectedItem:(0,r.Z)({},e)};v((0,r.Z)((0,r.Z)({},g),a))}}},ne=function(){v((0,r.Z)((0,r.Z)({},g),{},{showForm:!1,selectedForm:"",selectedItem:(0,r.Z)((0,r.Z)({},g.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))},re=function(e,t,n){if("producedQty"===e)if(Number(t)>Number(n.availableStock))a="Produced Qty cannot be greater than Avail Stock",l="success",m(k.I.showAlertHandler({showAlert:!d,alertMessage:a,alertVariant:l})),n.producedQty=0;else{var r=n.producedQty;n.producedQty=t,n.availableStock=n.availableStock-(t-r),U(n)}else n.remarksAfterProd=t,X(n);var a,l},ae=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var l,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading Products"),l="All"==r?"/dailyPlan/dailyPlansByDate":"/dailyPlan/dailyPlans",e.next=4,b(u.ZP+l,{id:t,reqDate:n,shift:r,random:Math.random()});case 4:o=e.sent,console.log(o),500==o.status||o.length<1?Y([]):(Y(o),se((0,f.jsx)(f.Fragment,{children:(0,f.jsx)(y.Z,{data:L,cols:C(re,"",w,te),rows:10})})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),le=(0,c.useState)((0,f.jsx)(f.Fragment,{})),oe=(0,s.Z)(le,2),se=(oe[0],oe[1]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(N.Z,{size:"xl",show:g.showForm,onHide:ne,children:[(0,f.jsx)(N.Z.Header,{closeButton:!0,children:(0,f.jsx)(N.Z.Title,{})}),(0,f.jsx)(N.Z.Body,{children:g.selectedForm})]}),(0,f.jsx)(i.Z,{template:_,rowwise:3,watchFields:["planDate","shift","departmentId","processId"],validate:function(e,t){t.errors,t.setError,t.clearErrors;console.log(e),e[0]!=q.planDate?(""!=e[1]&""!=e[3]&&(Y([]),ae(e[3],e[0],e[1])),O((function(t){return(0,r.Z)((0,r.Z)({},t),{},{planDate:e[0]})}))):e[1]!=q.shift?(""!=e[0]&""!=e[3]&&(Y([]),ae(e[3],e[0],e[1])),O((function(t){return(0,r.Z)((0,r.Z)({},t),{},{shift:e[1]})}))):e[2]!=q.departmentId?($(e[2]),O((function(t){return(0,r.Z)((0,r.Z)({},t),{},{departmentId:e[2]})}))):e[3]!=q.processId&&(console.log(e),"15"===e[3]?F(!0):F(!1),""!=e[1]&""!=e[0]&&(Y([]),ae(e[3],e[0],e[1])),O((function(t){return(0,r.Z)((0,r.Z)({},t),{},{processId:e[3]})}))),console.log(q)},onSubmit:function(e){},onCancel:e.onCancel,buttonName:"Submit",defaultValues:e.selectedItem,styles:V,btButtons:L&&(0,f.jsxs)("div",{style:{padding:"0 2rem 0 2rem"},children:[(0,f.jsx)(y.Z,{data:L,cols:C(re,"",w,te),rows:10})," "]})})]})},q=[{id:1,RmGrade:"RM32454343",Alloy:"60",Runner:"20",Qty:"4 kgs",type:"Ingots",tQty:"80 kgs"},{id:2,RmGrade:"TM3434322",Qty:"2 kgs",Alloy:"30",Runner:"10",type:"Ingots",tQty:"40 kgs"},{id:3,RmGrade:"LM4354545",Qty:"1 kgs",type:"Consumable",tQty:"20 kgs"},{id:4,RmGrade:"YU32454343",Qty:"3 kgs",type:"Consumable",tQty:"60 kgs"},{id:5,RmGrade:"EF32454343",Qty:"2 kgs",type:"Consumable",tQty:"40 kgs"}],O=function(e,t){return[{title:"Raw Material",align:"center",render:function(n){var r=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(n,t[1]),children:n.RmGrade}),(0,f.jsx)("br",{}),(0,f.jsxs)("p",{children:["Alloy-",n.Alloy," \xa0 Runner-",n.Runner]})]});return(0,f.jsxs)(f.Fragment,{children:[" ","Ingots"=="".concat(n.type)?r:(0,f.jsx)("span",{children:n.RmGrade})]})}},{title:"Type",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.type})}},{title:"Unit Quantity",align:"center",render:function(e){return(0,f.jsx)("span",{children:e.Qty})}},{title:"Today Requiremnet",align:"center",render:function(n){var r=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:e(n,t[2]),children:n.tQty})});return(0,f.jsxs)(f.Fragment,{children:[" ","Ingots"=="".concat(n.type)?r:(0,f.jsx)("span",{children:n.tQty})]})}}]},T="rmentry_tableCon__K8He-",G="rmentry_btn__NeayR",L="rmentry_buttCon__hwUcL";function Y(e){console.log(e)}function K(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var W=function(e){return(0,f.jsx)(Q.Z,{children:(0,f.jsx)(i.Z,{template:{heading:"Enter Raw Material Details",fields:[{title:"Date",type:"date",name:"date",contains:"date",validation:"Date is Required",dateprops:{format:"dd/mm/yy"}},{title:"Type",type:"select",name:"furnance",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Alloy Ingots"},{value:2,label:"Runners"},{value:3,label:"Consumables"},{value:4,label:"GDC General"}]},{title:"Raw Material",type:"select",name:"furnance",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Steel grade001"},{value:0,label:"Aluminium grade002"},{value:0,label:"Iron Ore grade001"},{value:0,label:"Potash grade001"},{value:0,label:"Nitro grade001"}]},{title:"Weight",type:"number",name:"Qty1",contains:"number",numprops:{min:.1,step:.5}}]},rowwise:2,validate:K,onSubmit:Y,onCancel:e.onCancel,buttonName:"Add"})})};function z(e){console.log(e)}function J(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var U=function(e){return(0,f.jsx)(Q.Z,{children:(0,f.jsx)(i.Z,{template:{heading:"Enter Alloy/Runner Splitup",fields:[{title:"Alloy Wgt(kgs)",type:"number",name:"Qty1",contains:"number",inpprops:{min:50,step:2}},{title:"Runner Wgt(kgs)",type:"number",name:"Qty1",contains:"number",inpprops:{min:50,step:2}}]},rowwise:2,validate:J,onSubmit:z,onCancel:e.onCancel,buttonName:"Save"})})};function X(e){console.log(e)}function $(e,t){var n=t.errors,r=t.setError,a=t.clearErrors;"Admin"===e.firstname?n.firstname||r("firstname",{type:"manual",message:"You cannot use this first name"}):n.firstname&&"manual"===n.firstname.type&&a("firstname")}var ee=function(e){return(0,f.jsx)(Q.Z,{children:(0,f.jsx)(i.Z,{template:{heading:"Select Alternate Alloy",fields:[{title:"Alternate Alloys",type:"select",name:"furnance",contains:"Select",options:[{value:"",label:"Select"},{value:1,label:"Steel grade001"},{value:0,label:"Aluminium grade002"},{value:0,label:"Iron Ore grade001"},{value:0,label:"Potash grade001"},{value:0,label:"Nitro grade001"}]}]},rowwise:2,validate:$,onSubmit:X,onCancel:e.onCancel,buttonName:"Save"})})},te={search:{padding:"0rem",margin:"0",border:"0"}};var ne=function(e){var t=(0,c.useState)({showForm:!1,selectedForm:"",selectedItem:{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""}}),n=(0,s.Z)(t,2),a=n[0],l=n[1],o=function(e,t){return function(){if("RawMaterial"==t){var n={showForm:!0,selectedForm:(0,f.jsx)(W,{onCancel:i,selected:a.selectedItem}),selectedItem:(0,r.Z)({},e)};l((0,r.Z)((0,r.Z)({},a),n))}else if("alternate"==t){var o={showForm:!0,selectedForm:(0,f.jsx)(ee,{onCancel:i,selected:a.selectedItem}),selectedItem:(0,r.Z)({},e)};l((0,r.Z)((0,r.Z)({},a),o))}else if("splitup"==t){var s={showForm:!0,selectedForm:(0,f.jsx)(U,{onCancel:i,selected:a.selectedItem}),selectedItem:(0,r.Z)({},e)};l((0,r.Z)((0,r.Z)({},a),s))}}},i=function(){l((0,r.Z)((0,r.Z)({},a),{},{showForm:!1,selectedForm:"",selectedItem:(0,r.Z)((0,r.Z)({},a.selectedItem),{id:0,productName:"",cusName:"",part:"",quantity:"",cost:""})}))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(N.Z,{show:a.showForm,onHide:i,children:[(0,f.jsx)(N.Z.Header,{closeButton:!0,children:(0,f.jsx)(N.Z.Title,{})}),(0,f.jsx)(N.Z.Body,{children:a.selectedForm})]}),(0,f.jsxs)(d.Z,{title:"Raw Material Details",buttonName:"Add Material",onHeaderClick:o({},"RawMaterial"),bottonShow:a.showForm,styles:te,children:[(0,f.jsx)(y.Z,{cols:O(o,["RawMaterial","alternate","splitup"]),data:q,className:T}),(0,f.jsxs)(P.Z,{className:L,children:[(0,f.jsx)(w.Z,{className:G,children:"Request"}),(0,f.jsx)(w.Z,{variant:"danger",className:G,onClick:e.onCancel,children:"Cancel"})]})]})]})};var re=["orderForm","monthlyPlan","dailyPlan","jobOrder","processView","dispatch","approval"];var ae=function(e){var t=(0,p.ZP)({data:[]}),n=t.get,m=t.post,h=t.response,Z=(t.loading,t.error,(0,c.useState)([])),g=(0,s.Z)(Z,2),C=g[0],N=g[1],Q=(0,c.useState)([]),D=(0,s.Z)(Q,2),M=D[0],E=D[1],_=(0,c.useState)([{value:"",label:"Select"}]),A=(0,s.Z)(_,2),R=A[0],B=A[1],V=(0,c.useState)([{value:"",label:"Select"}]),q=(0,s.Z)(V,2),O=q[0],T=q[1],G=(0,c.useState)([{value:"",label:"Select"}]),L=(0,s.Z)(G,2),Y=L[0],K=L[1],W=(0,c.useCallback)((0,o.Z)((0,a.Z)().mark((function e(){var t,r,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u.ZP+"/dailyPlan/listplans",{id:1,loadState:Date().toString()});case 2:return t=e.sent,e.next=5,n(u.ZP+"/product/loadOptions");case 5:return r=e.sent,e.next=8,n(u.ZP+"/process/loadOptions");case 8:return o=e.sent,e.next=11,n(u.ZP+"/customer/loadOptions");case 11:s=e.sent,h.ok&&(N(t),B([].concat((0,l.Z)(R),(0,l.Z)(r))),K([].concat((0,l.Z)(Y),(0,l.Z)(o))),T([].concat((0,l.Z)(O),(0,l.Z)(s))));case 13:case"end":return e.stop()}}),e)}))),[n,h]);(0,c.useEffect)((function(){W()}),[]);var z=(0,I.v9)((function(e){return e.orderEntryProps})),J=function(e){console.log(z.approval)},U=(0,I.v9)((function(e){return[e.modalProps.showModal,e.modalProps.selectedForm,e.modalProps.selectedData]})),X=(0,s.Z)(U,3),$=X[0],ee=(X[1],X[2],(0,I.v9)((function(e){return[e.alertProps.showAlert,e.alertProps.alertMessage,e.alertProps.alertVariant]}))),te=(0,s.Z)(ee,3),ae=te[0],le=(te[1],te[2],(0,I.I0)()),oe={fields:[{title:"From Date",type:"date",name:"fromDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"To Date",type:"date",name:"toDate",contains:"date",inpprops:{format:"dd/mm/yy"}},{title:"Customer Name",type:"select",name:"customerId",contains:"Select",options:O},{title:"Product Name",type:"select",name:"productId",contains:"Select",options:R},{title:"Department",type:"select",name:"proSubCat",contains:"Select",options:[{value:"0",label:"Select"},{value:"1",label:"Foundry"},{value:"2",label:"Quality"},{value:"3",label:"Machining"},{value:"4",label:"Others"}]},{title:"Process Name",type:"select",name:"processId",contains:"Select",options:Y}]},se=function(e,t){le(k.I.showAlertHandler({showAlert:!ae,alertMessage:e,alertVariant:t}))},ce=(0,c.useCallback)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u.ZP+"/product/loadProductsByCustomer",{id:t});case 2:n=e.sent,B([{value:"",label:"Select"}].concat((0,l.Z)(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,h]),ie=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.orderId?"/plan/update":"/plan/create",console.log(n),e.next=4,m(u.ZP+n,t);case 4:r=e.sent,console.log(r),1==r.retValues.status?t.orderId?(E(M.map((function(e){return e.orderId===r.retValues.order.orderId?r.retValues.order:e}))),le(F.n.hideModalHandler()),se(r.retValues.message,"success")):r.retValues.order.orderId>0&&(E([r.retValues.order].concat((0,l.Z)(M))),le(F.n.hideModalHandler()),se(r.retValues.message,"success")):(le(F.n.hideModalHandler()),se(r.retValues.message,"danger"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,t){return function(){"orderForm"===t?le(F.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,f.jsx)(v,{onCancel:function(){return le(F.n.hideModalHandler())},selectedItem:(0,r.Z)({},e),saveFunction:ie,loadState:z.orderSearch,loadStateContoller:J}),showModal:!0})):"edit"===t?(console.log((0,r.Z)({},e)),le(F.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,f.jsx)(f.Fragment,{}),showModal:!0}))):"productionEntry"===t?(console.log((0,r.Z)({},e)),le(F.n.showModalHandler({selectedData:{productId:e.productId},selectedForm:(0,f.jsx)(H,{onCancel:function(){return le(F.n.hideModalHandler())},selectedItem:(0,r.Z)({},e),saveFunction:ie,loadState:z.orderSearch,loadStateContoller:J}),showModal:!0}))):"rmRequest"==t&&le(F.n.showModalHandler({selectedData:(0,r.Z)({},e),selectedForm:(0,f.jsx)(ne,{onCancel:function(){return le(F.n.hideModalHandler())},selectedItem:(0,r.Z)({},e),saveFunction:ie,loadStateContoller:J}),showModal:!0}))}},ue=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/dailyPlan/search",console.log(n),e.next=4,m(u.ZP+n,t);case 4:r=e.sent,console.log(r),N(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:b,children:[(0,f.jsx)(d.Z,{title:"Plan Search",buttonName:"Add Plan",onHeaderClick:de({},"orderForm"),bottonShow:$,children:(0,f.jsx)(i.Z,{template:oe,watchFields:["customerId"],rowwise:4,validate:function(e,t){t.errors,t.setError,t.clearErrors,""!=e[0]&&ce(e[0])},onSubmit:function(e){e.random=Math.random(),console.log(e),ue(e)},onCancel:e.onCancel,buttonName:"Search"})}),(0,f.jsxs)(S.Z,{md:12,children:[(0,f.jsxs)(P.Z,{children:[(0,f.jsx)(w.Z,{className:j,onClick:de({},"productionEntry"),children:"Production Entry"}),(0,f.jsx)(w.Z,{className:j,onClick:de({},"rmRequest"),children:"Add Materials Request"})]}),(0,f.jsx)(y.Z,{cols:x(de,re),data:C,rows:10})]})]})}},24654:function(){}}]);
//# sourceMappingURL=4090.40764579.chunk.js.map